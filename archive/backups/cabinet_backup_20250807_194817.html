<!DOCTYPE html>
<!-- MCP-BREADCRUMB:2025-07-25:14:40 - Добавлены breadcrumbs для отслеживания изменений -->
<!-- MCP-BREADCRUMB:2025-07-25:21:50 - Добавлены MCP-маркеры для 32 методов и функций -->
<!-- MCP-BREADCRUMB:2025-07-25:14:35 - Проанализирована структура маркеров, создан mcp-index.json -->
<!-- MCP-BREADCRUMB:2025-07-25:14:30 - Начата работа по покрытию MCP-маркерами -->
<!-- MCP-BREADCRUMB:2025-07-26:15:30 - Добавлены MCP-маркеры для 20+ методов генерации контента и вспомогательных функций -->
<!-- MCP-BREADCRUMB:2025-07-26:16:00 - Добавлены MCP-маркеры для всех методов генерации контента страниц, функций модальных окон и вспомогательных методов -->
<html lang="ru">
<head>
    <!-- MCP-MARKER:MODULE:CABINET_CONTROLLER - Контроллер личного кабинета -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GENESIS 1.1 - Личный кабинет</title>
    
    <!-- КРИТИЧЕСКИЕ МЕТА-ТЕГИ: Принудительное отключение кэширования -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate, max-age=0">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="cache-version" content="3.6.0">
    <meta name="build-time" content="24-01-2025-15:30">
    <meta name="force-reload" content="true">
    
    <!-- PWA Meta -->
    <!-- 
        theme-color поддерживается Chrome, Safari, Edge. Firefox игнорирует.
        Альтернативы:
        - iOS: apple-mobile-web-app-status-bar-style
        - Android: manifest.json theme_color
        - Windows: msapplication-TileColor
    -->
    <meta name="theme-color" content="#0d1117">
    <meta name="msapplication-TileColor" content="#0d1117">
    <meta name="description" content="Личный кабинет GENESIS 1.1 - управление депозитами, аналитика и контроль доступа">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Manifest -->
    <link rel="manifest" href="assets/manifest.json">
    
    <!-- Icons -->
    <link rel="shortcut icon" href="assets/favicon-new.ico?v=3.6" type="image/x-icon">
    <link rel="icon" href="assets/favicon-new.ico?v=3.6" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/icons/favicon-32x32.png?v=3.6">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/icons/favicon-16x16.png?v=3.6">
    <link rel="apple-touch-icon" href="assets/icons/apple-icon-180x180.png?v=3.6">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- ВСТРОЕННЫЕ КРИТИЧЕСКИЕ СТИЛИ ДЛЯ АВТОНОМНОЙ РАБОТЫ -->
    <!-- MCP-MARKER:SECTION:CRITICAL_STYLES - Критические встроенные стили -->
    <style>
        /* MCP-MARKER:SECTION:CSS_VARIABLES - CSS переменные */
        :root {
            --primary-color: #ff6b35;
            --secondary-color: #00d4ff;
            --secondary-hover: #00b8e6;
            --success-color: #00ff41;
            --warning-color: #ffa726;
            --error-color: #ff4757;
            --accent-color: #9c27b0;
            --gold-color: #ffd700;
            --bg-primary: #0a0a0f;
            --bg-secondary: #1a1a2e;
            --bg-tertiary: #2a2a3e;
            --text-primary: #ffffff;
            --text-secondary: #b0b0b0;
            --border-color: #333344;
        }
        
        /* MCP-MARKER:SECTION:BASE_STYLES - Базовые стили */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Rajdhani', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow: hidden;
            font-size: 16px;
            line-height: 1.6;
        }
        
        .hidden { display: none !important; }
        
        /* MCP-MARKER:SECTION:LOADING_SCREEN_STYLES - Стили экрана загрузки */
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-direction: column;
        }
        
        .loading-content {
            text-align: center;
            max-width: 400px;
            padding: 2rem;
        }
        
        .loading-logo {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-family: 'Orbitron', monospace;
            text-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        .loading-text {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-color);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Auth Screen */
        .auth-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-primary);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 900;
        }
        
        .auth-container {
            background: var(--bg-secondary);
            padding: 3rem 2rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
            min-width: 400px;
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .auth-title {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-size: 2rem;
            font-family: 'Orbitron', monospace;
        }
        
        .auth-subtitle {
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            font-family: 'Rajdhani', monospace;
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(255, 107, 53, 0.1);
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            font-family: 'Rajdhani', sans-serif;
            transition: all 0.3s ease;
            min-width: 120px;
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn:hover {
            background: #e55a2b;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }
        
        .btn-outline {
            background: transparent;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-outline:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .btn-full {
            width: 100%;
        }
        
        .btn-secondary {
            background: var(--secondary-color);
            color: var(--bg-primary);
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-secondary:hover {
            background: var(--secondary-hover);
            transform: translateY(-1px);
        }
        
        .btn-success {
            background: var(--success-color);
            color: var(--bg-primary);
        }
        
        .btn-success:hover {
            background: #00cc33;
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: var(--bg-primary);
        }
        
        .btn-warning:hover {
            background: #ff8f00;
        }
        
        /* Cabinet Layout */
        .cabinet-app {
            display: grid;
            grid-template-areas: 
                "header header"
                "sidebar main";
            grid-template-columns: 280px 1fr;
            grid-template-rows: 70px 1fr;
            height: 100vh;
            background: var(--bg-primary);
        }
        
        .cabinet-header {
            grid-area: header;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .header-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.5rem;
            color: var(--primary-color);
            font-weight: 700;
        }
        
        .header-subtitle {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-address {
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--text-secondary);
            background: var(--bg-tertiary);
            padding: 6px 12px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .user-address::before {
            content: '👛';
        }
        
        .cabinet-sidebar {
            grid-area: sidebar;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
            padding: 1rem 0;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
        }
        
        .sidebar-header {
            padding: 0 1.5rem 1rem;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 1rem;
        }
        
        .sidebar-nav .nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .nav-item {
            margin: 0.25rem 1rem;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            color: var(--text-secondary);
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-weight: 500;
            cursor: pointer;
            position: relative;
        }
        
        .nav-link::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            width: 3px;
            height: 0;
            background: var(--primary-color);
            transform: translateY(-50%);
            transition: height 0.3s ease;
        }
        
        .nav-link:hover::before,
        .nav-link.active::before {
            height: 100%;
        }
        
        .nav-link:hover,
        .nav-link.active {
            background: rgba(255, 107, 53, 0.1);
            color: var(--primary-color);
            padding-left: 20px;
        }
        
        .nav-icon {
            font-size: 1.2rem;
            width: 20px;
            text-align: center;
        }
        
        .cabinet-main {
            grid-area: main;
            overflow-y: auto;
            padding: 2rem;
            background: var(--bg-primary);
        }
        
        /* Custom Scrollbar */
        .cabinet-main::-webkit-scrollbar,
        .cabinet-sidebar::-webkit-scrollbar {
            width: 8px;
        }
        
        .cabinet-main::-webkit-scrollbar-track,
        .cabinet-sidebar::-webkit-scrollbar-track {
            background: var(--bg-secondary);
        }
        
        .cabinet-main::-webkit-scrollbar-thumb,
        .cabinet-sidebar::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        .cabinet-main::-webkit-scrollbar-thumb:hover,
        .cabinet-sidebar::-webkit-scrollbar-thumb:hover {
            background: #e55a2b;
        }
        
        /* Page Styles */
        .page-header {
            margin-bottom: 2rem;
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* @keyframes notificationSlideIn удален - дубликат (определен выше) */
        
        @keyframes notificationSlideOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }
        
        .page-title {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-family: 'Orbitron', monospace;
        }
        
        .page-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .stats-card {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stats-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: translateX(-100%);
            transition: transform 0.5s ease;
        }
        
        .stats-card:hover::before {
            transform: translateX(0);
        }
        
        .stats-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            border-color: var(--primary-color);
        }
        
        .stats-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .stats-title {
            color: var(--text-primary);
            font-size: 1rem;
            font-weight: 600;
        }
        
        .stats-icon {
            font-size: 1.5rem;
        }
        
        .stats-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            font-family: 'Orbitron', monospace;
        }
        
        .stats-change {
            font-size: 0.9rem;
            color: var(--success-color);
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        
        .stats-change.negative {
            color: var(--error-color);
        }
        
        .empty-state {
            text-align: center;
            padding: 3rem 2rem;
            color: var(--text-secondary);
        }
        
        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }
        
        .empty-state h3 {
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }
        
        /* Emergency Controls */
        .emergency-actions {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            z-index: 999;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }
        
        .emergency-actions h4 {
            color: var(--warning-color);
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .emergency-actions .btn {
            display: block;
            margin-bottom: 0.5rem;
            padding: 8px 12px;
            font-size: 0.8rem;
            min-width: auto;
        }
        
        .emergency-actions .btn:last-child {
            margin-bottom: 0;
        }
        
        /* Access Status Indicator */
        .access-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-tertiary);
            padding: 6px 12px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            font-size: 0.85rem;
            transition: all 0.3s ease;
        }
        
        .access-status.active {
            border-color: var(--success-color);
            background: rgba(0, 255, 65, 0.1);
        }
        
        .access-status.inactive {
            border-color: var(--error-color);
            background: rgba(255, 71, 87, 0.1);
        }
        
        .access-status.warning {
            border-color: var(--warning-color);
            background: rgba(255, 167, 38, 0.1);
        }
        
        .access-days {
            background: var(--primary-color);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .access-status.inactive .access-days {
            background: var(--error-color);
        }
        
        .access-status.warning .access-days {
            background: var(--warning-color);
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
        }
        
        .modal-container {
            background: var(--bg-secondary);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border-color);
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease-out;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-header h3 {
            color: var(--primary-color);
            margin: 0;
            font-family: 'Orbitron', monospace;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 2rem;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--primary-color);
            transform: rotate(90deg);
        }
        
        .modal-content {
            padding: 2rem;
        }
        
        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem 1.5rem;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            gap: 1rem;
            z-index: 1100;
            animation: notificationSlideIn 0.3s ease-out;
        }
        
        @keyframes notificationSlideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .notification.success {
            border-color: var(--success-color);
        }
        
        .notification.error {
            border-color: var(--error-color);
        }
        
        .notification.warning {
            border-color: var(--warning-color);
        }
        
        .notification.info {
            border-color: var(--secondary-color);
        }
        
        .notification-icon {
            font-size: 1.5rem;
        }
        
        .notification-content h4 {
            margin: 0 0 0.25rem 0;
            font-size: 1rem;
        }
        
        .notification-content p {
            margin: 0;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .cabinet-app {
                grid-template-columns: 1fr;
                grid-template-areas: 
                    "header"
                    "main";
            }
            
            .cabinet-sidebar {
                display: none;
            }
            
            .header-content {
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .user-address {
                font-size: 0.8rem;
                padding: 4px 8px;
            }
            
            .auth-container {
                min-width: 300px;
                margin: 1rem;
                padding: 2rem 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .page-title {
                font-size: 1.5rem;
            }
            
            .cabinet-main {
                padding: 1rem;
            }
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
        }
        
        @media (max-width: 768px) {
            .mobile-menu-toggle {
                display: block;
            }
            
            .cabinet-sidebar {
                position: fixed;
                left: -280px;
                top: 70px;
                height: calc(100vh - 70px);
                transition: left 0.3s ease;
                z-index: 100;
            }
            
            .cabinet-sidebar.active {
                left: 0;
            }
        }
        
        /* Tooltips */
        .tooltip {
            position: relative;
        }
        
        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-tertiary);
            color: var(--text-primary);
            padding: 0.5rem 1rem;
            border-radius: 6px;
            font-size: 0.875rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            border: 1px solid var(--border-color);
            margin-bottom: 0.5rem;
        }
        
        .tooltip:hover::after {
            opacity: 1;
        }
        
        /* CSS классы для замены inline стилей */
        .auth-test-info {
            margin-top: 1rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .auth-test-code {
            background: var(--bg-tertiary);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
        }
        
        .access-status-hidden {
            display: none;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-left {
            text-align: left;
        }
        
        .text-right {
            text-align: right;
        }
        
        .flex-center {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .flex-between {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .flex-gap {
            display: flex;
            gap: 1rem;
        }
        
        .padding-large {
            padding: 1rem 1.5rem;
        }
        
        .font-size-large {
            font-size: 4rem;
        }
        
        .font-size-medium {
            font-size: 1.1rem;
        }
        
        .font-size-small {
            font-size: 0.875rem;
        }
        
        .font-size-xs {
            font-size: 0.75rem;
        }
        
        .margin-bottom-large {
            margin-bottom: 2rem;
        }
        
        .margin-bottom-medium {
            margin-bottom: 1rem;
        }
        
        .margin-bottom-small {
            margin-bottom: 0.5rem;
        }
        
        .line-height-normal {
            line-height: 1.6;
        }
        
        .line-height-large {
            line-height: 1.8;
        }
        
        .border-radius-small {
            border-radius: 4px;
        }
        
        .border-radius-medium {
            border-radius: 8px;
        }
        
        .border-radius-large {
            border-radius: 12px;
        }
        
        .background-primary {
            background: var(--bg-primary);
        }
        
        .background-secondary {
            background: var(--bg-secondary);
        }
        
        .background-tertiary {
            background: var(--bg-tertiary);
        }
        
        .color-success {
            color: var(--success-color);
        }
        
        .color-error {
            color: var(--error-color);
        }
        
        .color-secondary {
            color: var(--secondary-color);
        }
        
        .color-text-secondary {
            color: var(--text-secondary);
        }
        
        .color-text-primary {
            color: var(--text-primary);
        }
        
        .gap-small {
            gap: 0.5rem;
        }
        
        .padding-small {
            padding: 0.5rem;
        }
        
        .padding-medium {
            padding: 1rem;
        }
        
        .word-break-all {
            word-break: break-all;
        }
        
        .color-warning {
            color: var(--warning-color);
        }
        
        .flex-1 {
            flex: 1;
        }
        
        .flex-wrap {
            flex-wrap: wrap;
        }
        
        .modal-medium {
            max-width: 500px;
        }
        
        .plex-actions {
            display: flex;
            flex-wrap: wrap;
            gap: 1.5rem;
            margin-top: 1rem;
        }
        .plex-action-btn {
            flex: 1 1 220px;
            min-width: 220px;
            max-width: 320px;
            padding: 1.2rem 1.5rem;
            font-size: 1.15rem;
            font-weight: 600;
            border: none;
            border-radius: 14px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            color: #fff;
            box-shadow: 0 4px 24px rgba(255,107,53,0.10);
            transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            margin-bottom: 0;
            text-align: center;
            text-decoration: none;
            outline: none;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.7rem;
        }
        .plex-action-btn:hover {
            background: linear-gradient(90deg, var(--secondary-color), var(--primary-color));
            transform: translateY(-2px) scale(1.03);
            box-shadow: 0 8px 32px rgba(0,212,255,0.15);
            color: #fff;
        }
        .plex-action-btn.outline {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            box-shadow: none;
        }
        .plex-action-btn.outline:hover {
            background: var(--primary-color);
            color: #fff;
            border-color: var(--secondary-color);
        }
        .plex-link {
            color: #8ec6ff;
            text-decoration: underline;
            transition: color 0.2s;
        }
        .plex-link:hover {
            color: #fff;
            text-decoration: underline;
        }
        
        /* Утилитарные классы для замены inline стилей */
        .opacity-50 {
            opacity: 0.5;
        }
        
        .position-absolute {
            position: absolute;
        }
        
        .top-1 {
            top: 1rem;
        }
        
        .right-1 {
            right: 1rem;
        }
        
        .font-weight-bold {
            font-weight: bold;
        }
        
        .font-weight-600 {
            font-weight: 600;
        }
        
        .max-width-60 {
            max-width: 60%;
        }
        
        .align-items-flex-start {
            align-items: flex-start;
        }
        
        .flex-shrink-0 {
            flex-shrink: 0;
        }
        
        .gap-1-5 {
            gap: 1.5rem;
        }
        
        .gap-0-7 {
            gap: 0.7rem;
        }
        
        .min-width-220 {
            min-width: 220px;
        }
        
        .max-width-320 {
            max-width: 320px;
        }
        
        .border-2 {
            border-width: 2px;
        }
        
        .box-shadow-none {
            box-shadow: none;
        }
        
        .scale-103 {
            transform: scale(1.03);
        }
        
        .text-decoration-none {
            text-decoration: none;
        }
        
        .text-decoration-underline {
            text-decoration: underline;
        }
        
        .transition-color-02s {
            transition: color 0.2s;
        }
        
        .transition-background-03s {
            transition: background 0.3s, transform 0.2s, box-shadow 0.2s;
        }
        
        .transition-all-03s {
            transition: all 0.3s ease;
        }
        
        .outline-none {
            outline: none;
        }
        
        .cursor-pointer {
            cursor: pointer;
        }
        
        .align-self-center {
            align-self: center;
        }
        
        .grid-template-columns-1fr {
            grid-template-columns: 1fr;
        }
        
        .flex-direction-column {
            flex-direction: column;
        }
        
        .align-items-flex-start {
            align-items: flex-start;
        }
        
        .gap-025rem {
            gap: 0.25rem;
        }
        
        /* Стили для информационной сетки устройства */
        .genesis-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .genesis-info-card {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .genesis-info-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }
        
        .genesis-info-card h3 {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .genesis-panel-glass {
            background: rgba(255, 255, 255, 0.05);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .tech-card-checkmark {
            position: absolute;
            top: 1rem;
            right: 1rem;
            color: var(--success-color);
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.8rem;
            padding: 0.5rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .info-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }
        
        .info-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .info-value {
            color: var(--text-primary);
            font-weight: 600;
            text-align: right;
            max-width: 60%;
            word-break: break-word;
        }
        
        /* Стили для уведомления о конфиденциальности */
        .privacy-notice {
            background: rgba(255, 255, 255, 0.05);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 2rem;
            margin-top: 2rem;
            display: flex;
            align-items: flex-start;
            gap: 1.5rem;
        }
        
        .privacy-icon {
            font-size: 2rem;
            color: var(--success-color);
            flex-shrink: 0;
        }
        
        .privacy-content h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .privacy-content p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }
        
        .privacy-features {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .privacy-feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--text-primary);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Стили для страницы "Как все устроено" */
        .info-banner, .warning-banner, .success-banner {
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .info-banner {
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.1), rgba(0, 123, 255, 0.05));
            border: 1px solid rgba(0, 123, 255, 0.3);
        }

        .warning-banner {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.05));
            border: 1px solid rgba(255, 193, 7, 0.3);
        }

        .success-banner {
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.1), rgba(40, 167, 69, 0.05));
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .info-icon, .warning-icon, .success-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .info-content, .warning-content, .success-content {
            flex: 1;
        }

        .info-content h3, .warning-content h4, .success-content h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-primary);
        }

        .warning-content ul {
            margin: 0.5rem 0 0 1rem;
            color: var(--text-secondary);
        }

        .steps-container {
            display: grid;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .step-card {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .step-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 123, 255, 0.1);
            border-color: var(--primary-color);
        }

        .step-number {
            width: 2.5rem;
            height: 2.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .step-content h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-primary);
        }

        .step-content p {
            margin: 0;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .architecture-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .arch-card {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .arch-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .arch-content h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-primary);
        }

        .arch-content p {
            margin: 0;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .multiplier-explanation {
            margin: 1.5rem 0;
        }

        .multiplier-card {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            margin-bottom: 1rem;
        }

        .multiplier-icon {
            font-size: 2rem;
            flex-shrink: 0;
        }

        .multiplier-content h4 {
            margin: 0 0 0.5rem 0;
            color: var(--text-primary);
        }

        .example-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin: 1rem 0;
        }

        .example-card h4 {
            margin: 0 0 1rem 0;
            color: var(--text-primary);
        }

        .calculation {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .calc-step {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
        }

        .calc-label {
            color: var(--text-secondary);
        }

        .calc-value {
            color: var(--text-primary);
            font-weight: bold;
        }

        .calc-divider {
            height: 1px;
            background: var(--border-color);
            margin: 0.5rem 0;
        }

        .multiplier-example {
            background: rgba(40, 167, 69, 0.1);
            border-radius: 8px;
            padding: 0.75rem !important;
            border: 1px solid rgba(40, 167, 69, 0.3);
        }

        .multiplier-example .calc-value {
            color: var(--success-color);
            font-size: 1.1rem;
        }

        .multiplier-info {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin-top: 1rem;
        }

        .multiplier-info h4 {
            margin: 0 0 1rem 0;
            color: var(--text-primary);
        }

        .multiplier-info ul {
            margin: 0;
            padding-left: 1.5rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .multiplier-info li {
            margin-bottom: 0.5rem;
        }

        .action-buttons {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .step-card, .arch-card, .multiplier-card {
                flex-direction: column;
                text-align: center;
            }

            .step-number {
                align-self: center;
            }

            .architecture-info {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .calc-step {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.25rem;
            }
        }

        /* Стиль для прогресс-бара */
        .progress-bar {
            width: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--success-color), var(--primary-color));
            transition: width 0.5s ease;
            border-radius: 3px;
        }

        /* Утилитарные CSS классы для замены inline стилей */
        /* Отступы */
        .mb-1 { margin-bottom: 1rem; }
        .mb-1-5 { margin-bottom: 1.5rem; }
        .mb-2 { margin-bottom: 2rem; }
        .mb-0-3 { margin-bottom: 0.3rem; }
        .mb-0-5 { margin-bottom: 0.5rem; }
        .mt-2 { margin-top: 2rem; }
        .p-1 { padding: 1rem; }
        .p-1-5 { padding: 1.5rem; }
        .p-2 { padding: 2rem; }
        .p-0-5 { padding: 0.5rem; }

        /* Flex утилиты */
        .flex { display: flex; }
        .flex-space-between { justify-content: space-between; }
        .flex-center { align-items: center; }
        .flex-gap { gap: 1rem; }
        .flex-gap-0-5 { gap: 0.5rem; }
        .flex-1 { flex: 1; }
        .flex-wrap { flex-wrap: wrap; }
        .flex-column { flex-direction: column; }

        /* Грид утилиты */
        .grid { display: grid; }
        .grid-auto-fit { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-auto-fit-150 { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
        .grid-auto-fit-200 { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
        .grid-auto-fit-280 { grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
        .grid-1fr-1fr { grid-template-columns: 1fr 1fr; }
        .grid-col-span-2 { grid-column: span 2; }

        /* Текстовые утилиты */
        .text-center { text-align: center; }
        .text-primary { color: var(--text-primary); }
        .text-secondary { color: var(--text-secondary); }
        .text-success { color: var(--success-color); }
        .font-weight-500 { font-weight: 500; }
        .font-weight-600 { font-weight: 600; }
        .font-weight-700 { font-weight: 700; }
        .font-size-1-2 { font-size: 1.2rem; }
        .font-size-1-3 { font-size: 1.3rem; }
        .font-size-0-9 { font-size: 0.9rem; }
        .font-size-1-5 { font-size: 1.5rem; }
        .font-size-2 { font-size: 2rem; }

        /* Фон и границы */
        .bg-secondary { background: var(--bg-secondary); }
        .bg-primary { background: var(--bg-primary); }
        .border-radius-12 { border-radius: 12px; }
        .border-radius-8 { border-radius: 8px; }
        .border-radius-6 { border-radius: 6px; }
        .border-radius-4 { border-radius: 4px; }
        .border-success { border: 1px solid var(--success-color); }

        /* Позиционирование */
        .position-relative { position: relative; }
        .position-absolute { position: absolute; }
        .display-inline-block { display: inline-block; }
        .opacity-70 { opacity: 0.7; }
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Размеры */
        .w-0 { width: 0%; }
        .w-100 { width: 100%; }
        .overflow-hidden { overflow: hidden; }

        /* Статус карточки депозита */
        .deposit-card {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            border: 1px solid var(--success-color);
        }

        .deposit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .deposit-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .deposit-status-active {
            background: var(--success-color);
            color: var(--bg-primary);
            padding: 0.3rem 0.6rem;
            border-radius: 6px;
            font-size: 0.8rem;
        }

        .deposit-status-purchased {
            background: var(--success-color);
            color: var(--bg-primary);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .deposit-status-available {
            background: var(--primary-color);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .deposit-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .deposit-progress {
            margin-bottom: 1rem;
        }

        .deposit-progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .deposit-progress-bar {
            background: var(--bg-primary);
            border-radius: 8px;
            overflow: hidden;
        }

        .deposit-actions {
            display: flex;
            gap: 0.5rem;
        }

        .plan-card {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            position: relative;
            transition: all 0.3s ease;
        }

        .plan-card-locked {
            opacity: 0.6;
        }

        .plan-card-available {
            cursor: pointer;
        }

        .plan-details {
            margin-bottom: 1rem;
        }

        .plan-detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .plan-total-profit {
            background: var(--bg-primary);
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .plan-total-profit-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Информационные блоки */
        .info-block {
            margin-top: 2rem;
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            border-left: 4px solid var(--primary-color);
        }

        .info-title {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .info-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .info-list-item {
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }

        .info-list-item:last-child {
            margin-bottom: 0;
        }

        .notification-warning-static {
            position: static !important;
            margin-bottom: 1.5rem;
        }

        /* Последняя активность */
        .last-activity {
            margin-top: 2rem;
        }

        .last-activity-title {
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .last-activity-content {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
        }

        /* Быстрые действия */
        .quick-actions {
            margin-bottom: 2rem;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        /* Статистика */
        .stats-mb-2 {
            margin-bottom: 2rem;
        }

        /* Активные депозиты */
        .active-deposits {
            margin-bottom: 2rem;
        }

        .active-deposits-title {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .active-deposits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        /* Планы депозитов */
        .plans-title {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .plans-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        /* Бонусы */
        .bonus-section {
            margin-bottom: 2rem;
        }

        .bonus-card {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 1px solid var(--border-color);
        }

        .bonus-title {
            color: var(--primary-color);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        .bonus-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .bonus-item {
            background: var(--bg-primary);
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .bonus-item-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .bonus-item-title {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .bonus-item-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .bonus-icon {
            font-size: 2rem;
        }

        .bonus-reward {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .bonus-reward-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Специальные элементы */
        .bonus-item-special {
            background: linear-gradient(135deg, var(--bg-primary), rgba(255, 107, 53, 0.1));
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .bonus-special-title {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .gap-1 { gap: 1rem; }
        .gap-1-5 { gap: 1.5rem; }

        /* Статистические карточки */
        .stat-card {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .stat-value {
            font-weight: 700;
            font-size: 1.2rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .stat-sublabel {
            color: var(--text-secondary);
            font-size: 0.7rem;
        }

        /* Специальные карточки экосистемы */
        .ecosystem-card {
            background: var(--bg-secondary);
            padding: 1rem 1.5rem;
            border-radius: 8px;
            border: 2px solid var(--secondary-color);
        }

        .ecosystem-value {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1rem;
        }

        .ecosystem-desc {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .ecosystem-subdesc {
            color: var(--text-secondary);
            font-size: 0.7rem;
        }

        /* Специальные секции */
        .golden-bonus {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(156, 39, 176, 0.1));
            padding: 2.5rem;
            border-radius: 20px;
            border: 3px solid var(--gold-color);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.2);
        }

        .golden-title {
            color: var(--gold-color);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.8rem;
            font-size: 1.8rem;
        }

        .golden-description {
            color: var(--text-primary);
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }

        .golden-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .golden-card {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .golden-card-special {
            border: 2px solid var(--gold-color);
        }

        .golden-value {
            font-weight: 700;
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .golden-value-medium {
            font-weight: 700;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .golden-value-large {
            font-weight: 700;
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
        }

        .golden-conditions {
            margin-top: 2rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        /* Множители */
        .multiplier-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .multiplier-card {
            text-align: center;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: 8px;
            border: 2px solid;
        }

        .multiplier-card-active {
            border-color: var(--success-color);
        }

        .multiplier-card-secondary {
            border-color: var(--secondary-color);
        }

        .multiplier-card-warning {
            border-color: var(--warning-color);
        }

        .multiplier-card-default {
            border-color: var(--border-color);
        }

        .multiplier-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .multiplier-title {
            color: var(--text-primary);
            margin-bottom: 0.3rem;
        }

        .multiplier-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .multiplier-time {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .multiplier-progress {
            background: var(--bg-secondary);
            border-radius: 6px;
            overflow: hidden;
            margin-top: 0.5rem;
        }

        .multiplier-progress-bar {
            height: 4px;
        }

        .effect-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .effect-item {
            text-align: center;
        }

        .effect-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .effect-value {
            font-size: 1.2rem;
        }

        .available-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1rem;
        }

        .multiplier-shop-card {
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: 8px;
            border: 2px solid var(--border-color);
        }

        .multiplier-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .multiplier-name {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .multiplier-badge {
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            color: var(--bg-primary);
        }

        .multiplier-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .multiplier-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .multiplier-cost {
            color: var(--success-color);
            font-weight: 600;
        }

        .multiplier-alt {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        /* Акции и промо */
        .promo-card {
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: 8px;
            border-left: 4px solid;
            margin-bottom: 1rem;
        }

        .promo-card-success {
            border-left-color: var(--success-color);
        }

        .promo-card-secondary {
            border-left-color: var(--secondary-color);
        }

        .promo-title {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .promo-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.8rem;
        }

        .promo-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .promo-timer {
            font-size: 0.8rem;
        }

        .promo-permanent {
            color: var(--secondary-color);
            font-size: 0.8rem;
        }

        .promo-btn {
            font-size: 0.8rem;
            padding: 0.4rem 0.8rem;
        }

        /* Рекорды и статистика */
        .records-grid {
            margin-bottom: 1rem;
        }

        .record-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .record-item:last-child {
            margin-bottom: 0;
        }

        .record-label {
            color: var(--text-secondary);
        }

        .record-value {
            font-weight: 600;
        }

        /* Стандартные контейнеры */
        .standard-container {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .device-info-container {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        /* Дополнительные утилиты для бонусов */
        .bonus-item-simple {
            background: var(--bg-primary);
            padding: 1.5rem;
            border-radius: 12px;
            border: 2px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .bonus-reward-simple {
            background: var(--bg-secondary);
            padding: 0.8rem;
            border-radius: 8px;
        }

        .bonus-description {
            color: var(--text-secondary);
            font-size: 0.8rem;
            margin-top: 0.3rem;
        }

        .bonus-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .bonus-list-item {
            display: flex;
            align-items: start;
            gap: 0.5rem;
            margin-bottom: 0.8rem;
        }

        .bonus-list-item:last-child {
            margin-bottom: 0;
        }

        .bonus-check {
            color: var(--success-color);
        }

        .font-size-0-8 { font-size: 0.8rem; }
        .font-size-0-85 { font-size: 0.85rem; }
        .mt-0-3 { margin-top: 0.3rem; }
        .mb-0-3 { margin-bottom: 0.3rem; }
        .mb-0-5 { margin-bottom: 0.5rem; }
        .mt-0-5 { margin-top: 0.5rem; }
        .font-size-0-75 { font-size: 0.75rem; }
        .mt-1 { margin-top: 1rem; }
        .p-0-5 { padding: 0.8rem; }
    </style>
</head>
<body>
    <!-- MCP-MARKER:SECTION:AUTHENTICATION - Экран авторизации -->
    
    <!-- Loading Screen -->
    <!-- MCP-MARKER:COMPONENT:LOADING_SCREEN - Экран загрузки -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">GENESIS 1.1</div>
            <div class="loading-text">Инициализация системы...</div>
            <div class="loading-spinner"></div>
        </div>
        
        <!-- Emergency Actions (показываются через 10 секунд) -->
        <div id="emergency-actions" class="emergency-actions hidden">
            <h4>🚨 Экстренные действия</h4>
            <button class="btn btn-outline" onclick="clearCacheAndReload()">🧹 Очистить кэш</button>
            <button class="btn btn-outline" onclick="enableDevAccess()">🔧 Доступ разработчика</button>
            <button class="btn btn-outline" onclick="showSystemInfo()">📊 Системная информация</button>
        </div>
    </div>

    <!-- Auth Screen -->
    <!-- MCP-MARKER:COMPONENT:AUTH_SCREEN - Экран авторизации -->
    <div id="auth-screen" class="auth-screen hidden">
        <div class="auth-container">
            <h2 class="auth-title">🔐 Авторизация</h2>
            <p class="auth-subtitle">Введите BSC адрес для доступа к кабинету</p>
            
            <div class="form-group">
                <label for="wallet-address" class="form-label">BSC Адрес:</label>
                <input type="text" 
                       id="wallet-address" 
                       class="form-control" 
                       placeholder="0x1234567890abcdef..."
                       autocomplete="off">
            </div>
            
            <button id="auth-button" class="btn btn-full">Войти в кабинет</button>
            
            <div class="auth-test-info">
                <p>Для тестирования используйте:</p>
                <code class="auth-test-code">
                    0x742d35Cc6634C0532925a3b844Bc9e7595f2bD8e
                </code>
            </div>
        </div>
    </div>

    <!-- Cabinet App -->
    <!-- MCP-MARKER:SECTION:CABINET_LAYOUT - Основная структура кабинета -->
    <!-- MCP-MARKER:COMPONENT:CABINET_APP - Основное приложение кабинета -->
    <div id="cabinet-app" class="cabinet-app hidden">
        <!-- Header -->
        <!-- MCP-MARKER:COMPONENT:CABINET_HEADER - Шапка кабинета -->
        <div id="cabinet-header" class="cabinet-header">
            <div class="header-content">
                <div class="header-left">
                    <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
                    <h1 class="header-title">GENESIS 1.1</h1>
                    <span class="header-subtitle">Личный кабинет</span>
                </div>
                <div class="header-right">
                    <div class="user-info">
                        <!-- Статус доступа к платформе -->
                        <div id="access-status-indicator" class="access-status tooltip access-status-hidden" data-tooltip="Статус доступа к платформе">
                            <span id="access-status-icon">🔒</span>
                            <span id="access-status-text">Проверка...</span>
                            <span id="access-days-count" class="access-days"></span>
                        </div>
                        
                        <span class="user-address" id="user-address-display"></span>
                        <button class="btn btn-outline" onclick="logout()">Выйти</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <!-- MCP-MARKER:COMPONENT:CABINET_SIDEBAR - Боковое меню -->
        <div id="cabinet-sidebar" class="cabinet-sidebar">
            <nav class="sidebar-nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-page="dashboard">
                            <span class="nav-icon">📊</span>
                            <span class="nav-text">Панель управления</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="how-it-works">
                            <span class="nav-icon">🛠️</span>
                            <span class="nav-text">Как все устроено</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="portfolio">
                            <span class="nav-icon">💼</span>
                            <span class="nav-text">Портфель</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="transactions">
                            <span class="nav-icon">📋</span>
                            <span class="nav-text">Транзакции</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="analytics">
                            <span class="nav-icon">📈</span>
                            <span class="nav-text">Аналитика</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="bonuses">
                            <span class="nav-icon">🎁</span>
                            <span class="nav-text">Бонусы</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="gifts">
                            <span class="nav-icon">🎈</span>
                            <span class="nav-text">Подарки</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="referrals">
                            <span class="nav-icon">👥</span>
                            <span class="nav-text">Рефералы</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="multipliers">
                            <span class="nav-icon">⚡</span>
                            <span class="nav-text">Множители</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="mining-rent">
                            <span class="nav-icon">💻</span>
                            <span class="nav-text">Аренда мощностей</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="my-device">
                            <span class="nav-icon">📱</span>
                            <span class="nav-text">Мое устройство</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="plex-coin">
                            <span class="nav-icon">🪙</span>
                            <span class="nav-text">PLEX Монета</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="settings">
                            <span class="nav-icon">⚙️</span>
                            <span class="nav-text">Настройки</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="experience">
                            <span class="nav-icon">📅</span>
                            <span class="nav-text">Стаж</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-page="rank">
                            <span class="nav-icon">🏅</span>
                            <span class="nav-text">Ранг</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>

        <!-- Main Content -->
        <!-- MCP-MARKER:COMPONENT:CABINET_MAIN - Основной контент -->
        <div id="cabinet-main" class="cabinet-main">
            <div id="page-content">
                <!-- Контент страниц будет загружаться сюда -->
                <div class="page-header">
                    <h2 class="page-title">Добро пожаловать!</h2>
                    <p class="page-subtitle">Выберите раздел в меню слева для начала работы</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stats-card">
                        <div class="stats-header">
                            <span class="stats-title">Общий баланс</span>
                            <span class="stats-icon">💰</span>
                        </div>
                        <div class="stats-value">0.00</div>
                        <div class="stats-change">USDT</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-header">
                            <span class="stats-title">Активные депозиты</span>
                            <span class="stats-icon">📈</span>
                        </div>
                        <div class="stats-value">0</div>
                        <div class="stats-change">штук</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-header">
                            <span class="stats-title">Общий доход</span>
                            <span class="stats-icon">🚀</span>
                        </div>
                        <div class="stats-value">0.00</div>
                        <div class="stats-change">USDT</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-header">
                            <span class="stats-title">Доход за сегодня</span>
                            <span class="stats-icon">📅</span>
                        </div>
                        <div class="stats-value">0.00</div>
                        <div class="stats-change">USDT</div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="margin-bottom-large">
                    <h3 class="color-text-primary margin-bottom-medium">Быстрые действия</h3>
                    <div class="flex-gap flex-wrap">
                        <button class="btn btn-secondary" onclick="window.CabinetApp.showCreateDepositModal()">
                            💰 Создать депозит
                        </button>
                        <button class="btn btn-outline" onclick="window.CabinetApp.showPlatformAccessModal()">
                            🔑 Пополнить доступ
                        </button>
                        <button class="btn btn-outline" onclick="window.CabinetApp.navigateTo('analytics')">
                            📊 Аналитика
                        </button>
                        <button class="btn btn-outline" onclick="window.CabinetApp.navigateTo('settings')">
                            ⚙️ Настройки
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MCP-MARKER:SECTION:DEPOSIT_MODALS - Модальные окна депозитов -->
    
    <!-- Модальное окно создания депозита -->
    <!-- MCP-MARKER:COMPONENT:MODAL_DEPOSIT_CREATE - Модалка создания депозита -->
    <div id="create-deposit-modal" class="modal-overlay hidden">
        <div class="modal-container">
            <div class="modal-header">
                <h3>💰 Создание депозита</h3>
                <button class="modal-close" onclick="closeDepositModal()">&times;</button>
            </div>
            <div class="modal-content">
                <div id="deposit-modal-content">
                    <!-- Контент будет загружен динамически -->
                    <div class="empty-state">
                        <div class="empty-icon">⏳</div>
                        <h3>Загрузка...</h3>
                        <p>Подготовка формы создания депозита</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно подтверждения депозита -->
    <!-- MCP-MARKER:COMPONENT:MODAL_DEPOSIT_CONFIRM - Модалка подтверждения депозита -->
    <div id="confirm-deposit-modal" class="modal-overlay hidden">
        <div class="modal-container modal-medium">
            <div class="modal-header">
                <h3 class="color-warning">⚠️ Подтверждение депозита</h3>
                <button class="modal-close" onclick="closeConfirmModal()">&times;</button>
            </div>
            <div class="modal-content">
                <div id="confirm-modal-content">
                    <!-- Контент подтверждения -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно результата транзакции -->
    <!-- MCP-MARKER:COMPONENT:MODAL_TRANSACTION_RESULT - Модалка результата транзакции -->
    <div id="transaction-result-modal" class="modal-overlay hidden">
        <div class="modal-container modal-medium">
            <div class="modal-header">
                <h3 id="transaction-result-title">📊 Результат транзакции</h3>
                <button class="modal-close" onclick="closeTransactionResultModal()">&times;</button>
            </div>
            <div class="modal-content">
                <div id="transaction-result-content">
                    <!-- Результат транзакции -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно пополнения доступа -->
    <!-- MCP-MARKER:COMPONENT:MODAL_PLATFORM_ACCESS - Модалка пополнения доступа -->
    <div id="platform-access-modal" class="modal-overlay hidden">
        <div class="modal-container modal-medium">
            <div class="modal-header">
                <h3>🔑 Пополнение доступа к платформе</h3>
                <button class="modal-close" onclick="closePlatformAccessModal()">&times;</button>
            </div>
            <div class="modal-content">
                <div id="platform-access-content">
                    <!-- Контент будет загружен динамически -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <!-- MCP-MARKER:COMPONENT:NOTIFICATION_CONTAINER - Контейнер уведомлений -->
    <div id="notification-container"></div>

    <!-- Подключение всех необходимых сервисов -->
    <script src="js/config.js"></script>
    <script src="js/services/deposit-system-final-check.js"></script>
    <script src="js/services/utils.js"></script>
    <script src="js/services/api.js"></script>
    <script src="js/services/platform-access.js"></script>
    <script src="js/services/deposits-enhanced.js"></script>
    <script src="js/services/deposits-cabinet.js"></script>
    <script src="js/services/deposit-creation-system.js"></script>
    <script src="js/services/cabinet-deposit-integration.js"></script>
    <script src="js/services/mining-rent.js"></script>
    <script src="js/services/multipliers.js"></script>
    
    <!-- PWA установка -->
    <script src="js/services/pwa-install.js"></script>
    
    <!-- Расширение страницы устройства -->
    <script src="js/services/device-page-extension.js"></script>
    
    <!-- Исправление модальных окон депозитов -->
    <script src="fixes/fix-deposit-modal.js"></script>
    
    <!-- КРИТИЧЕСКИЙ СКРИПТ: Системная инициализация -->
    <script>
        // MCP-MARKER:SECTION:SYSTEM_INITIALIZATION - Системная инициализация
        // MCP-BREADCRUMB:2025-07-25:14:40 - Добавлены breadcrumbs в JavaScript секцию
        
        console.log('🚀 GENESIS 1.1 Cabinet - Starting initialization...');
        
        // Глобальные переменные
        window.GENESIS_VERSION = '1.1';
        window.currentUser = null;
        window.cabinetApp = null;
        
        // MCP-MARKER:SECTION:GLOBAL_FUNCTIONS - Глобальные функции
        // MCP-BREADCRUMB:2025-07-25:21:45 - Добавлены маркеры для глобальных функций
        
        // MCP-MARKER:FUNCTION:DEBUG_LOG - Функция логирования
        window.debugLog = function(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const prefix = type === 'error' ? '❌' : type === 'warn' ? '⚠️' : type === 'success' ? '✅' : 'ℹ️';
            console.log(`${prefix} [${timestamp}] ${message}`);
        };
        
        debugLog('GENESIS 1.1 Cabinet - инициализация', 'info');
        
        // Функции для работы с модальными окнами
        // MCP-MARKER:FUNCTION:CLOSE_DEPOSIT_MODAL - Закрытие модалки депозита
        window.closeDepositModal = function() {
            document.getElementById('create-deposit-modal').classList.add('hidden');
        };
        
        // MCP-MARKER:FUNCTION:CLOSE_CONFIRM_MODAL - Закрытие модалки подтверждения
        window.closeConfirmModal = function() {
            document.getElementById('confirm-deposit-modal').classList.add('hidden');
        };
        
        // MCP-MARKER:FUNCTION:CLOSE_TRANSACTION_RESULT_MODAL - Закрытие модалки результата
        window.closeTransactionResultModal = function() {
            document.getElementById('transaction-result-modal').classList.add('hidden');
        };
        
        // MCP-MARKER:FUNCTION:CLOSE_PLATFORM_ACCESS_MODAL - Закрытие модалки доступа
        window.closePlatformAccessModal = function() {
            const modal = document.getElementById('platform-access-modal');
            if (modal) modal.classList.add('hidden');
        };
        
        // Глобальные функции для экстренных действий и управления
        // MCP-MARKER:FUNCTION:CLEAR_CACHE_AND_RELOAD - Очистка кэша и перезагрузка
        window.clearCacheAndReload = function() {
            console.log('🧹 Очистка кэша и перезагрузка...');
            localStorage.clear();
            sessionStorage.clear();
            // Принудительная перезагрузка без кэша
            window.location.reload(true);
        };
        
        // MCP-MARKER:FUNCTION:ENABLE_DEV_ACCESS - Режим разработчика
        window.enableDevAccess = function() {
            console.log('🔧 Режим разработчика активирован');
            localStorage.setItem('genesis_dev_mode', 'true');
            window.CabinetApp.showNotification('Режим разработчика', 'Активирован режим разработчика', 'info');
        };
        
        // MCP-MARKER:FUNCTION:SHOW_SYSTEM_INFO - Системная информация
        window.showSystemInfo = function() {
            console.log('📊 Системная информация:');
            console.log('- Версия:', window.GENESIS_VERSION);
            console.log('- User Agent:', navigator.userAgent);
            console.log('- Платформа:', navigator.platform);
            console.log('- Язык:', navigator.language);
            alert('Системная информация выведена в консоль (F12)');
        };
        
        // MCP-MARKER:FUNCTION:LOGOUT - Выход из системы
        window.logout = function() {
            console.log('🚪 Выход из системы...');
            localStorage.removeItem('genesis_user_address');
            window.location.reload();
        };
        
        // MCP-MARKER:FUNCTION:TOGGLE_MOBILE_MENU - Переключение мобильного меню
        window.toggleMobileMenu = function() {
            const sidebar = document.getElementById('cabinet-sidebar');
            if (sidebar) {
                sidebar.classList.toggle('active');
                window.CabinetApp.state.isMobileMenuOpen = !window.CabinetApp.state.isMobileMenuOpen;
            }
        };
        
        // Основной объект приложения
        window.CabinetApp = {
            state: {
                isAuthenticated: false,
                userAddress: null,
                currentPage: 'dashboard',
                platformAccess: null,
                deposits: [],
                portfolio: null,
                isMobileMenuOpen: false
            },
            
            // Инициализация приложения
            // MCP-MARKER:METHOD:CABINET:INIT - Инициализация приложения
            // MCP-BREADCRUMB:2025-07-25:14:40 - Метод покрыт маркерами, готов к использованию
            init: function() {
                try {
                    console.log('🚀 Инициализация GENESIS 1.1 Cabinet...');
                    
                    // Показываем экран загрузки
                    this.showLoadingScreen();
                    
                    // Настраиваем обработчик кнопки авторизации сразу
                    this.setupAuthHandler();
                    
                    // Инициализируем техническую информацию
                    this.initTechnicalInfo();
                    
                    // Запускаем измерение FPS
                    this.startFPSMeasurement();
                    
                    // Показываем экстренные действия через 10 секунд
                    setTimeout(() => {
                        const emergencyActions = document.getElementById('emergency-actions');
                        if (emergencyActions) {
                            emergencyActions.classList.remove('hidden');
                        }
                    }, 10000);
                    
                    // Проверяем авторизацию
                    setTimeout(() => {
                        this.checkAuth();
                    }, 2000);
                    
                    // Получаем информацию о сети асинхронно (не блокирует инициализацию)
                    setTimeout(() => {
                        this.getNetworkInfo();
                    }, 1000);
                    
                } catch (error) {
                    console.error('❌ Ошибка инициализации:', error);
                    // Показываем экран авторизации в случае ошибки
                    setTimeout(() => {
                        this.showAuthScreen();
                    }, 1000);
                }
            },
            
            // Инициализация технической информации
            // MCP-MARKER:METHOD:CABINET:INIT_TECHNICAL_INFO - Инициализация технической информации
            initTechnicalInfo: function() {
                // Обновляем информацию об устройстве
                this.updateDeviceInfo();
                
                // Запускаем таймер сессии
                this.startSessionTimer();
                
                // Обновляем статистику каждые 5 секунд
                setInterval(() => {
                    this.updateStats();
                }, 5000);
            },
            
            // Получение информации о сети
            // MCP-MARKER:METHOD:CABINET:GET_NETWORK_INFO - Получение информации о сети
            getNetworkInfo: function() {
                // Получаем IP адрес и локацию с таймаутом
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000); // 5 секунд таймаут
                
                fetch('https://api.ipify.org?format=json', { 
                    signal: controller.signal 
                })
                    .then(response => {
                        clearTimeout(timeoutId);
                        if (!response.ok) throw new Error('Network response was not ok');
                        return response.json();
                    })
                    .then(data => {
                        const ipElement = document.getElementById('network-ip');
                        if (ipElement) ipElement.textContent = data.ip;
                        
                        // Получаем информацию о локации с таймаутом
                        const locationController = new AbortController();
                        const locationTimeoutId = setTimeout(() => locationController.abort(), 5000);
                        
                        return fetch(`https://ipapi.co/${data.ip}/json/`, { 
                            signal: locationController.signal 
                        });
                    })
                    .then(response => {
                        clearTimeout(locationTimeoutId);
                        if (!response.ok) throw new Error('Location API response was not ok');
                        return response.json();
                    })
                    .then(data => {
                        const locationElement = document.getElementById('network-location');
                        const providerElement = document.getElementById('network-provider');
                        const orgElement = document.getElementById('network-organization');
                        
                        if (locationElement) locationElement.textContent = `${data.city || 'Неизвестно'}, ${data.country_name || 'Неизвестно'}`;
                        if (providerElement) providerElement.textContent = data.org || 'Не определено';
                        if (orgElement) orgElement.textContent = data.org || 'Не определено';
                    })
                    .catch(error => {
                        console.log('Не удалось получить информацию о сети:', error);
                        const elements = ['network-ip', 'network-location', 'network-provider', 'network-organization'];
                        elements.forEach(id => {
                            const element = document.getElementById(id);
                            if (element) element.textContent = 'Не определено';
                        });
                    });
                
                // Измеряем пинг до BSC с таймаутом
                setTimeout(() => {
                    this.measureBSCPing();
                }, 1000);
            },
            
            // Измерение пинга до BSC
            // MCP-MARKER:METHOD:CABINET:MEASURE_BSC_PING - Измерение пинга до BSC
            measureBSCPing: function() {
                const startTime = performance.now();
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 3000); // 3 секунды таймаут
                
                fetch('https://bsc-dataseed.binance.org/', { 
                    method: 'HEAD',
                    mode: 'no-cors',
                    signal: controller.signal
                })
                .then(() => {
                    clearTimeout(timeoutId);
                    const endTime = performance.now();
                    const ping = Math.round(endTime - startTime);
                    const element = document.getElementById('network-bsc-ping');
                    if (element) element.textContent = `${ping} мс`;
                })
                .catch((error) => {
                    clearTimeout(timeoutId);
                    console.log('Не удалось измерить пинг до BSC:', error);
                    const element = document.getElementById('network-bsc-ping');
                    if (element) element.textContent = 'Недоступно';
                });
            },
            
            // Измерение FPS
            // MCP-MARKER:METHOD:CABINET:START_FPS_MEASUREMENT - Измерение FPS
            startFPSMeasurement: function() {
                let frameCount = 0;
                let lastTime = performance.now();
                
                const measureFPS = () => {
                    frameCount++;
                    const currentTime = performance.now();
                    
                    if (currentTime - lastTime >= 1000) {
                        const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                        const element = document.getElementById('performance-fps');
                        if (element) element.textContent = `${fps} FPS`;
                        frameCount = 0;
                        lastTime = currentTime;
                    }
                    
                    requestAnimationFrame(measureFPS);
                };
                
                requestAnimationFrame(measureFPS);
            },
            
            // Обновление статистики
            // MCP-MARKER:METHOD:CABINET:UPDATE_STATS - Обновление статистики
            updateStats: function() {
                // Обновляем время последнего обновления
                const lastUpdateElement = document.getElementById('stats-last-update');
                if (lastUpdateElement) {
                    lastUpdateElement.textContent = new Date().toLocaleTimeString();
                }
                
                // Обновляем память браузера
                if (performance.memory) {
                    const usedMB = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);
                    const totalMB = Math.round(performance.memory.totalJSHeapSize / 1024 / 1024);
                    const memoryElement = document.getElementById('stats-memory-usage');
                    if (memoryElement) {
                        memoryElement.textContent = `${usedMB} MB / ${totalMB} MB`;
                    }
                }
                
                // Симулируем загрузку CPU (в реальном приложении это можно получить через Web Workers)
                const cpuUsage = Math.floor(Math.random() * 30) + 10; // 10-40%
                const cpuElement = document.getElementById('stats-cpu-usage');
                if (cpuElement) {
                    cpuElement.textContent = `${cpuUsage}%`;
                }
            },
            
            // Настройка обработчиков событий
            // MCP-MARKER:METHOD:CABINET:SETUP_EVENT_HANDLERS - Настройка обработчиков событий
            setupEventHandlers: function() {
                // Авторизация
                const authButton = document.getElementById('auth-button');
                const walletInput = document.getElementById('wallet-address');
                
                if (authButton) {
                    authButton.addEventListener('click', () => this.handleAuth());
                }
                
                if (walletInput) {
                    walletInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.handleAuth();
                        }
                    });
                }
                
                // Навигация по страницам
                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const page = link.getAttribute('data-page');
                        if (page) {
                            this.navigateTo(page);
                        }
                    });
                });
                
                // Закрытие модалок по клику на overlay
                document.querySelectorAll('.modal-overlay').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) {
                            modal.classList.add('hidden');
                        }
                    });
                });
            },
            
            // Обработка авторизации
            // MCP-MARKER:METHOD:CABINET:AUTH_HANDLER - Обработка авторизации
            // MCP-BREADCRUMB:2025-07-25:14:40 - Метод требует доработки интеграции с BSC
            handleAuth: async function() {
                console.log('🔐 handleAuth вызвана');
                
                const walletInput = document.getElementById('wallet-address');
                const authButton = document.getElementById('auth-button');
                
                console.log('🔍 Элементы найдены:', { walletInput: !!walletInput, authButton: !!authButton });
                
                if (!walletInput || !authButton) {
                    console.error('❌ Не найдены элементы формы авторизации');
                    return;
                }
                
                const address = walletInput.value.trim();
                console.log('📝 Введенный адрес:', address);
                
                // Валидация адреса
                if (!address) {
                    console.log('❌ Адрес пустой');
                    this.showNotification('Ошибка', 'Пожалуйста, введите BSC адрес', 'error');
                    return;
                }
                
                if (!address.match(/^0x[a-fA-F0-9]{40}$/)) {
                    console.log('❌ Неверный формат адреса');
                    this.showNotification('Ошибка', 'Неверный формат BSC адреса', 'error');
                    return;
                }
                
                console.log('✅ Адрес валиден, начинаем авторизацию');
                
                authButton.disabled = true;
                authButton.textContent = 'Проверка...';
                
                try {
                    // Проверка доступа к платформе
                    console.log('🔍 Проверка доступа к платформе для: ' + address);
                    
                    // Здесь будет реальная проверка через BSCScan
                    // Пока используем заглушку
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Сохранение адреса пользователя
                    localStorage.setItem('genesis_user_address', address);
                    this.state.userAddress = address;
                    this.state.isAuthenticated = true;
                    
                    console.log('✅ Авторизация успешна:', address);
                    console.log('💾 Адрес сохранен в localStorage');
                    
                    this.showNotification('Успех', 'Авторизация прошла успешно', 'success');
                    
                    console.log('🚀 Вызываем showCabinet...');
                    await this.showCabinet();
                    
                } catch (error) {
                    console.error('❌ Ошибка авторизации:', error);
                    this.showNotification('Ошибка', 'Ошибка авторизации. Попробуйте еще раз.', 'error');
                } finally {
                    authButton.disabled = false;
                    authButton.textContent = 'Войти в кабинет';
                }
            },
            
            // Показать модальное окно создания депозита
            // MCP-MARKER:METHOD:CABINET:SHOW_CREATE_DEPOSIT_MODAL - Показать модальное окно создания депозита
            showCreateDepositModal: function() {
                console.log('💰 Открытие модального окна создания депозита');
                
                // Проверяем доступ к платформе
                if (!this.state.platformAccess || !this.state.platformAccess.isActive) {
                    this.showNotification('Внимание', 'Необходимо пополнить доступ к платформе для создания депозитов', 'warning');
                    this.showPlatformAccessModal();
                    return;
                }
                
                // Проверяем инициализацию сервисов депозитов
                if (window.GenesisCabinet && window.GenesisCabinet.showDepositModal) {
                    // Используем систему из cabinet-deposit-integration.js
                    window.GenesisCabinet.showDepositModal();
                } else if (window.DepositCreationSystem && window.DepositCreationSystem.showDepositCreationModal) {
                    // Используем систему из deposit-creation-system.js
                    window.DepositCreationSystem.showDepositCreationModal();
                } else {
                    // Показываем базовое модальное окно
                    this.showBasicDepositModal();
                }
            },
            
            // Показать базовое модальное окно депозита
            // MCP-MARKER:METHOD:CABINET:SHOW_BASIC_DEPOSIT_MODAL - Показать базовое модальное окно депозита
            showBasicDepositModal: function() {
                const modal = document.getElementById('create-deposit-modal');
                const content = document.getElementById('deposit-modal-content');
                
                if (!modal || !content) {
                    this.showNotification('Ошибка', 'Модальное окно не найдено', 'error');
                    return;
                }
                
                // Генерируем базовый контент
                content.innerHTML = `
                    <div style="text-align: center; padding: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">💰 Создание депозита</h3>
                        
                        <div style="background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--secondary-color); margin-bottom: 1rem;">📱 QR-код для оплаты</h4>
                            <div style="background: white; padding: 1rem; border-radius: 8px; display: inline-block; margin-bottom: 1rem;">
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(window.GENESIS_CONFIG.addresses.system)}" alt="QR код" />
                            </div>
                            <p style="color: var(--text-secondary); font-size: 0.9rem;">Отсканируйте QR-код в мобильном кошельке</p>
                        </div>
                        
                        <div style="background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid var(--border-color);">
                            <h4 style="color: var(--warning-color); margin-bottom: 1rem;">📋 Адрес для оплаты</h4>
                            <div style="font-family: monospace; font-size: 0.85rem; color: var(--text-primary); background: var(--bg-secondary); padding: 1rem; border-radius: 6px; word-break: break-all; margin-bottom: 1rem;">
                                ${window.GENESIS_CONFIG.addresses.system}
                            </div>
                            <button onclick="window.CabinetApp.copyAddress('${window.GENESIS_CONFIG.addresses.system}')" class="btn-secondary" style="width: 100%;">
                                📋 Копировать адрес
                            </button>
                        </div>
                        
                        <div style="background: rgba(255, 107, 53, 0.1); padding: 1rem; border-radius: 8px; border: 1px solid var(--primary-color);">
                            <h5 style="color: var(--primary-color); margin-bottom: 0.5rem;">ℹ️ Информация</h5>
                            <ul style="text-align: left; color: var(--text-secondary); font-size: 0.9rem; margin: 0; padding-left: 1.5rem;">
                                <li>Минимальная сумма: $25 USDT</li>
                                <li>Сеть: BSC (BEP-20)</li>
                                <li>Депозит активируется автоматически</li>
                                <li>Время подтверждения: 1-5 минут</li>
                            </ul>
                        </div>
                    </div>
                `;
                
                modal.classList.remove('hidden');
            },
            
            // Копировать адрес в буфер обмена
            // MCP-MARKER:METHOD:CABINET:COPY_ADDRESS - Копировать адрес в буфер обмена
            copyAddress: function(address) {
                navigator.clipboard.writeText(address).then(() => {
                    this.showNotification('Успех', 'Адрес скопирован в буфер обмена', 'success');
                }).catch(err => {
                    console.error('Ошибка копирования:', err);
                    this.showNotification('Ошибка', 'Не удалось скопировать адрес', 'error');
                });
            },
            
            // Показать модальное окно пополнения доступа
            // MCP-MARKER:METHOD:CABINET:SHOW_PLATFORM_ACCESS_MODAL - Показать модальное окно пополнения доступа
            showPlatformAccessModal: function() {
                console.log('🔑 Открытие модального окна пополнения доступа');
                
                const modal = document.getElementById('platform-access-modal');
                const content = document.getElementById('platform-access-content');
                
                if (!modal || !content) {
                    this.showNotification('Ошибка', 'Модальное окно не найдено', 'error');
                    return;
                }
                
                // Генерируем контент для пополнения доступа
                content.innerHTML = `
                    <div style="text-align: center; padding: 1.5rem;">
                        <h4 style="color: var(--warning-color); margin-bottom: 1.5rem;">⚠️ Требуется пополнение доступа</h4>
                        
                        <div style="background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid var(--warning-color);">
                            <div style="margin-bottom: 1rem;">
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">Стоимость доступа:</div>
                                <div class="font-size-1-5 font-weight-700" style="color: var(--primary-color);">$1 в день</div>
                            </div>
                            <div style="color: var(--text-secondary); font-size: 0.85rem;">
                                Минимальное пополнение: $10 USDT (на 10 дней)
                            </div>
                        </div>
                        
                        <div style="background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem; border: 1px solid var(--border-color);">
                            <h5 style="color: var(--secondary-color); margin-bottom: 1rem;">📱 QR-код для оплаты</h5>
                            <div style="background: white; padding: 1rem; border-radius: 8px; display: inline-block; margin-bottom: 1rem;">
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(window.GENESIS_CONFIG.addresses.platform)}" alt="QR код" />
                            </div>
                        </div>
                        
                        <div style="background: var(--bg-primary); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                            <div style="color: var(--text-secondary); font-size: 0.85rem; margin-bottom: 0.5rem;">Адрес для пополнения:</div>
                            <div style="font-family: monospace; font-size: 0.8rem; color: var(--secondary-color); word-break: break-all;">
                                ${window.GENESIS_CONFIG.addresses.platform}
                            </div>
                        </div>
                        
                        <button onclick="window.CabinetApp.copyAddress('${window.GENESIS_CONFIG.addresses.platform}')" class="btn-warning" style="width: 100%;">
                            📋 Копировать адрес
                        </button>
                    </div>
                `;
                
                modal.classList.remove('hidden');
            },
            
            // Показать уведомление
            // MCP-MARKER:METHOD:CABINET:SHOW_NOTIFICATION - Показать уведомление
            showNotification: function(title, message = '', type = 'info') {
                // Создаем уведомление
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: var(--bg-secondary);
                    border: 1px solid var(--border-color);
                    border-radius: 8px;
                    padding: 1rem 1.5rem;
                    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
                    display: flex;
                    align-items: center;
                    gap: 1rem;
                    z-index: 1100;
                    animation: notificationSlideIn 0.3s ease-out;
                    min-width: 300px;
                    max-width: 400px;
                `;
                
                // Цвет границы в зависимости от типа
                const borderColors = {
                    'success': 'var(--success-color)',
                    'error': 'var(--error-color)',
                    'warning': 'var(--warning-color)',
                    'info': 'var(--secondary-color)'
                };
                notification.style.borderLeftWidth = '4px';
                notification.style.borderLeftColor = borderColors[type] || borderColors.info;
                
                // Иконки для разных типов
                const icons = {
                    'success': '✅',
                    'error': '❌',
                    'warning': '⚠️',
                    'info': 'ℹ️'
                };
                
                notification.innerHTML = `
                    <div class="notification-icon" style="font-size: 1.5rem;">${icons[type] || icons.info}</div>
                    <div class="notification-content">
                        <h4 style="margin: 0 0 0.25rem 0; font-size: 1rem;">${title}</h4>
                        ${message ? `<p style="margin: 0; font-size: 0.875rem; color: var(--text-secondary);">${message}</p>` : ''}
                    </div>
                    <button onclick="this.parentElement.remove()" style="background: none; border: none; color: var(--text-secondary); font-size: 1.2rem; cursor: pointer; padding: 0; margin-left: 1rem;">×</button>
                `;
                
                // Добавляем в контейнер
                let container = document.getElementById('notification-container');
                if (!container) {
                    container = document.createElement('div');
                    container.id = 'notification-container';
                    document.body.appendChild(container);
                }
                container.appendChild(notification);
                
                // Автоматическое скрытие
                setTimeout(() => {
                    notification.style.animation = 'notificationSlideOut 0.3s ease-out';
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, type === 'error' ? 7000 : 4000);
            },
            
            // Показать экран авторизации
            // MCP-MARKER:METHOD:CABINET:SHOW_AUTH_SCREEN - Показать экран авторизации
            showAuthScreen: function() {
                document.getElementById('loading-screen').classList.add('hidden');
                document.getElementById('auth-screen').classList.remove('hidden');
                document.getElementById('cabinet-app').classList.add('hidden');
                
                // Фокус на поле ввода
                setTimeout(() => {
                    const walletInput = document.getElementById('wallet-address');
                    if (walletInput) walletInput.focus();
                }, 100);
            },
            
            // Показать кабинет
            // MCP-MARKER:METHOD:CABINET:SHOW_CABINET - Показать кабинет
            showCabinet: async function() {
                console.log('🏠 showCabinet вызвана');
                
                try {
                    document.getElementById('loading-screen').classList.add('hidden');
                    document.getElementById('auth-screen').classList.add('hidden');
                    document.getElementById('cabinet-app').classList.remove('hidden');
                    
                    console.log('✅ Экраны переключены');
                    
                    // Отображение адреса пользователя
                    const addressDisplay = document.getElementById('user-address-display');
                    if (addressDisplay) {
                        addressDisplay.textContent = this.state.userAddress.slice(0, 6) + '...' + this.state.userAddress.slice(-4);
                        console.log('👤 Адрес пользователя отображен');
                    } else {
                        console.warn('⚠️ Элемент user-address-display не найден');
                    }
                    
                    console.log('🔍 Проверяем доступ к платформе...');
                    // Проверка доступа к платформе
                    await this.checkPlatformAccess();
                    
                    console.log('📊 Загружаем данные пользователя...');
                    // Загрузка данных пользователя
                    await this.loadUserData();
                    
                    console.log('🔧 Настраиваем обработчики событий...');
                    // Настройка обработчиков событий
                    this.setupEventHandlers();
                    
                    console.log('📋 Переходим на панель управления...');
                    // Показать панель управления
                    this.navigateTo('dashboard');
                    
                    console.log('✅ Кабинет успешно показан');
                    
                } catch (error) {
                    console.error('❌ Ошибка в showCabinet:', error);
                }
            },
            
            // Проверка доступа к платформе
            // MCP-MARKER:METHOD:CABINET:PLATFORM_ACCESS_CHECK - Проверка доступа к платформе
            // MCP-BREADCRUMB:2025-07-25:14:40 - Критический метод, требует полной реализации
            checkPlatformAccess: async function() {
                const statusIndicator = document.getElementById('access-status-indicator');
                const statusIcon = document.getElementById('access-status-icon');
                const statusText = document.getElementById('access-status-text');
                const daysCount = document.getElementById('access-days-count');
                
                if (!statusIndicator) return;
                
                statusIndicator.style.display = 'flex';
                
                try {
                    // Здесь будет реальная проверка через BSCScan
                    // Пока используем заглушку
                    const mockAccess = {
                        isActive: true,
                        daysRemaining: 7,
                        status: 'active'
                    };
                    
                    this.state.platformAccess = mockAccess;
                    
                    if (mockAccess.isActive) {
                        statusIndicator.className = 'access-status active tooltip';
                        statusIcon.textContent = '✅';
                        statusText.textContent = 'Доступ активен';
                        daysCount.textContent = mockAccess.daysRemaining + ' дней';
                        
                        if (mockAccess.daysRemaining <= 3) {
                            statusIndicator.className = 'access-status warning tooltip';
                            statusIcon.textContent = '⚠️';
                            this.showNotification('Внимание', `Доступ истекает через ${mockAccess.daysRemaining} дней`, 'warning');
                        }
                    } else {
                        statusIndicator.className = 'access-status inactive tooltip';
                        statusIcon.textContent = '❌';
                        statusText.textContent = 'Доступ истек';
                        daysCount.textContent = '0 дней';
                        this.showNotification('Внимание', 'Необходимо пополнить доступ к платформе', 'error');
                    }
                    
                } catch (error) {
                    debugLog('Ошибка проверки доступа: ' + error.message, 'error');
                    statusIndicator.className = 'access-status inactive tooltip';
                    statusIcon.textContent = '⚠️';
                    statusText.textContent = 'Ошибка проверки';
                }
            },
            
            // Загрузка данных пользователя
            // MCP-MARKER:METHOD:CABINET:USER_DATA_LOAD - Загрузка данных пользователя
            loadUserData: async function() {
                try {
                    debugLog('Загрузка данных пользователя...', 'info');
                    
                    // Здесь будет загрузка реальных данных из блокчейна
                    // Пока используем заглушки
                    
                    debugLog('Данные пользователя загружены', 'success');
                } catch (error) {
                    debugLog('Ошибка загрузки данных: ' + error.message, 'error');
                }
            },
            
            // Навигация по страницам
            // MCP-MARKER:METHOD:CABINET:NAVIGATION - Навигация по страницам
            navigateTo: function(page) {
                debugLog('Переход на страницу: ' + page, 'info');
                
                // Обновление активной ссылки
                document.querySelectorAll('.nav-link').forEach(link => {
                    if (link.getAttribute('data-page') === page) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
                
                this.state.currentPage = page;
                
                // Закрытие мобильного меню
                if (window.innerWidth <= 768) {
                    document.getElementById('cabinet-sidebar').classList.remove('active');
                    this.state.isMobileMenuOpen = false;
                }
                
                // Загрузка контента страницы
                this.loadPageContent(page);
            },
            
            // Загрузка контента страницы
            // MCP-MARKER:METHOD:CABINET:PAGE_CONTENT_LOADER - Загрузчик контента страниц
            loadPageContent: function(page) {
                const contentContainer = document.getElementById('page-content');
                if (!contentContainer) return;
                
                // Здесь будет загрузка реального контента страниц
                let content = '';
                
                switch(page) {
                    case 'dashboard':
                        content = this.getDashboardContent();
                        break;
                    case 'portfolio':
                        content = this.getPortfolioContent();
                        break;
                    case 'transactions':
                        content = this.getTransactionsContent();
                        break;
                    case 'analytics':
                        content = this.getAnalyticsContent();
                        break;
                    case 'bonuses':
                        content = this.getBonusesContent();
                        break;
                    case 'gifts':
                        content = this.getGiftsContent();
                        break;
                    case 'referrals':
                        content = this.getReferralsContent();
                        break;
                    case 'multipliers':
                        content = this.getMultipliersContent();
                        break;
                    case 'mining-rent':
                        content = this.getMiningRentContent();
                        break;
                    case 'my-device':
                        content = this.getMyDeviceContent();
                        break;
                    case 'plex-coin':
                        content = this.getPlexCoinContent();
                        break;
                    case 'settings':
                        content = this.getSettingsContent();
                        break;
                    case 'experience':
                        content = this.getExperienceContent();
                        break;
                    case 'rank':
                        content = this.getRankContent();
                        break;
                    case 'how-it-works':
                        content = this.getHowItWorksContent();
                        break;
                    default:
                        content = this.getDashboardContent();
                }
                
                contentContainer.innerHTML = content;
                
                // Инициализация специфичных для страницы скриптов
                this.initPageSpecificScripts(page);
            },
            
            // Инициализация скриптов для конкретной страницы
            initPageSpecificScripts: function(page) {
                switch(page) {
                    case 'my-device':
                        if (window.GENESIS_TECH_INFO) {
                            window.GENESIS_TECH_INFO.init();
                        }
                        break;
                    case 'portfolio':
                        // Обновляем прогресс-бары после рендеринга
                        setTimeout(() => {
                            const progressBars = document.querySelectorAll('.progress-bar[data-progress]');
                            progressBars.forEach(bar => {
                                const progress = parseFloat(bar.getAttribute('data-progress')) || 0;
                                bar.style.width = progress + '%';
                            });
                        }, 100);
                        break;
                }
            },
            
            // Методы генерации контента для каждой страницы
            getDashboardContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">📊 Панель управления</h2>
                        <p class="page-subtitle">Обзор вашей активности в системе GENESIS 1.1</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Общий баланс</span>
                                <span class="stats-icon">💰</span>
                            </div>
                            <div class="stats-value">0.00</div>
                            <div class="stats-change">USDT</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Активные депозиты</span>
                                <span class="stats-icon">📈</span>
                            </div>
                            <div class="stats-value">0</div>
                            <div class="stats-change">штук</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Общий доход</span>
                                <span class="stats-icon">🚀</span>
                            </div>
                            <div class="stats-value">0.00</div>
                            <div class="stats-change">USDT</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Доход за сегодня</span>
                                <span class="stats-icon">📅</span>
                            </div>
                            <div class="stats-value">0.00</div>
                            <div class="stats-change">USDT</div>
                        </div>
                    </div>
                    
                    <div class="margin-bottom-large">
                        <h3 class="color-text-primary margin-bottom-medium">Быстрые действия</h3>
                        <div class="flex-gap flex-wrap">
                            <button class="btn btn-secondary" onclick="window.CabinetApp.showCreateDepositModal()">
                                💰 Создать депозит
                            </button>
                            <button class="btn btn-outline" onclick="window.CabinetApp.showPlatformAccessModal()">
                                🔑 Пополнить доступ
                            </button>
                            <button class="btn btn-outline" onclick="window.CabinetApp.navigateTo('analytics')">
                                📊 Аналитика
                            </button>
                            <button class="btn btn-outline" onclick="window.CabinetApp.navigateTo('settings')">
                                ⚙️ Настройки
                            </button>
                        </div>
                    </div>
                `;
            },
            
            getTransactionsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">📋 Транзакции</h2>
                        <p class="page-subtitle">История всех операций</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">📄</div>
                        <h3>Нет транзакций</h3>
                        <p>История транзакций пока пуста</p>
                    </div>
                `;
            },
            
            getAnalyticsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">📈 Аналитика</h2>
                        <p class="page-subtitle">Детальная статистика вашей активности</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">📊</div>
                        <h3>Недостаточно данных</h3>
                        <p>Создайте депозиты для отображения аналитики</p>
                    </div>
                `;
            },
            
            getBonusesContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🎁 Бонусы</h2>
                        <p class="page-subtitle">Дополнительные возможности заработка</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">🎁</div>
                        <h3>Бонусы будут доступны позже</h3>
                        <p>Следите за обновлениями</p>
                    </div>
                `;
            },
            
            getMultipliersContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">⚡ Множители</h2>
                        <p class="page-subtitle">Увеличьте доходность ваших депозитов</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">⚡</div>
                        <h3>Множители будут доступны позже</h3>
                        <p>Следите за обновлениями</p>
                    </div>
                `;
            },
            
            getMiningRentContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">💻 Аренда мощностей</h2>
                        <p class="page-subtitle">Сдавайте мощности вашего устройства в аренду</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">💻</div>
                        <h3>Майнинг будет доступен позже</h3>
                        <p>Следите за обновлениями</p>
                    </div>
                `;
            },
            
            getMyDeviceContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">📱 Мое устройство</h2>
                        <p class="page-subtitle">Информация о вашем устройстве и системе</p>
                    </div>
                    
                    <div id="device-info-container">
                        <div class="empty-state">
                            <div class="empty-icon">⏳</div>
                            <h3>Загрузка информации...</h3>
                            <p>Получение данных о вашем устройстве</p>
                        </div>
                    </div>
                `;
            },
            
            getPlexCoinContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🪙 PLEX Монета</h2>
                        <p class="page-subtitle">Внутренняя валюта платформы GENESIS</p>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Баланс PLEX</span>
                                <span class="stats-icon">🪙</span>
                            </div>
                            <div class="stats-value">0.00</div>
                            <div class="stats-change">PLEX</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Курс PLEX/USDT</span>
                                <span class="stats-icon">📊</span>
                            </div>
                            <div class="stats-value">0.10</div>
                            <div class="stats-change">USDT</div>
                        </div>
                    </div>
                `;
            },
            
            getSettingsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">⚙️ Настройки</h2>
                        <p class="page-subtitle">Управление вашим аккаунтом</p>
                    </div>
                    
                    <div style="background: var(--bg-secondary); padding: 2rem; border-radius: 12px; border: 1px solid var(--border-color);">
                        <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">Основные настройки</h3>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <label style="display: block; color: var(--text-secondary); margin-bottom: 0.5rem;">BSC Адрес:</label>
                            <div style="font-family: monospace; background: var(--bg-tertiary); padding: 1rem; border-radius: 6px; word-break: break-all;">
                                ${this.state.userAddress || 'Не указан'}
                            </div>
                        </div>
                        
                        <button class="btn btn-outline" onclick="window.logout()">
                            🚪 Выйти из аккаунта
                        </button>
                    </div>
                `;
            },
            
            getExperienceContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">📅 Стаж</h2>
                        <p class="page-subtitle">Ваш опыт работы с платформой</p>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-header">
                            <span class="stats-title">Дней на платформе</span>
                            <span class="stats-icon">📅</span>
                        </div>
                        <div class="stats-value">0</div>
                        <div class="stats-change">дней</div>
                    </div>
                `;
            },
            
            getRankContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🏅 Ранг</h2>
                        <p class="page-subtitle">Ваш статус в системе</p>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-header">
                            <span class="stats-title">Текущий ранг</span>
                            <span class="stats-icon">🏅</span>
                        </div>
                        <div class="stats-value" style="font-size: 1.5rem;">Новичок</div>
                        <div class="stats-change color-text-secondary">Начальный уровень</div>
                    </div>
                `;
            },
            
            getHowItWorksContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🛠️ Как все устроено</h2>
                        <p class="page-subtitle">Подробное руководство по работе с платформой GENESIS 1.1</p>
                    </div>
                    
                    <div class="margin-bottom-large">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">🌟 Добро пожаловать в GENESIS 1.1</h3>
                        <p style="color: var(--text-secondary); line-height: 1.6; margin-bottom: 1rem;">
                            GENESIS 1.1 - это современная DeFi платформа для управления цифровыми активами, построенная на блокчейне BSC (Binance Smart Chain). 
                            Наша платформа предоставляет возможность создавать депозиты и получать пассивный доход от инвестиций.
                        </p>
                    </div>
                    
                    <div class="info-banner">
                        <div class="info-icon">ℹ️</div>
                        <div class="info-content">
                            <h3>Основные принципы работы</h3>
                            <p>Платформа работает полностью децентрализованно, без серверной части. Все транзакции проходят через смарт-контракты в блокчейне BSC.</p>
                        </div>
                    </div>
                    
                    <h3 style="color: var(--primary-color); margin: 2rem 0 1rem;">📋 Пошаговая инструкция</h3>
                    
                    <div class="steps-container">
                        <div class="step-card">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <h4>🔑 Оплата доступа к платформе</h4>
                                <p>Первым делом необходимо оплатить доступ к платформе. Стоимость: $1 в день, минимальное пополнение $10 USDT.</p>
                            </div>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <h4>💰 Создание депозитов</h4>
                                <p>После оплаты доступа вы можете создавать депозиты. Доступно 13 планов от $25 до $2500. Депозиты создаются последовательно - от меньшего к большему.</p>
                            </div>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <h4>📈 Получение дохода</h4>
                                <p>Каждый депозит приносит ежедневный доход согласно выбранному плану. Доходность варьируется от 0.3% до 1.5% в день.</p>
                            </div>
                        </div>
                        
                        <div class="step-card">
                            <div class="step-number">4</div>
                            <div class="step-content">
                                <h4>💸 Вывод средств</h4>
                                <p>Заработанные средства можно вывести на ваш BSC кошелек в любое время. Минимальная сумма вывода: $10 USDT.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="warning-banner">
                        <div class="warning-icon">⚠️</div>
                        <div class="warning-content">
                            <h4>Важная информация</h4>
                            <ul>
                                <li>Все операции проводятся в криптовалюте USDT (сеть BSC)</li>
                                <li>Для планов 11-13 доступна оплата в PLEX токенах</li>
                                <li>Транзакции необратимы - внимательно проверяйте адреса</li>
                                <li>Сохраняйте приватные ключи от вашего кошелька</li>
                            </ul>
                        </div>
                    </div>
                    
                    <h3 style="color: var(--primary-color); margin: 2rem 0 1rem;">🏗️ Архитектура платформы</h3>
                    
                    <div class="architecture-info">
                        <div class="arch-card">
                            <div class="arch-icon">🔗</div>
                            <div class="arch-content">
                                <h4>Блокчейн BSC</h4>
                                <p>Все транзакции проходят через блокчейн Binance Smart Chain, обеспечивая прозрачность и безопасность.</p>
                            </div>
                        </div>
                        
                        <div class="arch-card">
                            <div class="arch-icon">📱</div>
                            <div class="arch-content">
                                <h4>PWA приложение</h4>
                                <p>Платформа работает как Progressive Web App - можно установить на любое устройство.</p>
                            </div>
                        </div>
                        
                        <div class="arch-card">
                            <div class="arch-icon">🔒</div>
                            <div class="arch-content">
                                <h4>Безопасность</h4>
                                <p>Отсутствие серверной части исключает возможность взлома централизованной базы данных.</p>
                            </div>
                        </div>
                    </div>
                    
                    <h3 style="color: var(--primary-color); margin: 2rem 0 1rem;">⚡ Система множителей</h3>
                    
                    <div class="multiplier-explanation">
                        <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                            Множители - это специальные бонусы, которые увеличивают доходность ваших депозитов. 
                            Они активируются за дополнительную плату и действуют ограниченное время.
                        </p>
                        
                        <div class="multiplier-card">
                            <div class="multiplier-icon">🚀</div>
                            <div class="multiplier-content">
                                <h4>Виды множителей</h4>
                                <ul style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary);">
                                    <li>x1.5 - увеличение дохода на 50%</li>
                                    <li>x2.0 - удвоение дохода</li>
                                    <li>x3.0 - утроение дохода</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="example-card">
                            <h4>💡 Пример расчета</h4>
                            <div class="calculation">
                                <div class="calc-step">
                                    <span class="calc-label">Базовый доход:</span>
                                    <span class="calc-value">$10/день</span>
                                </div>
                                <div class="calc-step">
                                    <span class="calc-label">Множитель x2:</span>
                                    <span class="calc-value">×2</span>
                                </div>
                                <div class="calc-divider"></div>
                                <div class="calc-step multiplier-example">
                                    <span class="calc-label">Итоговый доход:</span>
                                    <span class="calc-value">$20/день</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="success-banner">
                        <div class="success-icon">✅</div>
                        <div class="success-content">
                            <h4>Готовы начать?</h4>
                            <p>Теперь вы знаете как работает платформа. Начните с пополнения доступа и создания первого депозита!</p>
                        </div>
                    </div>
                    
                    <div class="action-buttons margin-bottom-large">
                        <button class="btn btn-secondary" onclick="window.CabinetApp.showPlatformAccessModal()">
                            🔑 Пополнить доступ
                        </button>
                        <button class="btn btn-outline" onclick="window.CabinetApp.showCreateDepositModal()">
                            💰 Создать депозит
                        </button>
                    </div>
                `;
            },
            
            // Вспомогательные методы
            showLoadingScreen: function() {
                document.getElementById('loading-screen').classList.remove('hidden');
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('cabinet-app').classList.add('hidden');
            },
            
            checkAuth: function() {
                const savedAddress = localStorage.getItem('genesis_user_address');
                if (savedAddress) {
                    this.state.userAddress = savedAddress;
                    this.state.isAuthenticated = true;
                    this.showCabinet();
                } else {
                    this.showAuthScreen();
                }
            },
            
            setupAuthHandler: function() {
                const authButton = document.getElementById('auth-button');
                const walletInput = document.getElementById('wallet-address');
                
                console.log('🔧 setupAuthHandler вызван');
                console.log('Auth button:', authButton);
                console.log('Wallet input:', walletInput);
                
                if (authButton) {
                    authButton.onclick = () => {
                        console.log('🖱️ Клик на кнопке авторизации');
                        this.handleAuth();
                    };
                    console.log('✅ Обработчик onclick установлен');
                }
                
                if (walletInput) {
                    walletInput.onkeypress = (e) => {
                        if (e.key === 'Enter') {
                            console.log('⌨️ Enter нажат в поле ввода');
                            this.handleAuth();
                        }
                    };
                    console.log('✅ Обработчик onkeypress установлен');
                }
            },
            
            updateDeviceInfo: function() {
                // Обновление информации об устройстве
                const browserElement = document.getElementById('device-browser');
                const platformElement = document.getElementById('device-platform');
                const languageElement = document.getElementById('device-language');
                const cookiesElement = document.getElementById('device-cookies');
                const onlineElement = document.getElementById('device-online');
                const javaElement = document.getElementById('device-java');
                const screenElement = document.getElementById('device-screen');
                const colorDepthElement = document.getElementById('device-color-depth');
                const pixelRatioElement = document.getElementById('device-pixel-ratio');
                const touchElement = document.getElementById('device-touch');
                
                if (browserElement) browserElement.textContent = navigator.userAgent.split(' ')[0];
                if (platformElement) platformElement.textContent = navigator.platform;
                if (languageElement) languageElement.textContent = navigator.language;
                if (cookiesElement) cookiesElement.textContent = navigator.cookieEnabled ? 'Включены' : 'Отключены';
                if (onlineElement) onlineElement.textContent = navigator.onLine ? 'Онлайн' : 'Офлайн';
                if (javaElement) javaElement.textContent = navigator.javaEnabled && navigator.javaEnabled() ? 'Включена' : 'Отключена';
                if (screenElement) screenElement.textContent = `${screen.width} x ${screen.height}`;
                if (colorDepthElement) colorDepthElement.textContent = `${screen.colorDepth} бит`;
                if (pixelRatioElement) pixelRatioElement.textContent = window.devicePixelRatio || '1';
                if (touchElement) touchElement.textContent = 'ontouchstart' in window ? 'Поддерживается' : 'Не поддерживается';
            },
            
            startSessionTimer: function() {
                const startTime = Date.now();
                
                setInterval(() => {
                    const elapsed = Date.now() - startTime;
                    const seconds = Math.floor(elapsed / 1000) % 60;
                    const minutes = Math.floor(elapsed / 60000) % 60;
                    const hours = Math.floor(elapsed / 3600000);
                    
                    const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    const element = document.getElementById('device-session-time');
                    if (element) element.textContent = timeString;
                }, 1000);
            }
        };
        
        // Запуск приложения
        window.CabinetApp.init();
    </script>
</body>
</html>ent();
                        break;
                    case 'mining-rent':
                        content = this.getMiningRentContent();
                        break;
                    case 'my-device':
                        content = this.getMyDeviceContent();
                        break;
                    case 'plex-coin':
                        content = this.getPlexCoinContent();
                        break;
                    case 'settings':
                        content = this.getSettingsContent();
                        break;
                    case 'experience':
                        content = this.getExperienceContent();
                        break;
                    case 'rank':
                        content = this.getRankContent();
                        break;
                    case 'how-it-works':
                        content = this.getHowItWorksContent();
                        break;
                    default:
                        content = '<div class="empty-state"><div class="empty-icon">🚧</div><h3>Страница в разработке</h3><p>Этот раздел скоро будет доступен</p></div>';
                }
                
                contentContainer.innerHTML = content;
                
                // Анимация появления
                contentContainer.style.opacity = '0';
                setTimeout(() => {
                    contentContainer.style.transition = 'opacity 0.3s ease';
                    contentContainer.style.opacity = '1';
                }, 10);
            },
            
            // Вспомогательные методы для проверки поддержки технологий
            checkWebGLSupport: function() {
                try {
                    const canvas = document.createElement('canvas');
                    return canvas.getContext('webgl') || canvas.getContext('experimental-webgl') ? '✅ Поддерживается' : '❌ Не поддерживается';
                } catch (e) {
                    return '❌ Не поддерживается';
                }
            },
            
            checkWebRTCSupport: function() {
                return (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ? '✅ Поддерживается' : '❌ Не поддерживается';
            },
            
            // Контент для портфеля
            // MCP-MARKER:CONTENT:PORTFOLIO - Контент портфеля
            getPortfolioContent: function() {
                const hasAccess = this.state.platformAccess && this.state.platformAccess.isActive;
                
                // Планы депозитов согласно ТЗ (13 планов)
                const depositPlans = [
                    { id: 1, name: 'STARTER', amount: 25, currency: 'USDT', percent: 0.3, days: 100, icon: '🌱' },
                    { id: 2, name: 'BASIC', amount: 50, currency: 'USDT', percent: 0.35, days: 90, icon: '🔰' },
                    { id: 3, name: 'STANDARD', amount: 100, currency: 'USDT', percent: 0.4, days: 80, icon: '📊' },
                    { id: 4, name: 'ADVANCED', amount: 250, currency: 'USDT', percent: 0.45, days: 70, icon: '📈' },
                    { id: 5, name: 'PROFESSIONAL', amount: 500, currency: 'USDT', percent: 0.5, days: 60, icon: '💼' },
                    { id: 6, name: 'EXPERT', amount: 750, currency: 'USDT', percent: 0.55, days: 55, icon: '🎯' },
                    { id: 7, name: 'MASTER', amount: 1000, currency: 'USDT', percent: 0.6, days: 50, icon: '👑' },
                    { id: 8, name: 'PREMIUM', amount: 1250, currency: 'USDT', percent: 0.65, days: 45, icon: '💎' },
                    { id: 9, name: 'GOLD', amount: 1500, currency: 'USDT', percent: 0.7, days: 40, icon: '🏆' },
                    { id: 10, name: 'PLATINUM', amount: 1750, currency: 'USDT', percent: 0.75, days: 35, icon: '🔥' },
                    { id: 11, name: 'DIAMOND', amount: 2000, currency: 'PLEX/USDT', percent: 0.8, days: 30, icon: '💠' },
                    { id: 12, name: 'ELITE', amount: 2250, currency: 'PLEX/USDT', percent: 0.85, days: 25, icon: '⭐' },
                    { id: 13, name: 'ULTIMATE', amount: 2500, currency: 'PLEX/USDT', percent: 0.9, days: 20, icon: '🚀' }
                ];
                
                // Получаем статус депозитов пользователя (пока моковые данные)
                const userDeposits = this.state.deposits || [];
                const activeDeposits = userDeposits.filter(d => d.status === 'active');
                const completedDeposits = userDeposits.filter(d => d.status === 'completed');
                
                // Проверяем, какой план доступен для покупки (строго по порядку)
                const lastPurchasedPlanId = userDeposits.length > 0 ? 
                    Math.max(...userDeposits.map(d => d.planId)) : 0;
                const nextAvailablePlanId = lastPurchasedPlanId + 1;
                
                // Расчет статистики портфеля
                const totalInvested = userDeposits.reduce((sum, d) => sum + d.amount, 0);
                const totalEarned = userDeposits.reduce((sum, d) => {
                    if (d.status === 'completed') {
                        return sum + (d.amount * d.percent / 100 * d.days);
                    } else if (d.status === 'active') {
                        const daysPassed = Math.floor((Date.now() - d.startDate) / (1000 * 60 * 60 * 24));
                        return sum + (d.amount * d.percent / 100 * Math.min(daysPassed, d.days));
                    }
                    return sum;
                }, 0);
                const dailyIncome = activeDeposits.reduce((sum, d) => sum + (d.amount * d.percent / 100), 0);
                
                return `
                    <div class="page-header">
                        <h2 class="page-title">💼 Инвестиционный портфель</h2>
                        <p class="page-subtitle">Управление депозитами и отслеживание доходности</p>
                    </div>
                    
                    <!-- Статистика портфеля -->
                    <div class="stats-grid stats-mb-2">
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Инвестировано</span>
                                <span class="stats-icon">💰</span>
                            </div>
                            <div class="stats-value">${totalInvested.toFixed(2)}</div>
                            <div class="stats-change">всего вложено</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Заработано</span>
                                <span class="stats-icon">💵</span>
                            </div>
                            <div class="stats-value">${totalEarned.toFixed(2)}</div>
                            <div class="stats-change positive">общая прибыль</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Активные</span>
                                <span class="stats-icon">📈</span>
                            </div>
                            <div class="stats-value">${activeDeposits.length}</div>
                            <div class="stats-change">депозитов</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Доход в день</span>
                                <span class="stats-icon">⏰</span>
                            </div>
                            <div class="stats-value">${dailyIncome.toFixed(2)}</div>
                            <div class="stats-change positive">ежедневно</div>
                        </div>
                    </div>
                    
                    <!-- Кнопки быстрых действий -->
                    <div class="quick-actions">
                        <button class="btn btn-secondary" onclick="window.CabinetApp.showCreateDepositModal()" ${!hasAccess || nextAvailablePlanId > 13 ? 'disabled' : ''}>
                            💰 Создать новый депозит
                        </button>
                        <button class="btn btn-outline" onclick="window.CabinetApp.showDepositCalculator()">
                            🧮 Калькулятор доходности
                        </button>
                        <button class="btn btn-outline" onclick="window.CabinetApp.exportPortfolioReport()">
                            📊 Экспорт отчета
                        </button>
                    </div>
                    
                    <!-- Активные депозиты -->
                    ${activeDeposits.length > 0 ? `
                        <div class="active-deposits">
                            <h3 class="active-deposits-title">🟢 Активные депозиты</h3>
                            <div class="active-deposits-grid">
                                ${activeDeposits.map(deposit => {
                                    const plan = depositPlans.find(p => p.id === deposit.planId);
                                    const daysPassed = Math.floor((Date.now() - deposit.startDate) / (1000 * 60 * 60 * 24));
                                    const progress = (daysPassed / plan.days) * 100;
                                    const earned = deposit.amount * plan.percent / 100 * daysPassed;
                                    
                                    return `
                                        <div class="deposit-card">
                                            <div class="deposit-header">
                                                <h4 class="deposit-title">
                                                    <span class="font-size-1-5">${plan.icon}</span>
                                                    <span class="text-primary">${plan.name}</span>
                                                </h4>
                                                <span class="deposit-status-active">Активен</span>
                                            </div>
                                            
                                            <div class="deposit-stats">
                                                <div>
                                                    <div class="text-secondary font-size-0-9">Инвестировано</div>
                                                    <div class="font-size-1-2 font-weight-600">${deposit.amount}</div>
                                                </div>
                                                <div>
                                                    <div class="text-secondary font-size-0-9">Заработано</div>
                                                    <div class="font-size-1-2 font-weight-600 text-success">${earned.toFixed(2)}</div>
                                                </div>
                                            </div>
                                            
                                            <div class="deposit-progress">
                                                <div class="deposit-progress-header">
                                                    <span class="text-secondary font-size-0-9">Прогресс</span>
                                                    <span class="text-primary font-size-0-9">${daysPassed}/${plan.days} дней</span>
                                                </div>
                                                <div class="deposit-progress-bar">
                                                    <div class="progress-bar" data-progress="${Math.min(progress, 100)}"></div>
                                                </div>
                                            </div>
                                            
                                            <div class="deposit-actions">
                                                <button class="btn-secondary flex-1 font-size-0-9 p-0-5" onclick="window.CabinetApp.showDepositDetails('${deposit.id}')">
                                                    📊 Детали
                                                </button>
                                                <button class="btn-outline flex-1 font-size-0-9 p-0-5" onclick="window.CabinetApp.reinvestDeposit('${deposit.id}')">
                                                    🔄 Реинвестировать
                                                </button>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    <!-- Доступные планы депозитов -->
                    <div>
                        <h3 class="plans-title">💎 Планы депозитов</h3>
                        ${!hasAccess ? `
                            <div class="notification warning notification-warning-static">
                                <div class="notification-icon">⚠️</div>
                                <div class="notification-content">
                                    <h4>Требуется доступ к платформе</h4>
                                    <p>Для создания депозитов необходимо пополнить доступ</p>
                                </div>
                                <button class="btn btn-warning" onclick="window.CabinetApp.showPlatformAccessModal()">
                                    Пополнить доступ
                                </button>
                            </div>
                        ` : ''}
                        
                        <div class="plans-grid">
                            ${depositPlans.map(plan => {
                                const isPurchased = userDeposits.some(d => d.planId === plan.id);
                                const isAvailable = plan.id === nextAvailablePlanId && hasAccess;
                                const isLocked = plan.id > nextAvailablePlanId || !hasAccess;
                                
                                return `
                                    <div class="plan-card ${isLocked ? 'plan-card-locked' : (isAvailable ? 'plan-card-available' : '')}" 
                                         style="border: 2px solid ${isPurchased ? 'var(--success-color)' : (isAvailable ? 'var(--primary-color)' : 'var(--border-color)')}"
                                         ${!isLocked ? `onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 25px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='';this.style.boxShadow=''"` : ''}>
                                        ${isLocked ? `
                                            <div class="overlay">
                                                <span class="font-size-2">🔒</span>
                                            </div>
                                        ` : ''}
                                        
                                        <div class="deposit-header">
                                            <h4 class="deposit-title">
                                                <span class="font-size-1-5">${plan.icon}</span>
                                                <span class="text-primary">${plan.name}</span>
                                            </h4>
                                            ${isPurchased ? `
                                                <span class="deposit-status-purchased">✓ Куплен</span>
                                            ` : isAvailable ? `
                                                <span class="deposit-status-available">Доступен</span>
                                            ` : ''}
                                        </div>
                                        
                                        <div class="plan-details">
                                            <div class="plan-detail-row">
                                                <span class="text-secondary">Сумма:</span>
                                                <span style="color: var(--primary-color);" class="font-weight-600">${plan.amount}</span>
                                            </div>
                                            <div class="plan-detail-row">
                                                <span class="text-secondary">Доход в день:</span>
                                                <span class="text-success font-weight-600">${plan.percent}%</span>
                                            </div>
                                            <div class="plan-detail-row">
                                                <span class="text-secondary">Срок:</span>
                                                <span class="text-primary font-weight-600">${plan.days} дней</span>
                                            </div>
                                            <div class="flex flex-space-between">
                                                <span class="text-secondary">Валюта:</span>
                                                <span style="color: var(--secondary-color);" class="font-weight-600">${plan.currency}</span>
                                            </div>
                                        </div>
                                        
                                        <div class="plan-total-profit">
                                            <div class="plan-total-profit-content">
                                                <span class="text-secondary font-size-0-9">Общий доход:</span>
                                                <span style="color: var(--gold-color); font-weight: 700; font-size: 1.1rem;">${(plan.amount * plan.percent / 100 * plan.days).toFixed(2)}</span>
                                            </div>
                                        </div>
                                        
                                        ${isAvailable ? `
                                            <button class="btn w-100" onclick="window.CabinetApp.createDeposit(${plan.id})">
                                                💰 Создать депозит
                                            </button>
                                        ` : isPurchased ? `
                                            <button class="btn-secondary w-100" onclick="window.CabinetApp.viewDepositHistory(${plan.id})">
                                                📊 История
                                            </button>
                                        ` : `
                                            <button class="btn w-100" disabled>
                                                🔒 Недоступен
                                            </button>
                                        `}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                    
                    <!-- Информационный блок -->
                    <div class="info-block">
                        <h4 class="info-title">💡 Важная информация</h4>
                        <ul class="info-list">
                            <li class="info-list-item">✅ Покупка планов доступна только по порядку (от STARTER к ULTIMATE)</li>
                            <li class="info-list-item">✅ Планы 1-10 оплачиваются только в USDT</li>
                            <li class="info-list-item">✅ Планы 11-13 можно оплатить в PLEX или USDT</li>
                            <li class="info-list-item">✅ Все транзакции проверяются через BSCScan</li>
                            <li class="info-list-item">✅ Выплаты производятся ежедневно на ваш кошелек</li>
                        </ul>
                    </div>
                `;
            },
            
            // Контент для транзакций
            // MCP-MARKER:CONTENT:TRANSACTIONS - Контент транзакций
            // MCP-MARKER:METHOD:CABINET:GET_TRANSACTIONS_CONTENT - Генерация контента транзакций
            // MCP-MARKER:METHOD:CABINET:TRANSACTIONS_CONTENT - Генерация контента транзакций
            getTransactionsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">Транзакции</h2>
                        <p class="page-subtitle">История всех операций</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">📋</div>
                        <h3>Нет транзакций</h3>
                        <p>Здесь будет отображаться история ваших операций</p>
                    </div>
                `;
            },
            
            // Контент для аналитики
            // MCP-MARKER:CONTENT:ANALYTICS - Контент аналитики
            // MCP-MARKER:METHOD:CABINET:GET_ANALYTICS_CONTENT - Генерация контента аналитики
            // MCP-MARKER:METHOD:CABINET:ANALYTICS_CONTENT - Генерация контента аналитики
            getAnalyticsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">Аналитика</h2>
                        <p class="page-subtitle">Детальная статистика и графики</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">📈</div>
                        <h3>Недостаточно данных</h3>
                        <p>Создайте депозиты для отображения аналитики</p>
                    </div>
                `;
            },
            
            // Контент для бонусов
            // MCP-MARKER:CONTENT:BONUSES - Контент бонусов
            // MCP-MARKER:METHOD:CABINET:GET_BONUSES_CONTENT - Генерация контента бонусов
            // MCP-MARKER:METHOD:CABINET:BONUSES_CONTENT - Генерация контента бонусов
            getBonusesContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🎁 Бонусная программа GENESIS</h2>
                        <p class="page-subtitle">Получайте дополнительные награды и множители доходности</p>
                    </div>
                    
                    <!-- Общая статистика бонусов -->
                    <div class="stats-grid stats-mb-2">
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Баланс USDT</span>
                                <span class="stats-icon">💵</span>
                            </div>
                            <div class="stats-value">0.00</div>
                            <div class="stats-change">USDT</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Баланс PLEX</span>
                                <span class="stats-icon">🪙</span>
                            </div>
                            <div class="stats-value">0</div>
                            <div class="stats-change">PLEX</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Монеты стажа</span>
                                <span class="stats-icon">📅</span>
                            </div>
                            <div class="stats-value">0</div>
                            <div class="stats-change">стажа</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Монеты ранга</span>
                                <span class="stats-icon">🏅</span>
                            </div>
                            <div class="stats-value">0</div>
                            <div class="stats-change">ранга</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Активные депозиты</span>
                                <span class="stats-icon">📊</span>
                            </div>
                            <div class="stats-value">0</div>
                            <div class="stats-change">штук</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Активные множители</span>
                                <span class="stats-icon">⚡</span>
                            </div>
                            <div class="stats-value">0</div>
                            <div class="stats-change">работают сейчас</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Бонусный доход</span>
                                <span class="stats-icon">💰</span>
                            </div>
                            <div class="stats-value">$0.00</div>
                            <div class="stats-change">всего получено</div>
                        </div>
                        
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Достижения</span>
                                <span class="stats-icon">🏆</span>
                            </div>
                            <div class="stats-value">0/25</div>
                            <div class="stats-change">разблокировано</div>
                        </div>
                    </div>
                    
                    <!-- Категории бонусов -->
                    <div class="bonus-section">
                        
                        <!-- 1. Бонусы за привлечение партнеров -->
                        <div class="bonus-card">
                            <h3 class="bonus-title">
                                <span class="bonus-icon">👥</span>
                                Бонусы за привлечение партнеров
                            </h3>
                            
                            <div class="bonus-grid">
                                <!-- Бонус за 3 партнеров -->
                                <div class="bonus-item"
                                     onmouseover="this.style.borderColor='var(--primary-color)';this.style.transform='translateY(-2px)'"
                                     onmouseout="this.style.borderColor='var(--border-color)';this.style.transform=''">
                                    <div class="bonus-item-header">
                                        <div>
                                            <h4 class="bonus-item-title">Начинающий наставник</h4>
                                            <p class="bonus-item-desc">Пригласите 3 партнеров</p>
                                        </div>
                                        <span class="bonus-icon">🥉</span>
                                    </div>
                                    <div class="bonus-reward">
                                        <div class="bonus-reward-content">
                                            <span class="text-secondary">Награда:</span>
                                            <span class="golden-reward">290 монет</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-space-between flex-center">
                                        <span class="text-secondary font-size-0-9">Прогресс: 0/3</span>
                                        <button class="btn-outline p-0-5 font-size-0-9" disabled>🔒 Недоступно</button>
                                    </div>
                                </div>
                                
                                <!-- Бонус за 7 партнеров -->
                                <div class="bonus-item"
                                     onmouseover="this.style.borderColor='var(--primary-color)';this.style.transform='translateY(-2px)'"
                                     onmouseout="this.style.borderColor='var(--border-color)';this.style.transform=''">
                                    <div class="bonus-item-header">
                                        <div>
                                            <h4 class="bonus-item-title">Опытный наставник</h4>
                                            <p class="bonus-item-desc">Пригласите 7 партнеров</p>
                                        </div>
                                        <span class="bonus-icon">🥈</span>
                                    </div>
                                    <div class="bonus-reward">
                                        <div class="bonus-reward-content">
                                            <span class="text-secondary">Награда:</span>
                                            <span class="golden-reward">777 монет</span>
                                        </div>
                                    </div>
                                    <div class="flex flex-space-between flex-center">
                                        <span class="text-secondary font-size-0-9">Прогресс: 0/7</span>
                                        <button class="btn-outline p-0-5 font-size-0-9" disabled>🔒 Недоступно</button>
                                    </div>
                                </div>
                                
                                <!-- Бонус за 15 партнеров -->
                                <div class="bonus-item"
                                     onmouseover="this.style.borderColor='var(--primary-color)';this.style.transform='translateY(-2px)'"
                                     onmouseout="this.style.borderColor='var(--border-color)';this.style.transform=''">
                                    <div class="bonus-item-header">
                                        <div>
                                            <h4 class="bonus-item-title">Мастер рекрутinга</h4>
                                            <p class="bonus-item-desc">Пригласите 15 партнеров</p>
                                        </div>
                                        <span class="bonus-icon">🥇</span>
                                    </div>
                                    <div class="bonus-reward">
                                        <div class="flex flex-column flex-gap-0-5">
                                            <div class="bonus-reward-content">
                                                <span class="text-secondary">Множитель:</span>
                                                <span class="text-success font-weight-600">x0.88 на 12 часов</span>
                                            </div>
                                            <div class="text-secondary font-size-0-9">Однократный срочный множитель доходности</div>
                                        </div>
                                    </div>
                                    <div class="flex flex-space-between flex-center">
                                        <span class="text-secondary font-size-0-9">Прогресс: 0/15</span>
                                        <button class="btn-outline p-0-5 font-size-0-9" disabled>🔒 Недоступно</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 2. Бонусы за покупку депозитов -->
                        <div class="bonus-card">
                            <h3 class="bonus-title">
                                <span class="bonus-icon">💰</span>
                                Бонусы за покупку депозитов
                            </h3>
                            
                            <div class="bonus-grid">
                                <!-- Первый депозит -->
                                <div class="bonus-item-simple">
                                    <h4 class="bonus-item-title">🎯 Первый шаг</h4>
                                    <p class="bonus-item-desc mb-1">За первый депозит (не тестовый)</p>
                                    <div class="bonus-reward-simple">
                                        <div class="bonus-reward-content">
                                            <span class="text-secondary">Награда:</span>
                                            <span class="text-success font-weight-600">Множитель x0.71</span>
                                        </div>
                                        <div class="bonus-description">Однократный множитель доходности на 33 часа</div>
                                    </div>
                                </div>
                                
                                <!-- 3 депозита -->
                                <div class="bonus-item-simple">
                                    <h4 class="bonus-item-title">🔥 Активный инвестор</h4>
                                    <p class="bonus-item-desc mb-1">За покупку 3 депозитов</p>
                                    <div class="bonus-reward-simple">
                                        <div class="bonus-reward-content">
                                            <span class="text-secondary">Награда:</span>
                                            <span class="text-success font-weight-600">Множитель x1.21</span>
                                        </div>
                                        <div class="bonus-description">Однократный множитель доходности на 9 часов</div>
                                    </div>
                                </div>
                                
                                <!-- 5 депозитов -->
                                <div class="bonus-item-simple">
                                    <h4 class="bonus-item-title">💎 Серьезный игрок</h4>
                                    <p class="bonus-item-desc mb-1">За покупку 5 депозитов</p>
                                    <div class="bonus-reward-simple">
                                        <div class="bonus-reward-content">
                                            <span class="text-secondary">Награда:</span>
                                            <span class="text-success font-weight-600">Множитель x2.31</span>
                                        </div>
                                        <div class="bonus-description">Однократный множитель доходности на 10 часов</div>
                                    </div>
                                </div>
                                
                                <!-- 7 депозитов -->
                                <div class="bonus-item-simple">
                                    <h4 class="bonus-item-title">⚡ Профессионал</h4>
                                    <p class="bonus-item-desc mb-1">За покупку 7 депозитов</p>
                                    <div class="bonus-reward-simple">
                                        <div class="text-secondary font-size-0-85 mb-0-5">Награды:</div>
                                        <div class="flex flex-center flex-gap-0-5 mb-0-3">
                                            <span class="text-success">•</span>
                                            <span class="text-success font-weight-600">Два множителя x0.31</span>
                                            <span class="text-secondary font-size-0-8">на 54 часа</span>
                                        </div>
                                        <div class="flex flex-center flex-gap-0-5">
                                            <span style="color: var(--primary-color);">•</span>
                                            <span style="color: var(--primary-color); font-weight: 600;">Множитель x4.12</span>
                                            <span class="text-secondary font-size-0-8">на 5 часов</span>
                                        </div>
                                        <div class="text-secondary font-size-0-8 mt-0-5" style="font-style: italic;">Однократные множители доходности</div>
                                    </div>
                                </div>
                                
                                <!-- Все депозиты -->
                                <div class="bonus-item-special grid-col-span-2"
                                     onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 8px 25px rgba(255,107,53,0.3)'"
                                     onmouseout="this.style.transform='';this.style.boxShadow=''">
                                    <h4 class="bonus-special-title">
                                        <span>👑</span> Легенда GENESIS
                                    </h4>
                                    <p class="bonus-item-desc mb-1">За покупку всех 13 депозитов</p>
                                    <div class="grid grid-auto-fit-150 gap-1">
                                        <div class="stat-card">
                                            <div class="stat-value" style="color: var(--gold-color);">50,000</div>
                                            <div class="stat-label">монет</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-value" style="color: var(--success-color);">x7.17</div>
                                            <div class="stat-label">множитель</div>
                                            <div class="stat-sublabel">на 29 часов</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-value" style="color: var(--secondary-color);">50,000</div>
                                            <div class="stat-label">стажа</div>
                                        </div>
                                        <div class="stat-card">
                                            <div class="stat-value" style="color: var(--accent-color);">120</div>
                                            <div class="stat-label">монет ранга</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 3. Бонусы за участие в экосистеме -->
                        <div class="bonus-card">
                            <h3 class="bonus-title">
                                <span class="bonus-icon">🌐</span>
                                Бонусы за участие в инструментах экосистемы
                            </h3>
                            
                            <div class="bonus-item-simple">
                                <p class="text-secondary mb-1">Получайте множитель доходности за каждый используемый инструмент экосистемы GENESIS</p>
                                <div class="flex flex-center gap-1">
                                    <div class="ecosystem-card">
                                        <div class="ecosystem-value">x0.077</div>
                                        <div class="ecosystem-desc">множитель доходности</div>
                                        <div class="ecosystem-subdesc">на 37 часов</div>
                                    </div>
                                    <div class="text-secondary">
                                        <div class="font-weight-500">За каждый инструмент:</div>
                                        <div class="font-size-0-85">• Однократный множитель</div>
                                        <div class="font-size-0-85">• Применяется автоматически</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 4. Бонусы за активность в чате -->
                        <div class="bonus-card">
                            <h3 class="bonus-title">
                                <span class="bonus-icon">💬</span>
                                Бонусы за активность в чате
                            </h3>
                            
                            <div class="bonus-item-simple">
                                <h4 class="bonus-item-title">🏆 Бонус за лояльность</h4>
                                <p class="bonus-item-desc mb-1">За активное участие в жизни сообщества</p>
                                <div class="bg-secondary p-1 border-radius-8 display-inline-block">
                                    <span class="text-success font-weight-700 font-size-1-3">$237</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 5-7. Бонусы в разработке -->
                        <div class="bonus-grid mb-2">
                            <div class="bonus-card opacity-70">
                                <h4 class="bonus-item-title mb-0-5 flex flex-center flex-gap-0-5">
                                    <span>🧪</span> Бонусы за тестирования
                                </h4>
                                <p class="bonus-item-desc">За участие в тестированиях продуктов экосистемы</p>
                                <div class="bg-primary p-0-5 border-radius-8 mt-1 text-center">
                                    <span style="color: var(--warning-color);">🚧 В разработке</span>
                                </div>
                            </div>
                            
                            <div class="bonus-card opacity-70">
                                <h4 class="bonus-item-title mb-0-5 flex flex-center flex-gap-0-5">
                                    <span>📅</span> Бонусы за стаж
                                </h4>
                                <p class="bonus-item-desc">Награды за длительное участие в проекте</p>
                                <div class="bg-primary p-0-5 border-radius-8 mt-1 text-center">
                                    <span style="color: var(--warning-color);">🚧 В разработке</span>
                                </div>
                            </div>
                            
                            <div class="bonus-card opacity-70">
                                <h4 class="bonus-item-title mb-0-5 flex flex-center flex-gap-0-5">
                                    <span>🏅</span> Бонусы за ранг
                                </h4>
                                <p class="bonus-item-desc">Эксклюзивные награды за достижение рангов</p>
                                <div class="bg-primary p-0-5 border-radius-8 mt-1 text-center">
                                    <span style="color: var(--warning-color);">🚧 В разработке</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Специальный бонус 1000 -->
                        <div class="golden-bonus">
                            <h3 class="golden-title">
                                <span class="font-size-2">🌟</span>
                                БОНУСНАЯ 1000
                            </h3>
                            
                            <p class="golden-description">
                                За привлечение партнеров и участие в GENESIS более 400 дней
                            </p>
                            
                            <div class="golden-grid">
                                <div class="golden-card golden-card-special">
                                    <div class="golden-value" style="color: var(--gold-color);">$1000</div>
                                    <div class="text-secondary">Денежный бонус</div>
                                </div>
                                
                                <div class="golden-card">
                                    <div class="golden-value-medium" style="color: var(--success-color);">x3.21</div>
                                    <div class="text-secondary font-size-0-85">множитель доходности</div>
                                    <div class="text-secondary font-size-0-8">на 7 часов</div>
                                </div>
                                
                                <div class="golden-card">
                                    <div class="golden-value-medium" style="color: var(--secondary-color);">x0.21</div>
                                    <div class="text-secondary font-size-0-85">множитель доходности</div>
                                    <div class="text-secondary font-size-0-8">на 100 часов</div>
                                </div>
                                
                                <div class="golden-card">
                                    <div class="golden-value-large" style="color: var(--accent-color);">MEV Валькирия</div>
                                    <div class="text-secondary font-size-0-85">Торговая поддержка</div>
                                    <div class="text-secondary font-size-0-8">$500 на 72 часа</div>
                                </div>
                                
                                <div class="golden-card">
                                    <div class="golden-value-large" style="color: var(--primary-color);">Гарантированный доступ</div>
                                    <div class="text-secondary font-size-0-85">MEV бот Валькирия</div>
                                    <div class="text-secondary font-size-0-8">до $500 на 100 часов</div>
                                </div>
                            </div>
                            
                            <div class="golden-conditions">
                                <p class="text-secondary font-size-0-9" style="margin: 0;">
                                    <strong style="color: var(--warning-color);">Условия:</strong> Привлечение активных партнеров + непрерывное участие в проекте более 400 дней
                                </p>
                            </div>
                        </div>
                        
                    </div>
                    
                    <!-- Информационный блок -->
                    <div class="info-block">
                        <h4 class="info-title">💡 Как работают бонусы</h4>
                        <ul class="bonus-list">
                            <li class="bonus-list-item">
                                <span class="bonus-check">✓</span>
                                <span>Множители доходности применяются автоматически ко всем активным депозитам</span>
                            </li>
                            <li class="bonus-list-item">
                                <span class="bonus-check">✓</span>
                                <span>Монеты GENESIS можно обменять на дополнительные бонусы в магазине</span>
                            </li>
                            <li class="bonus-list-item">
                                <span class="bonus-check">✓</span>
                                <span>Однократные множители активируются сразу после получения</span>
                            </li>
                            <li class="bonus-list-item">
                                <span class="bonus-check">✓</span>
                                <span>Несколько множителей могут работать одновременно</span>
                            </li>
                            <li class="bonus-list-item">
                                <span class="bonus-check">✓</span>
                                <span>Прогресс по всем достижениям сохраняется автоматически</span>
                            </li>
                        </ul>
                    </div>
                `;
            },
            
            // Контент для подарков
            // MCP-MARKER:CONTENT:GIFTS - Контент подарков
            // MCP-MARKER:METHOD:CABINET:GET_GIFTS_CONTENT - Генерация контента подарков
            // MCP-MARKER:METHOD:CABINET:GIFTS_CONTENT - Генерация контента подарков
            getGiftsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🎈 Подарки</h2>
                        <p class="page-subtitle">Здесь будут отображаться ваши подарки и специальные предложения</p>
                    </div>
                    <div class="empty-state">
                        <div class="empty-icon">🎈</div>
                        <h3>Подарков пока нет</h3>
                        <p>Следите за обновлениями и акциями!</p>
                    </div>
                `;
            },
            
            // Контент для рефералов
            // MCP-MARKER:CONTENT:REFERRALS - Контент рефералов
            // MCP-MARKER:METHOD:CABINET:GET_REFERRALS_CONTENT - Генерация контента рефералов
            // MCP-MARKER:METHOD:CABINET:REFERRALS_CONTENT - Генерация контента рефералов
            getReferralsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">👥 Рефералы</h2>
                        <p class="page-subtitle">Партнерская программа</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">👥</div>
                        <h3>Реферальная программа</h3>
                        <p>Приглашайте друзей и получайте бонусы</p>
                    </div>
                `;
            },
            
            // Контент для множителей
            // MCP-MARKER:CONTENT:MULTIPLIERS - Контент множителей
            // MCP-MARKER:METHOD:CABINET:GET_MULTIPLIERS_CONTENT - Генерация контента множителей
            // MCP-MARKER:METHOD:CABINET:MULTIPLIERS_CONTENT - Генерация контента множителей
            getMultipliersContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">⚡ Множители</h2>
                        <p class="page-subtitle">Активируйте бонусные множители для увеличения доходности</p>
                    </div>

                    <div class="multiplier-grid">
                        <div>
                            <div class="stats-card mb-2">
                                <h3 class="bonus-title">
                                    <span>⚡</span> Активные множители
                                </h3>
                                
                                <div class="grid grid-auto-fit-200 gap-1 mb-2">
                                    <div class="multiplier-card multiplier-card-active">
                                        <div class="multiplier-icon">🔥</div>
                                        <h5 class="multiplier-title">Огненный</h5>
                                        <div class="multiplier-value" style="color: var(--success-color);">x2.5</div>
                                        <div class="multiplier-time">Осталось: 4ч 23м</div>
                                        <div class="multiplier-progress">
                                            <div class="multiplier-progress-bar" style="background: var(--success-color); width: 72%;"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="multiplier-card multiplier-card-secondary">
                                        <div class="multiplier-icon">💎</div>
                                        <h5 class="multiplier-title">Алмазный</h5>
                                        <div class="multiplier-value" style="color: var(--secondary-color);">x1.8</div>
                                        <div class="multiplier-time">Осталось: 12ч 45м</div>
                                        <div class="multiplier-progress">
                                            <div class="multiplier-progress-bar" style="background: var(--secondary-color); width: 53%;"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="multiplier-card multiplier-card-warning">
                                        <div class="multiplier-icon">⭐</div>
                                        <h5 class="multiplier-title">Звездный</h5>
                                        <div class="multiplier-value" style="color: var(--warning-color);">x3.2</div>
                                        <div class="multiplier-time">Осталось: 23ч 17м</div>
                                        <div class="multiplier-progress">
                                            <div class="multiplier-progress-bar" style="background: var(--warning-color); width: 97%;"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-primary p-1-5 border-radius-12 mb-2">
                                    <h4 class="bonus-item-title mb-1">📊 Эффект множителей</h4>
                                    
                                    <div class="effect-grid">
                                        <div class="effect-item">
                                            <div class="effect-label">Базовая доходность</div>
                                            <div class="effect-value text-primary">$45.20/день</div>
                                        </div>
                                        <div class="effect-item">
                                            <div class="effect-label">С множителями</div>
                                            <div class="effect-value text-success">$247.83/день</div>
                                        </div>
                                        <div class="effect-item">
                                            <div class="effect-label">Суммарный множитель</div>
                                            <div class="effect-value" style="color: var(--primary-color);">x5.48</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <h4 class="bonus-item-title mb-1">🛒 Доступные множители</h4>
                                
                                <div class="available-grid">
                                    <div class="multiplier-shop-card">
                                        <div class="multiplier-header">
                                            <div class="multiplier-name">
                                                <span class="font-size-1-5">🚀</span>
                                                <h5 class="bonus-item-title">Турбо x2.0</h5>
                                            </div>
                                            <span class="multiplier-badge" style="background: var(--success-color);">6 часов</span>
                                        </div>
                                        <p class="multiplier-description">Удваивает доходность от всех источников на 6 часов</p>
                                        <div class="multiplier-price">
                                            <span class="multiplier-cost">Стоимость: $25</span>
                                            <span class="multiplier-alt">или 500 PLEX</span>
                                        </div>
                                        <button class="btn w-100" onclick="window.CabinetApp.activateMultiplier('turbo')">
                                            🚀 Активировать
                                        </button>
                                    </div>
                                    
                                    <div class="multiplier-shop-card">
                                        <div class="multiplier-header">
                                            <div class="multiplier-name">
                                                <span class="font-size-1-5">⚡</span>
                                                <h5 class="bonus-item-title">Молния x4.0</h5>
                                            </div>
                                            <span class="multiplier-badge" style="background: var(--primary-color); color: white;">3 часа</span>
                                        </div>
                                        <p class="multiplier-description">Увеличивает доходность в 4 раза на 3 часа</p>
                                        <div class="multiplier-price">
                                            <span class="multiplier-cost">Стоимость: $45</span>
                                            <span class="multiplier-alt">или 900 PLEX</span>
                                        </div>
                                        <button class="btn w-100" onclick="window.CabinetApp.activateMultiplier('lightning')">
                                            ⚡ Активировать
                                        </button>
                                    </div>
                                    
                                    <div class="multiplier-shop-card" style="border-color: var(--warning-color);">
                                        <div class="multiplier-header">
                                            <div class="multiplier-name">
                                                <span class="font-size-1-5">🌟</span>
                                                <h5 class="bonus-item-title">Супер x7.5</h5>
                                            </div>
                                            <span class="multiplier-badge" style="background: var(--warning-color);">1 час</span>
                                        </div>
                                        <p class="multiplier-description">Максимальный множитель - увеличение в 7.5 раз на час</p>
                                        <div class="multiplier-price">
                                            <span class="multiplier-cost">Стоимость: $85</span>
                                            <span class="multiplier-alt">или 1700 PLEX</span>
                                        </div>
                                        <button class="btn w-100" onclick="window.CabinetApp.activateMultiplier('super')">
                                            🌟 Активировать
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <div class="stats-card mb-1-5">
                                <h3 class="bonus-title" style="color: var(--secondary-color);">
                                    <span>📊</span> Статистика
                                </h3>
                                
                                <div class="mb-1">
                                    <div class="flex flex-space-between mb-0-5">
                                        <span class="text-secondary">Активировано сегодня:</span>
                                        <span class="font-weight-600" style="color: var(--success-color);">3</span>
                                    </div>
                                    <div class="flex flex-space-between mb-0-5">
                                        <span class="text-secondary">Всего за месяц:</span>
                                        <span class="text-primary font-weight-600">47</span>
                                    </div>
                                    <div class="flex flex-space-between mb-0-5">
                                        <span class="text-secondary">Дополнительно заработано:</span>
                                        <span class="font-weight-600" style="color: var(--primary-color);">$2,847</span>
                                    </div>
                                    <div class="flex flex-space-between">
                                        <span class="text-secondary">Потрачено PLEX:</span>
                                        <span class="font-weight-600" style="color: var(--warning-color);">15,680</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-card mb-1-5">
                                <h3 class="bonus-title" style="color: var(--warning-color);">
                                    <span>🎁</span> Акции
                                </h3>
                                
                                <div class="promo-card promo-card-success">
                                    <h5 class="promo-title">🔥 Горящее предложение!</h5>
                                    <p class="promo-description">Купи 3 множителя - получи 4-й бесплатно!</p>
                                    <div class="promo-footer">
                                        <span class="promo-timer" style="color: var(--success-color);">Осталось: 2ч 45м</span>
                                        <button class="btn-secondary promo-btn">🔥 Участвовать</button>
                                    </div>
                                </div>
                                
                                <div class="promo-card promo-card-secondary">
                                    <h5 class="promo-title">💎 VIP бонус</h5>
                                    <p class="promo-description">Скидка 20% на все множители для VIP пользователей</p>
                                    <span class="promo-permanent">Постоянно активно</span>
                                </div>
                            </div>
                            
                            <div class="stats-card">
                                <h3 class="bonus-title" style="color: var(--primary-color);">
                                    <span>🏆</span> Рекорды
                                </h3>
                                
                                <div class="records-grid">
                                    <div class="record-item">
                                        <span class="record-label">Максимальный множитель:</span>
                                        <span class="record-value" style="color: var(--warning-color);">x12.5</span>
                                    </div>
                                    <div class="record-item">
                                        <span class="record-label">Самая долгая активация:</span>
                                        <span class="record-value text-primary">72 часа</span>
                                    </div>
                                    <div class="record-item">
                                        <span class="record-label">Рекордный заработок:</span>
                                        <span class="record-value text-success">$847/час</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },
            
            // Контент для аренды мощностей
            // MCP-MARKER:CONTENT:MINING_RENT - Контент аренды мощностей
            // MCP-MARKER:METHOD:CABINET:GET_MINING_RENT_CONTENT - Генерация контента аренды мощностей
            // MCP-MARKER:METHOD:CABINET:MINING_RENT_CONTENT - Генерация контента аренды мощностей
            getMiningRentContent: function() {
                // Инициализируем сервис если еще не инициализирован
                if (window.miningRentService && !window.miningRentService.initialized) {
                    window.miningRentService.init();
                    window.miningRentService.initialized = true;
                }
                
                // Используем сервис для рендеринга страницы
                if (window.miningRentService && window.miningRentService.renderMiningRentPage) {
                    return window.miningRentService.renderMiningRentPage();
                }
                
                // Если сервис не загружен, показываем заглушку
                return `
                    <div class="page-header">
                        <h2 class="page-title">💻 Аренда мощностей</h2>
                        <p class="page-subtitle">Зарабатывайте на неиспользуемых ресурсах вашего устройства</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">⏳</div>
                        <h3>Загрузка...</h3>
                        <p>Подготовка раздела аренды мощностей</p>
                    </div>
                `;
            },
            
            // Контент для устройства
            // MCP-MARKER:CONTENT:MY_DEVICE - Контент "Мое устройство"
            // MCP-MARKER:METHOD:CABINET:GET_MY_DEVICE_CONTENT - Генерация контента устройства
            // MCP-MARKER:METHOD:CABINET:MY_DEVICE_CONTENT - Генерация контента устройства
            getMyDeviceContent: function() {
                const deviceInfo = this.getDeviceInfo();
                
                return `
                    <div class="page-header">
                        <h2 class="page-title">📱 Мое устройство</h2>
                        <p class="page-subtitle">Детальная информация о вашем устройстве и системе</p>
                    </div>
                    
                    <div class="genesis-info-grid">
                        <!-- Карточка устройства -->
                        <div class="genesis-info-card genesis-panel-glass">
                            <div class="tech-card-checkmark" style="opacity: 0;">✓</div>
                            <h3>📱 Ваше устройство</h3>
                            <div class="info-item">
                                <span class="info-label">Платформа:</span>
                                <span class="info-value" id="device-platform">${deviceInfo.platform}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Операционная система:</span>
                                <span class="info-value" id="device-os">${deviceInfo.os || 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Браузер:</span>
                                <span class="info-value" id="device-browser">${deviceInfo.browser}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Версия браузера:</span>
                                <span class="info-value" id="device-browser-version">${deviceInfo.browserVersion || 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Разрешение экрана:</span>
                                <span class="info-value" id="device-resolution">${deviceInfo.screen}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Размер окна:</span>
                                <span class="info-value" id="device-viewport">${window.innerWidth} × ${window.innerHeight}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Плотность пикселей:</span>
                                <span class="info-value" id="device-pixel-ratio">${window.devicePixelRatio || 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Цветовая глубина:</span>
                                <span class="info-value" id="device-color-depth">${screen.colorDepth || 'Не определено'} бит</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Язык системы:</span>
                                <span class="info-value" id="device-language">${deviceInfo.language}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Часовой пояс:</span>
                                <span class="info-value" id="device-timezone">${deviceInfo.timezone}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Время загрузки:</span>
                                <span class="info-value" id="device-load-time">${performance.now().toFixed(2)} мс</span>
                            </div>
                        </div>
                        
                        <!-- Карточка сети -->
                        <div class="genesis-info-card genesis-panel-glass">
                            <div class="tech-card-checkmark" style="opacity: 0;">✓</div>
                            <h3>🌐 Сетевая информация</h3>
                            <div class="info-item">
                                <span class="info-label">IP адрес:</span>
                                <span class="info-value" id="network-ip">Определяется...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Локация:</span>
                                <span class="info-value" id="network-location">Определяется...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Провайдер:</span>
                                <span class="info-value" id="network-provider">Определяется...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Организация:</span>
                                <span class="info-value" id="network-organization">Определяется...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Статус соединения:</span>
                                <span class="info-value" id="network-status">${navigator.onLine ? '🟢 Онлайн' : '🔴 Офлайн'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Тип соединения:</span>
                                <span class="info-value" id="network-connection-type">${navigator.connection ? navigator.connection.effectiveType || 'Не определено' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Скорость соединения:</span>
                                <span class="info-value" id="network-connection-speed">${navigator.connection ? (navigator.connection.downlink || 'Не определено') + ' Мбит/с' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Задержка сети:</span>
                                <span class="info-value" id="network-latency">${navigator.connection ? (navigator.connection.rtt || 'Не определено') + ' мс' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Пинг до BSC:</span>
                                <span class="info-value" id="network-bsc-ping">Измеряется...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Статус Web3:</span>
                                <span class="info-value" id="network-web3-status">${typeof window.ethereum !== 'undefined' ? '🟢 Подключен' : '🔴 Не подключен'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">RPC Endpoint:</span>
                                <span class="info-value" id="network-rpc-endpoint">https://bsc-dataseed.binance.org/</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">User Agent:</span>
                                <span class="info-value" id="network-user-agent" style="font-size: 0.8rem; word-break: break-all;">${navigator.userAgent.substring(0, 100)}...</span>
                            </div>
                        </div>
                        
                        <!-- Карточка производительности -->
                        <div class="genesis-info-card genesis-panel-glass">
                            <div class="tech-card-checkmark" style="opacity: 0;">✓</div>
                            <h3>⚡ Производительность</h3>
                            <div class="info-item">
                                <span class="info-label">Процессор:</span>
                                <span class="info-value" id="performance-cpu-cores">${navigator.hardwareConcurrency || 'Не определено'} ядер</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Память устройства:</span>
                                <span class="info-value" id="performance-device-memory">${navigator.deviceMemory ? navigator.deviceMemory + ' GB' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Память браузера:</span>
                                <span class="info-value" id="performance-browser-memory">${performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + ' MB' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Время загрузки страницы:</span>
                                <span class="info-value" id="performance-page-load">${performance.timing ? (performance.timing.loadEventEnd - performance.timing.navigationStart) + ' мс' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Время DOM:</span>
                                <span class="info-value" id="performance-dom-time">${performance.timing ? (performance.timing.domContentLoadedEventEnd - performance.timing.navigationStart) + ' мс' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Время рендеринга:</span>
                                <span class="info-value" id="performance-render-time">${performance.timing ? (performance.timing.loadEventEnd - performance.timing.domContentLoadedEventEnd) + ' мс' : 'Не определено'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">FPS (кадры в секунду):</span>
                                <span class="info-value" id="performance-fps">Измеряется...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Поддержка WebGL:</span>
                                <span class="info-value" id="performance-webgl">${this.checkWebGLSupport()}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Поддержка WebRTC:</span>
                                <span class="info-value" id="performance-webrtc">${this.checkWebRTCSupport()}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Поддержка Service Workers:</span>
                                <span class="info-value" id="performance-service-workers">${'serviceWorker' in navigator ? '✅ Поддерживается' : '❌ Не поддерживается'}</span>
                            </div>
                        </div>
                        
                        <!-- Карточка системы -->
                        <div class="genesis-info-card genesis-panel-glass">
                            <div class="tech-card-checkmark" style="opacity: 0;">✓</div>
                            <h3>⚙️ Параметры системы</h3>
                            <div class="info-item">
                                <span class="info-label">Основной адрес:</span>
                                <span class="info-value" id="system-main-address">0x399B...fFCD</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Адрес доступа:</span>
                                <span class="info-value" id="system-access-address">0x2891...Af76</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Контракт токена:</span>
                                <span class="info-value" id="system-token-contract">0xdf17...e6c1</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Сеть:</span>
                                <span class="info-value" id="system-network">BSC Mainnet</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Статус API:</span>
                                <span class="info-value" id="system-api-status">✅ Активно</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Версия приложения:</span>
                                <span class="info-value" id="system-app-version">GENESIS 1.1</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Версия протокола:</span>
                                <span class="info-value" id="system-protocol-version">BEP-20</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Блокчейн ID:</span>
                                <span class="info-value" id="system-blockchain-id">56</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">RPC URL:</span>
                                <span class="info-value" id="system-rpc-url">https://bsc-dataseed.binance.org/</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Explorer URL:</span>
                                <span class="info-value" id="system-explorer-url">https://bscscan.com/</span>
                            </div>
                        </div>
                        
                        <!-- Карточка статистики -->
                        <div class="genesis-info-card genesis-panel-glass">
                            <div class="tech-card-checkmark" style="opacity: 0;">✓</div>
                            <h3>📊 Статистика использования</h3>
                            <div class="info-item">
                                <span class="info-label">Время в системе:</span>
                                <span class="info-value" id="stats-session-time">00:00:00</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">API запросов:</span>
                                <span class="info-value" id="stats-api-calls">0</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Логов в терминале:</span>
                                <span class="info-value" id="stats-terminal-logs">0</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Ошибок:</span>
                                <span class="info-value" id="stats-errors">0</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Кэш:</span>
                                <span class="info-value" id="stats-cache-size">0 KB</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Память браузера:</span>
                                <span class="info-value" id="stats-memory-usage">${performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + ' MB' : '-'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Загрузка CPU:</span>
                                <span class="info-value" id="stats-cpu-usage">Измеряется...</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Активные вкладки:</span>
                                <span class="info-value" id="stats-active-tabs">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Время последнего обновления:</span>
                                <span class="info-value" id="stats-last-update">${new Date().toLocaleTimeString()}</span>
                            </div>
                        </div>
                        
                        <!-- Карточка безопасности -->
                        <div class="genesis-info-card genesis-panel-glass">
                            <div class="tech-card-checkmark" style="opacity: 0;">✓</div>
                            <h3>🔒 Безопасность и конфиденциальность</h3>
                            <div class="info-item">
                                <span class="info-label">Протокол соединения:</span>
                                <span class="info-value" id="security-protocol">${location.protocol}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Шифрование:</span>
                                <span class="info-value" id="security-encryption">${location.protocol === 'https:' ? '🔒 TLS/SSL' : '⚠️ HTTP'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Do Not Track:</span>
                                <span class="info-value" id="security-dnt">${navigator.doNotTrack || 'Не установлен'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Cookies:</span>
                                <span class="info-value" id="security-cookies">${navigator.cookieEnabled ? '✅ Включены' : '❌ Отключены'}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Local Storage:</span>
                                <span class="info-value" id="security-local-storage">${this.checkLocalStorageSupport()}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Session Storage:</span>
                                <span class="info-value" id="security-session-storage">${this.checkSessionStorageSupport()}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">IndexedDB:</span>
                                <span class="info-value" id="security-indexeddb">${this.checkIndexedDBSupport()}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Web Workers:</span>
                                <span class="info-value" id="security-web-workers">${this.checkWebWorkersSupport()}</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Content Security Policy:</span>
                                <span class="info-value" id="security-csp">${this.checkCSPSupport()}</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Важная надпись о конфиденциальности -->
                    <div class="privacy-notice genesis-panel-glass">
                        <div class="privacy-icon">🔒</div>
                        <div class="privacy-content">
                            <h4>🔒 Конфиденциальность данных</h4>
                            <p><strong>Важно:</strong> Мы НЕ собираем и НЕ сохраняем ваши персональные данные. Вся информация о вашем устройстве и соединении отображается только для вас в реальном времени и не передается на наши серверы. Ваша приватность — наш приоритет.</p>
                            <div class="privacy-features">
                                <span class="privacy-feature">✅ Данные не сохраняются</span>
                                <span class="privacy-feature">✅ Нет трекинга</span>
                                <span class="privacy-feature">✅ Локальная обработка</span>
                                <span class="privacy-feature">✅ Безопасное соединение</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">PWA функции</h3>
                        <button class="btn btn-secondary" onclick="window.CabinetApp.installPWA()">
                            📱 Установить как приложение
                        </button>
                    </div>
                `;
            },
            
            // Вспомогательные методы для проверки поддержки технологий
            checkWebGLSupport: function() {
                try {
                    const canvas = document.createElement('canvas');
                    return canvas.getContext('webgl') || canvas.getContext('experimental-webgl') ? '✅ Поддерживается' : '❌ Не поддерживается';
                } catch (e) {
                    return '❌ Не поддерживается';
                }
            },
            
            checkWebRTCSupport: function() {
                return (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) ? '✅ Поддерживается' : '❌ Не поддерживается';
            },
            
            checkLocalStorageSupport: function() {
                try {
                    const test = 'test';
                    localStorage.setItem(test, test);
                    localStorage.removeItem(test);
                    return '✅ Поддерживается';
                } catch (e) {
                    return '❌ Не поддерживается';
                }
            },
            
            checkSessionStorageSupport: function() {
                try {
                    const test = 'test';
                    sessionStorage.setItem(test, test);
                    sessionStorage.removeItem(test);
                    return '✅ Поддерживается';
                } catch (e) {
                    return '❌ Не поддерживается';
                }
            },
            
            checkIndexedDBSupport: function() {
                return 'indexedDB' in window ? '✅ Поддерживается' : '❌ Не поддерживается';
            },
            
            checkWebWorkersSupport: function() {
                return 'Worker' in window ? '✅ Поддерживается' : '❌ Не поддерживается';
            },
            
            checkCSPSupport: function() {
                return 'securityPolicyViolationEvent' in window ? '✅ Поддерживается' : '❌ Не поддерживается';
            },
            
            // Контент для PLEX монеты
            // MCP-MARKER:CONTENT:PLEX_COIN - Контент PLEX монеты
            // MCP-MARKER:METHOD:CABINET:GET_PLEX_COIN_CONTENT - Генерация контента PLEX монеты
            // MCP-MARKER:METHOD:CABINET:PLEX_COIN_CONTENT - Генерация контента PLEX монеты
            getPlexCoinContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🪙 PLEX ONE (PLEX)</h2>
                        <p class="page-subtitle">Внутренняя валюта экосистемы GENESIS. Торгуется на PancakeSwap, отслеживается на GeckoTerminal и BSCScan.</p>
                    </div>

                    <div class="stats-card" style="margin-bottom: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">🌐 Описание экосистемы GENESIS</h3>
                        <p style="color: var(--text-secondary); font-size: 1.1rem;">
                            GENESIS — это децентрализованная экосистема на базе токена PLEX ONE (BSC), объединяющая инвестиции, DeFi-инструменты, NFT, реферальные программы и геймификацию. Вся логика платформы строится вокруг PLEX: депозиты, бонусы, множители, аренда мощностей, торговля и награды. Токен PLEX ONE обеспечивает прозрачность, мгновенные расчёты и открытый аудит всех операций через блокчейн. В экосистеме реализованы механики стейкинга, фарминга, NFT-коллекций, а также интеграция с PancakeSwap и GeckoTerminal для мониторинга и торговли.
                        </p>
                    </div>

                    <div class="stats-grid" style="margin-bottom: 2rem;">
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Адрес контракта</span>
                                <span class="stats-icon">🔗</span>
                            </div>
                            <div class="stats-value" style="font-size: 1rem; word-break: break-all;">0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1</div>
                            <div class="stats-change"><a href="https://bscscan.com/address/0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1#code" target="_blank" rel="noopener">Проверить на BSCScan</a></div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Сеть</span>
                                <span class="stats-icon">🌐</span>
                            </div>
                            <div class="stats-value">Binance Smart Chain</div>
                            <div class="stats-change">BEP-20</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Total Supply</span>
                                <span class="stats-icon">💎</span>
                            </div>
                            <div class="stats-value">12,600,000</div>
                            <div class="stats-change">PLEX</div>
                        </div>
                        <div class="stats-card">
                            <div class="stats-header">
                                <span class="stats-title">Decimals</span>
                                <span class="stats-icon">🔢</span>
                            </div>
                            <div class="stats-value">9</div>
                            <div class="stats-change">Точность</div>
                        </div>
                    </div>

                    <div class="stats-card" style="margin-bottom: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">📈 График цены PLEX ONE (GeckoTerminal)</h3>
                        <div style="width: 100%; min-height: 420px; background: var(--bg-tertiary); border-radius: 12px; overflow: hidden; border: 1px solid var(--border-color);">
                            <iframe 
                                height="420" 
                                width="100%" 
                                id="geckoterminal-embed" 
                                title="GeckoTerminal Embed" 
                                src="https://www.geckoterminal.com/ru/bsc/pools/0x41d9650faf3341cbf8947fd8063a1fc88dbf1889?embed=1&info=1&swaps=1&grayscale=0&light_chart=0&chart_type=price&resolution=15m" 
                                frameborder="0" 
                                allow="clipboard-write" 
                                allowfullscreen
                                style="border: none; width: 100%; min-height: 420px; background: #181a20;">
                            </iframe>
                        </div>
                    </div>

                    <div class="stats-card" style="margin-bottom: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">💡 Как добавить PLEX ONE в MetaMask</h3>
                        <ol style="color: var(--text-secondary); font-size: 1rem; padding-left: 1.5rem;">
                            <li>Откройте MetaMask и выберите сеть <b>Binance Smart Chain</b>.</li>
                            <li>Нажмите <b>"Добавить токен"</b> (или <b>"Import tokens"</b>).</li>
                            <li>Вставьте адрес контракта: <code>0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1</code></li>
                            <li>Символ токена: <b>PLEX</b></li>
                            <li>Точность (Decimals): <b>9</b></li>
                            <li>Подтвердите добавление — теперь PLEX ONE будет отображаться в вашем кошельке!</li>
                        </ol>
                        <p style="color: var(--success-color); font-size: 1rem; margin-top: 0.5rem;">Вы всегда можете скопировать адрес контракта с этой страницы.</p>
                    </div>

                    <div class="stats-card" style="margin-bottom: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">💱 Быстрые действия</h3>
                        <div class="plex-actions">
                            <a class="plex-action-btn" href="https://pancakeswap.finance/swap?outputCurrency=0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1&inputCurrency=0x55d398326f99059fF775485246999027B3197955" target="_blank" rel="noopener">Купить PLEX на PancakeSwap</a>
                            <a class="plex-action-btn outline" href="https://pancakeswap.finance/swap?inputCurrency=0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1&outputCurrency=0x55d398326f99059fF775485246999027B3197955" target="_blank" rel="noopener">Продать PLEX за USDT</a>
                            <a class="plex-action-btn outline" href="https://pancakeswap.finance/add/0x55d398326f99059fF775485246999027B3197955/0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1" target="_blank" rel="noopener">Добавить ликвидность</a>
                            <a class="plex-action-btn outline" href="https://pancakeswap.finance/info/v2/tokens/0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1" target="_blank" rel="noopener">Статистика PancakeSwap</a>
                        </div>
                    </div>

                    <div class="stats-card" style="margin-bottom: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">🔍 Блокчейн и контракт</h3>
                        <ul style="color: var(--text-secondary); font-size: 1rem;">
                            <li>Контракт: <a class="plex-link" href="https://bscscan.com/address/0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1" target="_blank" rel="noopener">0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1</a></li>
                            <li>Исходный код: <a class="plex-link" href="https://bscscan.com/address/0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1#code" target="_blank" rel="noopener">BSCScan Code</a></li>
                            <li>Чтение данных: <a class="plex-link" href="https://bscscan.com/address/0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1#readContract" target="_blank" rel="noopener">Read Contract</a></li>
                            <li>Взаимодействие: <a class="plex-link" href="https://bscscan.com/address/0xdf179b6cAdBC61FFD86A3D2e55f6d6e083ade6c1#writeContract" target="_blank" rel="noopener">Write Contract</a></li>
                        </ul>
                    </div>

                    <div class="stats-card" style="margin-bottom: 2rem;">
                        <h3 style="color: var(--primary-color); margin-bottom: 1rem;">📌 Основная информация</h3>
                        <ul style="color: var(--text-secondary); font-size: 1rem;">
                            <li><strong>Название:</strong> PLEX ONE</li>
                            <li><strong>Символ:</strong> PLEX</li>
                            <li><strong>Decimals:</strong> 9</li>
                            <li><strong>Total Supply:</strong> 12,600,000</li>
                            <li><strong>Сеть:</strong> Binance Smart Chain (BSC)</li>
                        </ul>
                    </div>
                `;
            },
            
            // Контент для настроек
            // MCP-MARKER:CONTENT:SETTINGS - Контент настроек
            // MCP-MARKER:METHOD:CABINET:GET_SETTINGS_CONTENT - Генерация контента настроек
            // MCP-MARKER:METHOD:CABINET:SETTINGS_CONTENT - Генерация контента настроек
            getSettingsContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">Настройки</h2>
                        <p class="page-subtitle">Управление аккаунтом</p>
                    </div>
                    
                    <div style="background: var(--bg-secondary); padding: 2rem; border-radius: 12px; border: 1px solid var(--border-color);">
                        <h3 class="text-primary-color margin-bottom-1-5rem">Основные настройки</h3>
                        
                        <div class="form-group">
                            <label class="form-label">Адрес кошелька</label>
                            <input type="text" class="form-control" value="${this.state.userAddress}" disabled>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Уведомления</label>
                            <label class="display-flex align-items-center cursor-pointer">
                                <input type="checkbox" checked class="margin-right-0-5rem">
                                <span>Получать уведомления о транзакциях</span>
                            </label>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Тема оформления</label>
                            <select class="form-control">
                                <option>Темная (по умолчанию)</option>
                                <option>Светлая (скоро)</option>
                                <option>Автоматическая (скоро)</option>
                            </select>
                        </div>
                        
                        <button class="btn">Сохранить настройки</button>
                    </div>
                    
                    <div style="margin-top: 2rem; background: var(--bg-secondary); padding: 2rem; border-radius: 12px; border: 1px solid var(--border-color);">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Безопасность</h3>
                        <button class="btn btn-outline" onclick="window.CabinetApp.exportSession()">
                            📥 Экспорт сессии
                        </button>
                        <button class="btn btn-outline" style="margin-left: 1rem;" onclick="clearCacheAndReload()">
                            🧹 Очистить кэш
                        </button>
                    </div>
                `;
            },
            
            // Показать модальное окно создания депозита
            // MCP-MARKER:METHOD:CABINET:SHOW_CREATE_DEPOSIT_MODAL - Показ модального окна создания депозита
            showCreateDepositModal: function() {
                const modal = document.getElementById('create-deposit-modal');
                if (modal) {
                    modal.classList.remove('hidden');
                    // Здесь будет загрузка контента модального окна
                    
                    // Проверка доступа
                    if (!this.state.platformAccess || !this.state.platformAccess.isActive) {
                        document.getElementById('deposit-modal-content').innerHTML = `
                            <div class="empty-state">
                                <div class="empty-icon">🔒</div>
                                <h3>Требуется доступ</h3>
                                <p>Для создания депозитов необходим активный доступ к платформе</p>
                                <button class="btn" onclick="window.CabinetApp.showPlatformAccessModal(); closeDepositModal();">
                                    Пополнить доступ
                                </button>
                            </div>
                        `;
                    } else {
                        // Загрузка списка депозитов
                        this.loadDepositPlans();
                    }
                }
            },
            
            // Показать модальное окно пополнения доступа
            // MCP-MARKER:METHOD:CABINET:SHOW_PLATFORM_ACCESS_MODAL - Показ модалки пополнения доступа
            showPlatformAccessModal: function() {
                const modal = document.getElementById('platform-access-modal');
                if (modal) {
                    modal.classList.remove('hidden');
                    
                    const content = document.getElementById('platform-access-content');
                    content.innerHTML = `
                        <div class="text-center">
                            <div class="font-size-3rem margin-bottom-1rem">🔑</div>
                            <h3 class="margin-bottom-1rem">Пополнение доступа к платформе</h3>
                            <p class="text-secondary-color margin-bottom-2rem">
                                Стоимость: $1 в сутки<br>
                                Минимальное пополнение: $10 (на 10 дней)
                            </p>
                            
                            <div class="bg-tertiary-color padding-1-5rem border-radius-12px margin-bottom-1-5rem">
                                <p class="margin-bottom-1rem">Отправьте USDT на адрес:</p>
                                <code class="bg-primary-color padding-0-5rem-1rem border-radius-6px font-size-0-875rem display-block margin-bottom-1rem">
                                    ${window.GENESIS_CONFIG ? window.GENESIS_CONFIG.addresses.system : '0x...'}
                                </code>
                                <p style="color: var(--text-secondary); font-size: 0.875rem;">
                                    Минимальная сумма: 10 USDT
                                </p>
                            </div>
                            
                            <div id="qr-code-container" style="margin-bottom: 1.5rem;">
                                <!-- QR код будет здесь -->
                            </div>
                            
                            <button class="btn btn-full" onclick="closePlatformAccessModal()">
                                Закрыть
                            </button>
                        </div>
                    `;
                }
            },
            
            // Загрузка планов депозитов
            // MCP-MARKER:METHOD:CABINET:LOAD_DEPOSIT_PLANS - Загрузка планов депозитов
            loadDepositPlans: function() {
                // Здесь будет загрузка планов из конфигурации
                const content = document.getElementById('deposit-modal-content');
                content.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">🚧</div>
                        <h3>В разработке</h3>
                        <p>Функционал создания депозитов скоро будет доступен</p>
                    </div>
                `;
            },
            
            // Показать уведомление
            // MCP-MARKER:METHOD:CABINET:SHOW_NOTIFICATION - Система уведомлений
            // MCP-MARKER:METHOD:CABINET:SHOW_NOTIFICATION - Показ уведомления
            showNotification: function(title, message, type = 'info') {
                const container = document.getElementById('notification-container');
                if (!container) return;
                
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `
                    <div class="notification-icon">
                        ${type === 'success' ? '✅' : type === 'error' ? '❌' : type === 'warning' ? '⚠️' : 'ℹ️'}
                    </div>
                    <div class="notification-content">
                        <h4>${title}</h4>
                        <p>${message}</p>
                    </div>
                `;
                
                container.appendChild(notification);
                
                // Автоудаление через 5 секунд
                setTimeout(() => {
                    notification.style.animation = 'notificationSlideOut 0.3s ease-out';
                    setTimeout(() => notification.remove(), 300);
                }, 5000);
            },
            
            // Установка PWA
            installPWA: function() {
                if (window.deferredPrompt) {
                    window.deferredPrompt.prompt();
                    window.deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            this.showNotification('Успех', 'Приложение установлено', 'success');
                        }
                        window.deferredPrompt = null;
                    });
                } else {
                    this.showNotification('Информация', 'Приложение уже установлено или недоступно для установки', 'info');
                }
            },
            
            // Экспорт сессии
            exportSession: function() {
                const session = localStorage.getItem('genesis_session');
                if (session) {
                    const blob = new Blob([session], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `genesis_session_${Date.now()}.json`;
                    a.click();
                    URL.revokeObjectURL(url);
                    this.showNotification('Успех', 'Сессия экспортирована', 'success');
                }
            },
            
            // Активация множителя
            activateMultiplier: function(type) {
                debugLog('Активация множителя: ' + type, 'info');
                
                const multipliers = {
                    'turbo': { name: 'Турбо x2.0', cost: 25, plex: 500, duration: 6, multiplier: 2 },
                    'lightning': { name: 'Молния x4.0', cost: 45, plex: 900, duration: 3, multiplier: 4 },
                    'super': { name: 'Супер x7.5', cost: 85, plex: 1700, duration: 1, multiplier: 7.5 }
                };
                
                const multiplier = multipliers[type];
                if (!multiplier) {
                    this.showNotification('Ошибка', 'Неизвестный тип множителя', 'error');
                    return;
                }
                
                // Проверка доступа к платформе
                if (!this.state.platformAccess || !this.state.platformAccess.isActive) {
                    this.showNotification('Внимание', 'Требуется активный доступ к платформе', 'warning');
                    this.showPlatformAccessModal();
                    return;
                }
                
                this.showMultiplierConfirmModal(type, multiplier);
            },
            
            // Показать модальное окно подтверждения активации множителя
            // MCP-MARKER:METHOD:CABINET:SHOW_MULTIPLIER_CONFIRM_MODAL - Показ модального окна подтверждения множителя
            showMultiplierConfirmModal: function(type, multiplier) {
                const modal = document.getElementById('confirm-deposit-modal');
                const content = document.getElementById('confirm-modal-content');
                
                if (!modal || !content) return;
                
                content.innerHTML = `
                    <div class="modal-content-center">
                        <div class="modal-icon-large modal-icon-primary">⚡</div>
                        <h3 class="margin-bottom-1rem">Активация множителя</h3>
                        <p class="text-secondary-color margin-bottom-2rem">
                            Вы активируете <strong class="primary-strong">${multiplier.name}</strong><br>
                            На ${multiplier.duration} час${multiplier.duration > 1 ? 'а' : ''}
                        </p>
                        
                        <div class="modal-warning-box">
                            <p class="modal-warning-text">⚠️ Внимание!</p>
                            <p class="modal-secondary-text">
                                Отправьте <strong>${multiplier.cost}</strong> USDT или <strong>${multiplier.plex}</strong> PLEX на системный адрес.<br>
                                Множитель активируется автоматически после подтверждения.
                            </p>
                        </div>
                        
                        <div style="background: var(--bg-primary); padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
                            <div style="margin-bottom: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span style="color: var(--text-secondary);">Множитель:</span>
                                    <span style="color: var(--primary-color); font-weight: 600;">x${multiplier.multiplier}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span style="color: var(--text-secondary);">Длительность:</span>
                                    <span style="color: var(--text-primary); font-weight: 600;">${multiplier.duration} час${multiplier.duration > 1 ? 'а' : ''}</span>
                                </div>
                                <div style="display: flex; justify-content: space-between;">
                                    <span style="color: var(--text-secondary);">Стоимость:</span>
                                    <span style="color: var(--success-color); font-weight: 600;">${multiplier.cost} / ${multiplier.plex} PLEX</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn-outline" onclick="closeConfirmModal()" style="flex: 1; padding: 1rem;">Отмена</button>
                            <button class="btn" onclick="closeConfirmModal(); window.CabinetApp.showNotification('Успех', 'Множитель будет активирован после подтверждения транзакции', 'success')" style="flex: 1; padding: 1rem; background: var(--primary-color);">Подтвердить</button>
                        </div>
                    </div>
                `;
                
                modal.classList.remove('hidden');
            },
            
            // MCP-MARKER:METHOD:CABINET:GET_EXPERIENCE_CONTENT - Генерация контента стажа
            // MCP-MARKER:METHOD:CABINET:EXPERIENCE_CONTENT - Генерация контента стажа
            getExperienceContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">📅 Стаж в системе</h2>
                        <p class="page-subtitle">Ваш опыт и достижения в GENESIS</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">🏆</div>
                        <h3>Раздел в разработке</h3>
                        <p>Здесь будет отображаться ваш стаж и достижения</p>
                    </div>
                `;
            },
            
            // MCP-MARKER:METHOD:CABINET:GET_RANK_CONTENT - Генерация контента ранга
            // MCP-MARKER:METHOD:CABINET:RANK_CONTENT - Генерация контента ранга
            getRankContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">�ﲅ Система рангов</h2>
                        <p class="page-subtitle">Ваш текущий ранг и прогресс</p>
                    </div>
                    
                    <div class="empty-state">
                        <div class="empty-icon">🔓</div>
                        <h3>Раздел в разработке</h3>
                        <p>Здесь будет отображаться ваш ранг и доступные привилегии</p>
                    </div>
                `;
            },
            
            // MCP-MARKER:CONTENT:HOW_IT_WORKS - Контент "Как все устроено"
            // MCP-MARKER:METHOD:CABINET:GET_HOW_IT_WORKS_CONTENT - Генерация контента "Как все устроено"
            // MCP-MARKER:METHOD:CABINET:HOW_IT_WORKS_CONTENT - Генерация контента 'Как все устроено'
            getHowItWorksContent: function() {
                return `
                    <div class="page-header">
                        <h2 class="page-title">🛠️ Как все устроено</h2>
                        <p class="page-subtitle">Добро пожаловать в экосистему GENESIS 1.1 на базе монеты PLEX ONE</p>
                    </div>
                    
                    <div class="content-section">
                        <div class="info-banner">
                            <div class="info-icon">🌟</div>
                            <div class="info-content">
                                <h3>Рады вас приветствовать!</h3>
                                <p>Это один из ключевых сайтов нашей экосистемы на базе монеты PLEX ONE. Здесь вы можете начать зарабатывать сразу и все больше каждый день, каждый час и каждую минуту.</p>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3 class="section-title">📋 Пошаговый план заработка</h3>
                        
                        <div class="steps-container">
                            <div class="step-card">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>🔑 Оплатить доступ к сайту</h4>
                                    <p>Первый шаг - получить доступ к функциям платформы</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>💰 Купить тестовый депозит</h4>
                                    <p>Убедитесь, что прибыль по депозиту приходит на ваш кошелек</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>🎁 Посетить раздел "Бонусы и подарки"</h4>
                                    <p>Если вы уже участвуете в инструментах экосистемы</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h4>⚡ Купить первый множитель доходности</h4>
                                    <p>Доступны в разделе "Множители"</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h4>📈 Приобрести первый депозит</h4>
                                    <p>Не тестовый, а полноценный депозит для заработка</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">6</div>
                                <div class="step-content">
                                    <h4>💻 Подключиться к программе аренды мощностей</h4>
                                    <p>Получайте криптовалюту, сдавая в аренду часть мощностей вашего устройства. Посмотрите раздел "Аренда мощностей"</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">7</div>
                                <div class="step-content">
                                    <h4>🏆 Проверить разделы "Стаж" и "Ранг"</h4>
                                    <p><strong>Стаж</strong> - ваш опыт в каждом инструменте системы, который превращается в монету Стаж и автоматически начисляется при росте опыта</p>
                                    <p><strong>Ранг</strong> - монета, которая начисляется в зависимости от стажа и количества PLEX ONE на кошельке более одной недели</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">8</div>
                                <div class="step-content">
                                    <h4>💎 Покупка множителей за Ранг и Стаж</h4>
                                    <p>После начисления Ранга и Стажа вы можете покупать множители за эти монеты</p>
                                </div>
                            </div>
                            
                            <div class="step-card">
                                <div class="step-number">9</div>
                                <div class="step-content">
                                    <h4>🚀 Применение мощных множителей</h4>
                                    <p>Применяйте множители на активные депозиты и начинайте получать в десятки раз больше прибыли</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3 class="section-title">🔧 Архитектура системы</h3>
                        
                        <div class="architecture-info">
                            <div class="arch-card">
                                <div class="arch-icon">🌐</div>
                                <div class="arch-content">
                                    <h4>Блокчейн как база данных</h4>
                                    <p>На этом сайте реализована передовая DeFi система учета, анализа и наград пользователя. В качестве базы данных выступает сам блокчейн.</p>
                                </div>
                            </div>
                            
                            <div class="arch-card">
                                <div class="arch-icon">📊</div>
                                <div class="arch-content">
                                    <h4>Анализ активности кошелька</h4>
                                    <p>Анализ проводится по результатам активности вашего кошелька. Для системы вы = адрес вашего кошелька.</p>
                                </div>
                            </div>
                            
                            <div class="arch-card">
                                <div class="arch-icon">🔒</div>
                                <div class="arch-content">
                                    <h4>Анонимная работа</h4>
                                    <p>Ваши действия, прогресс и награды система вычисляет по действиям кошелька. Это значит, что вы можете работать анонимно.</p>
                                </div>
                            </div>
                            
                            <div class="arch-card">
                                <div class="arch-icon">💵</div>
                                <div class="arch-content">
                                    <h4>Высокая доходность</h4>
                                    <p>Вы можете зарабатывать много - вплоть до нескольких долларов в минуту.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <div class="warning-banner">
                            <div class="warning-icon">⚠️</div>
                            <div class="warning-content">
                                <h4>⚠️ ВАЖНО! Безопасность кошелька</h4>
                                <p><strong>Если вы потеряли доступ к своему кошельку = вы потеряли доход и деньги. Мы помочь не сможем!</strong></p>
                                <ul>
                                    <li>Храните сид-фразу и/или приватный ключ в надежном месте</li>
                                    <li>Никогда и никому не передавайте доступ к своему кошельку</li>
                                    <li>Сделайте несколько резервных копий</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <h3 class="section-title">⚡ Что такое множитель?</h3>
                        
                        <div class="multiplier-explanation">
                            <div class="multiplier-card">
                                <div class="multiplier-icon">📈</div>
                                <div class="multiplier-content">
                                    <h4>Множитель доходности</h4>
                                    <p>Это ваша возможность получать пассивный доход в <strong>10, 20, 30 раз выше</strong> на ограниченный период времени.</p>
                                </div>
                            </div>
                            
                            <div class="example-card">
                                <h4>💡 Пример расчета:</h4>
                                <div class="calculation">
                                    <div class="calc-step">
                                        <span class="calc-label">Базовый доход:</span>
                                        <span class="calc-value">10 центов в минуту</span>
                                    </div>
                                    <div class="calc-step">
                                        <span class="calc-label">В сутках минут:</span>
                                        <span class="calc-value">1440</span>
                                    </div>
                                    <div class="calc-step">
                                        <span class="calc-label">Доход за сутки без множителя:</span>
                                        <span class="calc-value">144 доллара</span>
                                    </div>
                                    <div class="calc-divider"></div>
                                    <div class="calc-step multiplier-example">
                                        <span class="calc-label">Множитель x30 на 4 часа:</span>
                                        <span class="calc-value">864 доллара вместо 144</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="multiplier-info">
                                <h4>📋 Особенности множителей:</h4>
                                <ul>
                                    <li>Система не всегда располагает свободными множителями</li>
                                    <li>Они стоят довольно дорого</li>
                                    <li>Самые эффективные множители доступны только за PLEX ONE</li>
                                    <li>Некоторые ударные множители доступны только за монеты Стаж и Ранг</li>
                                    <li>Ударные множители приносят очень высокий доход</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="content-section">
                        <div class="success-banner">
                            <div class="success-icon">🎯</div>
                            <div class="success-content">
                                <h4>Готовы начать зарабатывать?</h4>
                                <p>Теперь вы знаете, как устроена система GENESIS 1.1. Начните с первого шага - оплаты доступа к платформе!</p>
                                <div class="action-buttons">
                                    <button class="btn btn-primary" onclick="window.CabinetApp.showPlatformAccessModal()">
                                        🔑 Оплатить доступ
                                    </button>
                                    <button class="btn btn-secondary" onclick="window.CabinetApp.navigateTo('portfolio')">
                                        💰 Перейти к депозитам
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            },
            
            // Проверка авторизации
            // MCP-MARKER:METHOD:CABINET:CHECK_AUTH - Проверка авторизации пользователя
            // MCP-MARKER:METHOD:CABINET:CHECK_AUTH - Проверка авторизации
            checkAuth: function() {
                try {
                    console.log('🔐 Проверка авторизации...');
                    
                    // Проверяем сохраненный адрес в localStorage
                    const savedAddress = localStorage.getItem('genesis_user_address');
                    
                    if (savedAddress && this.isValidAddress(savedAddress)) {
                        console.log('✅ Найден сохраненный адрес:', savedAddress);
                        this.state.userAddress = savedAddress;
                        this.showCabinet();
                    } else {
                        console.log('❌ Сохраненный адрес не найден или недействителен');
                        this.showAuthScreen();
                    }
                } catch (error) {
                    console.error('❌ Ошибка проверки авторизации:', error);
                    this.showAuthScreen();
                }
            },
            
            // Валидация адреса
            isValidAddress: function(address) {
                return /^0x[a-fA-F0-9]{40}$/.test(address);
            },
            
            // Обновление информации об устройстве
            // MCP-MARKER:METHOD:CABINET:UPDATE_DEVICE_INFO - Обновление информации об устройстве
            // MCP-MARKER:METHOD:CABINET:UPDATE_DEVICE_INFO - Обновление информации об устройстве
            updateDeviceInfo: function() {
                this.state.deviceInfo = this.getDeviceInfo();
                console.log('📱 Информация об устройстве обновлена');
            },
            
            // Запуск таймера сессии
            // MCP-MARKER:METHOD:CABINET:START_SESSION_TIMER - Таймер сессии
            // MCP-MARKER:METHOD:CABINET:START_SESSION_TIMER - Запуск таймера сессии
            startSessionTimer: function() {
                const startTime = Date.now();
                
                setInterval(() => {
                    const elapsed = Date.now() - startTime;
                    const hours = Math.floor(elapsed / 3600000);
                    const minutes = Math.floor((elapsed % 3600000) / 60000);
                    const seconds = Math.floor((elapsed % 60000) / 1000);
                    
                    const timeString = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    
                    const sessionElement = document.getElementById('stats-session-time');
                    if (sessionElement) {
                        sessionElement.textContent = timeString;
                    }
                }, 1000);
            },
            
            // Получение информации об устройстве
            // MCP-MARKER:METHOD:CABINET:GET_DEVICE_INFO - Получение информации об устройстве пользователя
            // MCP-MARKER:METHOD:CABINET:GET_DEVICE_INFO - Получение информации об устройстве
            getDeviceInfo: function() {
                const userAgent = navigator.userAgent;
                let browser = 'Неизвестный браузер';
                let browserVersion = '';
                let os = 'Неизвестная ОС';
                
                // Определение браузера
                if (userAgent.includes('Chrome')) {
                    browser = 'Chrome';
                    const match = userAgent.match(/Chrome\/(\d+)/);
                    if (match) browserVersion = match[1];
                } else if (userAgent.includes('Firefox')) {
                    browser = 'Firefox';
                    const match = userAgent.match(/Firefox\/(\d+)/);
                    if (match) browserVersion = match[1];
                } else if (userAgent.includes('Safari')) {
                    browser = 'Safari';
                    const match = userAgent.match(/Version\/(\d+)/);
                    if (match) browserVersion = match[1];
                } else if (userAgent.includes('Edge')) {
                    browser = 'Edge';
                    const match = userAgent.match(/Edge\/(\d+)/);
                    if (match) browserVersion = match[1];
                }
                
                // Определение ОС
                if (userAgent.includes('Windows')) {
                    os = 'Windows';
                } else if (userAgent.includes('Mac')) {
                    os = 'macOS';
                } else if (userAgent.includes('Linux')) {
                    os = 'Linux';
                } else if (userAgent.includes('Android')) {
                    os = 'Android';
                } else if (userAgent.includes('iOS')) {
                    os = 'iOS';
                }
                
                return {
                    platform: navigator.platform,
                    os: os,
                    browser: browser,
                    browserVersion: browserVersion,
                    screen: `${screen.width} × ${screen.height}`,
                    language: navigator.language,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                    online: navigator.onLine
                };
            },
            
            // Показать экран загрузки
            // MCP-MARKER:METHOD:CABINET:SHOW_LOADING_SCREEN - Показ экрана загрузки
            // MCP-MARKER:METHOD:CABINET:SHOW_LOADING_SCREEN - Показ экрана загрузки
            showLoadingScreen: function() {
                document.getElementById('loading-screen').classList.remove('hidden');
                document.getElementById('auth-screen').classList.add('hidden');
                document.getElementById('cabinet-app').classList.add('hidden');
                
                // Показываем экстренные действия через 10 секунд
                setTimeout(() => {
                    const emergencyActions = document.getElementById('emergency-actions');
                    if (emergencyActions) {
                        emergencyActions.classList.remove('hidden');
                    }
                }, 10000);
            },
            
            // Настройка обработчика авторизации
            // MCP-MARKER:METHOD:CABINET:SETUP_AUTH_HANDLER - Настройка обработчика авторизации
            // MCP-MARKER:METHOD:CABINET:SETUP_AUTH_HANDLER - Настройка обработчика авторизации
            setupAuthHandler: function() {
                console.log('🔧 Настройка обработчика авторизации...');
                
                // Находим элементы авторизации
                const authButton = document.getElementById('auth-button');
                const walletInput = document.getElementById('wallet-address');
                
                console.log('🔍 Элементы авторизации:', { authButton: !!authButton, walletInput: !!walletInput });
                
                if (authButton) {
                    // Удаляем старые обработчики, если есть
                    authButton.removeEventListener('click', this.handleAuth);
                    
                    // Добавляем новый обработчик
                    authButton.addEventListener('click', () => {
                        console.log('🔘 Кнопка авторизации нажата');
                        this.handleAuth();
                    });
                    
                    console.log('✅ Обработчик кнопки авторизации настроен');
                } else {
                    console.warn('⚠️ Кнопка авторизации не найдена');
                }
                
                if (walletInput) {
                    // Удаляем старые обработчики, если есть
                    walletInput.removeEventListener('keypress', this.handleAuthKeyPress);
                    
                    // Добавляем обработчик Enter
                    walletInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            console.log('🔘 Enter нажат в поле адреса');
                            this.handleAuth();
                        }
                    });
                    
                    console.log('✅ Обработчик поля ввода настроен');
                } else {
                    console.warn('⚠️ Поле ввода адреса не найдено');
                }
            },
            
            // Обработчик нажатия Enter в поле ввода
            // MCP-MARKER:METHOD:CABINET:HANDLE_AUTH_KEYPRESS - Обработка нажатия клавиш при авторизации
            handleAuthKeyPress: function(e) {
                if (e.key === 'Enter') {
                    this.handleAuth();
                }
            },
            
            // MCP-MARKER:METHOD:CABINET:SHOW_DEPOSIT_CALCULATOR - Показ калькулятора доходности
            showDepositCalculator: function() {
                debugLog('Открытие калькулятора доходности', 'info');
                this.showNotification('Калькулятор', 'Функция в разработке', 'info');
            },
            
            // MCP-MARKER:METHOD:CABINET:EXPORT_PORTFOLIO_REPORT - Экспорт отчета портфеля
            exportPortfolioReport: function() {
                debugLog('Экспорт отчета портфеля', 'info');
                this.showNotification('Экспорт', 'Функция в разработке', 'info');
            },
            
            // MCP-MARKER:METHOD:CABINET:SHOW_DEPOSIT_DETAILS - Показ деталей депозита
            showDepositDetails: function(depositId) {
                debugLog('Показ деталей депозита: ' + depositId, 'info');
                this.showNotification('Детали депозита', 'Функция в разработке', 'info');
            },
            
            // MCP-MARKER:METHOD:CABINET:REINVEST_DEPOSIT - Реинвестирование депозита
            reinvestDeposit: function(depositId) {
                debugLog('Реинвестирование депозита: ' + depositId, 'info');
                this.showNotification('Реинвестирование', 'Функция в разработке', 'info');
            }
        };
        
        // Глобальные функции
        window.logout = function() {
            localStorage.removeItem('genesis_session');
            window.location.reload();
        };
        
        window.clearCacheAndReload = function() {
            localStorage.clear();
            sessionStorage.clear();
            if ('caches' in window) {
                caches.keys().then(names => {
                    names.forEach(name => caches.delete(name));
                });
            }
            window.location.reload(true);
        };
        
        window.enableDevAccess = function() {
            // Режим разработчика
            window.CabinetApp.state.userAddress = '0x742d35Cc6634C0532925a3b844Bc9e7595f2bD8e';
            window.CabinetApp.state.isAuthenticated = true;
            window.CabinetApp.showCabinet();
        };
        
        window.showSystemInfo = function() {
            const info = `
GENESIS 1.1 - System Information
================================
Version: ${window.GENESIS_VERSION}
Build: 29-06-2025-14:41
User Agent: ${navigator.userAgent}
Platform: ${navigator.platform}
Language: ${navigator.language}
Online: ${navigator.onLine}
Screen: ${screen.width}x${screen.height}
            `;
            console.log(info);
            alert(info);
        };
        
        window.toggleMobileMenu = function() {
            const sidebar = document.getElementById('cabinet-sidebar');
            if (sidebar) {
                sidebar.classList.toggle('active');
                window.CabinetApp.state.isMobileMenuOpen = !window.CabinetApp.state.isMobileMenuOpen;
            }
        };
        
        window.closeDepositModal = function() {
            const modal = document.getElementById('create-deposit-modal');
            if (modal) modal.classList.add('hidden');
        };
        
        window.closeConfirmModal = function() {
            const modal = document.getElementById('confirm-deposit-modal');
            if (modal) modal.classList.add('hidden');
        };
        
        window.closeTransactionResultModal = function() {
            const modal = document.getElementById('transaction-result-modal');
            if (modal) modal.classList.add('hidden');
        };
        
        window.closePlatformAccessModal = function() {
            const modal = document.getElementById('platform-access-modal');
            if (modal) modal.classList.add('hidden');
        };
        
        // PWA Support
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            window.deferredPrompt = deferredPrompt;
        });
        
        // Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => debugLog('Service Worker registered', 'success'))
                    .catch(error => debugLog('Service Worker registration failed: ' + error, 'error'));
            });
        }
        
        // Запуск приложения
        // MCP-MARKER:SECTION:APPLICATION_STARTUP - Точка входа приложения
        document.addEventListener('DOMContentLoaded', function() {
            window.cabinetApp = window.CabinetApp;
            window.CabinetApp.init();
        });
        
        // ========== ДОПОЛНИТЕЛЬНЫЕ ФУНКЦИИ ДЛЯ РАБОТЫ С ДЕПОЗИТАМИ ==========
        
        // MCP-MARKER:FUNCTION:SHOW_DEPOSIT_MODAL - Показ модального окна создания депозита
        // MCP-MARKER:FUNCTION:SHOW_DEPOSIT_MODAL - Показ модального окна депозита
        window.showDepositModal = function(planId = null) {
            debugLog('Открытие модального окна создания депозита', 'info');
            
            const modal = document.getElementById('create-deposit-modal');
            if (!modal) {
                debugLog('Модальное окно не найдено', 'error');
                return;
            }
            
            // Показываем модальное окно
            modal.classList.remove('hidden');
            
            // Загружаем содержимое
            loadDepositModalContent(planId);
        };
        
        // MCP-MARKER:FUNCTION:LOAD_DEPOSIT_MODAL_CONTENT - Загрузка содержимого модального окна
        // MCP-MARKER:FUNCTION:LOAD_DEPOSIT_MODAL_CONTENT - Загрузка контента модального окна депозита
        window.loadDepositModalContent = function(planId = null) {
            const content = document.getElementById('deposit-modal-content');
            if (!content) return;
            
            debugLog('Загрузка содержимого модального окна депозита', 'info');
            
            // Получаем доступные планы
            const plans = window.GENESIS_CONFIG ? window.GENESIS_CONFIG.depositPlans : [];
            if (!plans.length) {
                content.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">⚠️</div>
                        <h3>Ошибка конфигурации</h3>
                        <p>Не удалось загрузить планы депозитов</p>
                        <button class="btn-outline" onclick="closeDepositModal()">Закрыть</button>
                    </div>
                `;
                return;
            }
            
            // Если указан конкретный план
            if (planId) {
                const plan = plans.find(p => p.id === planId);
                if (plan) {
                    loadSpecificPlanForm(plan);
                    return;
                }
            }
            
            // Показываем список доступных планов
            loadPlanSelectionForm(plans);
        };
        
        // MCP-MARKER:FUNCTION:LOAD_PLAN_SELECTION_FORM - Форма выбора плана
        // MCP-MARKER:FUNCTION:LOAD_PLAN_SELECTION_FORM - Загрузка формы выбора плана
        window.loadPlanSelectionForm = function(plans) {
            const content = document.getElementById('deposit-modal-content');
            if (!content) return;
            
            const plansHtml = plans.map(plan => {
                const icon = getCabinetPlanIcon(plan.name);
                const color = getCabinetPlanColor(plan.id);
                const profit = (plan.usdtAmount * plan.percentage / 100) - plan.usdtAmount;
                
                return `
                    <div class="deposit-plan-card" onclick="loadSpecificPlanForm('${plan.id}')" 
                         style="background: var(--bg-primary); border: 1px solid var(--border-color); 
                                border-radius: 12px; padding: 1.5rem; cursor: pointer; 
                                transition: all 0.3s ease; margin-bottom: 1rem;"
                         onmouseover="this.style.borderColor='${color}'; this.style.transform='translateY(-2px)';"
                         onmouseout="this.style.borderColor='var(--border-color)'; this.style.transform='translateY(0)';">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="font-size: 2.5rem;">${icon}</div>
                            <div style="flex: 1;">
                                <h4 style="color: var(--text-primary); margin-bottom: 0.5rem;">${plan.name}</h4>
                                <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">${plan.description}</p>
                            </div>
                            <div style="text-align: right;">
                                <div style="color: ${color}; font-size: 1.5rem; font-weight: 700;">
                                    ${plan.percentage}%
                                </div>
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                    ${plan.usdtAmount}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            content.innerHTML = `
                <div>
                    <h3 style="text-align: center; color: var(--secondary-color); margin-bottom: 2rem;">
                        Выберите план депозита
                    </h3>
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${plansHtml}
                    </div>
                </div>
            `;
        };
        
        // MCP-MARKER:FUNCTION:LOAD_SPECIFIC_PLAN_FORM - Загрузка формы для конкретного плана
        // MCP-MARKER:FUNCTION:LOAD_SPECIFIC_PLAN_FORM - Загрузка формы конкретного плана
        window.loadSpecificPlanForm = function(planId) {
            // Если передан объект плана, используем его
            let plan = planId;
            if (typeof planId === 'string') {
                const plans = window.GENESIS_CONFIG ? window.GENESIS_CONFIG.depositPlans : [];
                plan = plans.find(p => p.id === planId);
                if (!plan) {
                    debugLog('План не найден: ' + planId, 'error');
                    loadPlanSelectionForm(plans);
                    return;
                }
            }
            
            const content = document.getElementById('deposit-modal-content');
            if (!content) return;
            
            const profit = (plan.usdtAmount * plan.percentage / 100) - plan.usdtAmount;
            const dailyProfit = profit / plan.days;
            const icon = getCabinetPlanIcon(plan.name);
            const color = getCabinetPlanColor(plan.id);
            
            content.innerHTML = `
                <div style="max-width: 500px; margin: 0 auto;">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">${icon}</div>
                        <h3 style="color: ${color}; margin-bottom: 0.5rem;">${plan.name}</h3>
                        <p style="color: var(--text-secondary);">${plan.description}</p>
                    </div>
                    
                    <div style="background: var(--bg-primary); padding: 1.5rem; border-radius: 12px; margin-bottom: 2rem;">
                        <h4 style="color: var(--secondary-color); margin-bottom: 1rem; text-align: center;">Детали депозита</h4>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
                            <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.3rem;">Инвестиция</div>
                                <div style="color: var(--text-primary); font-weight: 600; font-size: 1.2rem;">${plan.usdtAmount}</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.3rem;">Доходность</div>
                                <div style="color: var(--success-color); font-weight: 600; font-size: 1.2rem;">${plan.percentage}%</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.3rem;">Срок</div>
                                <div style="color: var(--text-primary); font-weight: 600; font-size: 1.2rem;">${plan.days} дней</div>
                            </div>
                            <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                                <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.3rem;">Прибыль</div>
                                <div style="color: var(--gold-color); font-weight: 600; font-size: 1.2rem;">${profit.toFixed(2)}</div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">
                            <div style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 0.3rem;">Ежедневный доход</div>
                            <div style="color: var(--accent-color); font-weight: 600; font-size: 1.4rem;">~${dailyProfit.toFixed(2)}/день</div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn-outline" onclick="loadPlanSelectionForm(window.GENESIS_CONFIG.depositPlans)" 
                                style="flex: 1; padding: 1rem;">← Назад</button>
                        <button class="btn" onclick="showConfirmDepositModal('${plan.id}')" 
                                style="flex: 2; padding: 1rem; background: ${color};">Продолжить</button>
                    </div>
                </div>
            `;
        };
        
        // MCP-MARKER:FUNCTION:GET_CABINET_PLAN_ICON - Получение иконки плана
        window.getCabinetPlanIcon = function(planName) {
            const icons = {
                'TRIAL': '🎯',
                'STARTER': '🚀',
                'PROGRESSIVE1': '📈',
                'PROGRESSIVE2': '💎',
                'PROGRESSIVE3': '🏆',
                'PROGRESSIVE4': '🌟',
                'PROGRESSIVE5': '⚡',
                'PROGRESSIVE6': '🔥',
                'PROGRESSIVE7': '💰',
                'PROGRESSIVE8': '👑',
                'RECOMMENDED': '💸',
                'PLATINUM': '🎖️',
                'MAXIMUM': '🏅'
            };
            return icons[planName] || '💰';
        };
        
        // MCP-MARKER:FUNCTION:GET_CABINET_PLAN_COLOR - Получение цвета плана
        window.getCabinetPlanColor = function(planId) {
            const colors = {
                'trial': '#00ff41',
                'starter': '#ff6b35', 
                'progressive1': '#ffa726',
                'progressive2': '#ffeb3b',
                'progressive3': '#4caf50',
                'progressive4': '#00bcd4',
                'progressive5': '#2196f3',
                'progressive6': '#3f51b5',
                'progressive7': '#673ab7',
                'progressive8': '#9c27b0',
                'recommended': '#e91e63',
                'platinum': '#ff5722',
                'maximum': '#ffd700'
            };
            return colors[planId] || '#ff6b35';
        };
        
        // MCP-MARKER:FUNCTION:COPY_TO_CLIPBOARD - Копирование в буфер обмена
        window.copyToClipboard = function(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    window.CabinetApp.showNotification('Успех', 'Адрес скопирован в буфер обмена', 'success');
                }).catch(err => {
                    debugLog('Ошибка копирования: ' + err.message, 'error');
                    // Fallback для старых браузеров
                    fallbackCopyToClipboard(text);
                });
            } else {
                // Fallback для старых браузеров
                fallbackCopyToClipboard(text);
            }
        };
        
        // Fallback функция для копирования
        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                window.CabinetApp.showNotification('Успех', 'Адрес скопирован в буфер обмена', 'success');
            } catch (err) {
                window.CabinetApp.showNotification('Ошибка', 'Не удалось скопировать адрес', 'error');
            }
            
            document.body.removeChild(textArea);
        }
        
        // MCP-MARKER:FUNCTION:SHOW_CONFIRM_DEPOSIT_MODAL - Показ модального окна подтверждения
        // MCP-MARKER:FUNCTION:SHOW_CONFIRM_DEPOSIT_MODAL - Показ модального окна подтверждения депозита
        window.showConfirmDepositModal = function(planId) {
            debugLog('Показ окна подтверждения для плана: ' + planId, 'info');
            
            const plans = window.GENESIS_CONFIG ? window.GENESIS_CONFIG.depositPlans : [];
            const plan = plans.find(p => p.id === planId);
            
            if (!plan) {
                debugLog('План не найден: ' + planId, 'error');
                return;
            }
            
            // Закрываем окно создания депозита
            closeDepositModal();
            
            // Показываем окно подтверждения
            const modal = document.getElementById('confirm-deposit-modal');
            const content = document.getElementById('confirm-modal-content');
            
            if (!modal || !content) {
                debugLog('Модальное окно подтверждения не найдено', 'error');
                return;
            }
            
            const icon = getCabinetPlanIcon(plan.name);
            const color = getCabinetPlanColor(plan.id);
            const systemAddress = window.GENESIS_CONFIG ? window.GENESIS_CONFIG.addresses.system : '0x...';
            
            content.innerHTML = `
                <div class="text-center">
                    <div class="font-size-large margin-bottom-medium" style="color: ${color};">${icon}</div>
                    <h3 class="margin-bottom-medium">Подтверждение депозита</h3>
                    <p class="color-text-secondary margin-bottom-large">
                        Вы создаете депозит <strong style="color: ${color};">${plan.name}</strong> на сумму <strong>${plan.usdtAmount}</strong>
                    </p>
                    
                    <div class="background-tertiary padding-large border-radius-large margin-bottom-large">
                        <p class="color-warning margin-bottom-medium">⚠️ Внимание!</p>
                        <p class="color-text-secondary font-size-small line-height-normal">
                            Отправьте <strong>${plan.usdtAmount} USDT</strong> на системный адрес.<br>
                            После подтверждения транзакции депозит будет активирован автоматически.
                        </p>
                    </div>
                    
                    <div class="background-primary padding-medium border-radius-medium margin-bottom-medium">
                        <p class="color-text-secondary font-size-xs margin-bottom-small">Адрес для оплаты:</p>
                        <div class="flex-center gap-small">
                            <code class="flex-1 background-secondary padding-small border-radius-small font-size-xs word-break-all">${systemAddress}</code>
                            <button class="btn-secondary padding-small" onclick="copyToClipboard('${systemAddress}')">
                                📋
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex-gap">
                        <button class="btn-outline flex-1 padding-medium" onclick="closeConfirmModal(); showDepositModal('${plan.id}');">
                            ← Назад
                        </button>
                        <button class="btn flex-1 padding-medium" onclick="processDepositCreation('${plan.id}')" 
                                style="background: ${color};">
                            Я отправил USDT
                        </button>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        };
        
        // MCP-MARKER:FUNCTION:PROCESS_DEPOSIT_CREATION - Обработка создания депозита
        window.processDepositCreation = function(planId) {
            debugLog('Обработка создания депозита: ' + planId, 'info');
            
            // Закрываем модальное окно
            closeConfirmModal();
            
            // Показываем результат
            showTransactionResultModal(true, planId, 'USDT');
            
            // Запускаем мониторинг депозита
            if (window.startDepositMonitoring) {
                window.startDepositMonitoring(planId, 'USDT');
            }
        };
        
        // MCP-MARKER:FUNCTION:SHOW_TRANSACTION_RESULT_MODAL - Показ результата транзакции
        // MCP-MARKER:FUNCTION:SHOW_TRANSACTION_RESULT_MODAL - Показ результата транзакции
        window.showTransactionResultModal = function(success, planId = null, currency = null, txHash = null) {
            const modal = document.getElementById('transaction-result-modal');
            const title = document.getElementById('transaction-result-title');
            const content = document.getElementById('transaction-result-content');
            
            if (!modal || !title || !content) return;
            
            if (success) {
                title.innerHTML = '✅ Депозит принят в обработку';
                title.className = 'color-success';
                
                content.innerHTML = `
                    <div class="text-center">
                        <div class="font-size-large margin-bottom-medium color-success">✅</div>
                        <h3 class="color-success margin-bottom-medium">Успешно!</h3>
                        <p class="color-text-secondary margin-bottom-large line-height-normal">
                            Ваша заявка на создание депозита принята в обработку. Система автоматически отслеживает 
                            поступление платежа в блокчейне BSC.
                        </p>
                        
                        <div class="background-primary padding-large border-radius-large margin-bottom-large">
                            <h4 class="color-secondary margin-bottom-medium">Что происходит дальше?</h4>
                            <ul class="color-text-secondary text-left line-height-large">
                                <li>🔍 Система мониторит блокчейн BSC каждые 30 секунд</li>
                                <li>✅ После подтверждения транзакции депозит активируется</li>
                                <li>💰 Ежедневные выплаты начнутся автоматически</li>
                                <li>📱 Вы получите уведомление об активации</li>
                            </ul>
                        </div>
                        
                        <div class="flex-gap flex-center">
                            <button class="btn padding-large" onclick="closeTransactionResultModal(); window.CabinetApp.navigateTo('portfolio');">
                                💼 Перейти к портфелю
                            </button>
                            <button class="btn-outline padding-large" onclick="closeTransactionResultModal()">
                                Понятно
                            </button>
                        </div>
                    </div>
                `;
            } else {
                title.innerHTML = '❌ Ошибка создания депозита';
                title.className = 'color-error';
                
                content.innerHTML = `
                    <div class="text-center">
                        <div class="font-size-large margin-bottom-medium color-error">❌</div>
                        <h3 class="color-error margin-bottom-medium">Произошла ошибка</h3>
                        <p class="color-text-secondary margin-bottom-large line-height-normal">
                            Не удалось обработать вашу заявку на создание депозита. Попробуйте еще раз или 
                            обратитесь в службу поддержки.
                        </p>
                        
                        <div class="flex-gap flex-center">
                            <button class="btn padding-large" onclick="closeTransactionResultModal(); showDepositModal();">
                                🔄 Попробовать снова
                            </button>
                            <button class="btn-outline padding-large" onclick="closeTransactionResultModal()">
                                Закрыть
                            </button>
                        </div>
                    </div>
                `;
            }
            
            modal.classList.remove('hidden');
        };
        
        // MCP-MARKER:FUNCTION:START_DEPOSIT_MONITORING - Запуск мониторинга депозита
        window.startDepositMonitoring = function(planId, currency) {
            debugLog(`Запуск мониторинга депозита: ${planId}, валюта: ${currency}`, 'info');
            
            // Сохраняем информацию о создаваемом депозите
            const pendingDeposit = {
                planId: planId,
                currency: currency,
                timestamp: Date.now(),
                status: 'PENDING',
                userAddress: window.CabinetApp.state.userAddress
            };
            
            // Сохраняем в localStorage
            const pendingDeposits = JSON.parse(localStorage.getItem('genesis_pending_deposits') || '[]');
            pendingDeposits.push(pendingDeposit);
            localStorage.setItem('genesis_pending_deposits', JSON.stringify(pendingDeposits));
            
            // Запускаем проверку через некоторое время
            setTimeout(() => {
                checkDepositStatus(pendingDeposit);
            }, 60000); // Проверяем через 1 минуту
        };
        
        // MCP-MARKER:FUNCTION:CHECK_DEPOSIT_STATUS - Проверка статуса депозита
        window.checkDepositStatus = function(pendingDeposit) {
            debugLog('Проверка статуса депозита...', 'info');
            
            // Здесь будет реальная проверка через API
            // Пока используем заглушку
            window.CabinetApp.showNotification('Информация', 'Система проверяет статус вашего депозита', 'info');
            
            // Продолжаем мониторинг
            setTimeout(() => checkDepositStatus(pendingDeposit), 60000);
        };
        
        // MCP-MARKER:FUNCTION:FORCE_FAVICON_RELOAD - Принудительное обновление фавиконов
        window.forceFaviconReload = function() {
            debugLog('Принудительное обновление фавиконов...', 'info');
            
            const faviconUrls = [
                'assets/favicon-new.ico?v=' + Date.now(),
                'assets/favicon.ico?v=' + Date.now(),
                'assets/favicon-better.svg?v=' + Date.now(),
                'assets/icons/favicon-32x32.png?v=' + Date.now(),
                'assets/icons/favicon-16x16.png?v=' + Date.now()
            ];
            
            // Удаляем старые фавиконы
            const existingFavicons = document.querySelectorAll('link[rel*="icon"]');
            existingFavicons.forEach(link => link.remove());
            
            // Добавляем новые фавиконы
            faviconUrls.forEach(url => {
                const link = document.createElement('link');
                link.rel = 'icon';
                link.href = url;
                if (url.includes('.svg')) {
                    link.type = 'image/svg+xml';
                } else if (url.includes('.ico')) {
                    link.type = 'image/x-icon';
                } else if (url.includes('.png')) {
                    link.type = 'image/png';
                    if (url.includes('32x32')) {
                        link.sizes = '32x32';
                    } else if (url.includes('16x16')) {
                        link.sizes = '16x16';
                    }
                }
                document.head.appendChild(link);
            });
            
            debugLog('Фавиконы обновлены', 'success');
        };
        
        // Автоматическое обновление фавиконов при загрузке страницы
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                window.forceFaviconReload();
            }, 1000);
        });
    </script>
</body>
</html>