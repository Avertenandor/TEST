<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terminal Module Test</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0d1117;
            color: #ffffff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .test-container {
            padding: 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-header h1 {
            color: #4ecdc4;
            margin-bottom: 0.5rem;
        }
        
        .test-info {
            background: rgba(78, 205, 196, 0.1);
            border: 1px solid rgba(78, 205, 196, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
        }
        
        #terminal-container {
            min-height: 600px;
            border: 2px solid #4ecdc4;
            border-radius: 8px;
            padding: 1rem;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            color: #4ecdc4;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üöÄ Terminal Module Test</h1>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ GENESIS</p>
        </div>
        
        <div class="test-info">
            <h3>üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é:</h3>
            <ul>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫</li>
                <li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã: <code>help</code>, <code>status</code>, <code>balance</code></li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (Tab)</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–∞–Ω–¥ (‚Üë/‚Üì)</li>
                <li>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã</li>
            </ul>
        </div>
        
        <div id="terminal-container">
            <div class="loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è —Ç–µ—Ä–º–∏–Ω–∞–ª–∞...</div>
        </div>
    </div>

    <script type="module">
        import TerminalModule from './modules/terminal/index.js';
        
        async function initTerminal() {
            try {
                console.log('üöÄ Starting terminal module test...');
                
                // –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –º–æ–¥—É–ª—è
                const terminalModule = new TerminalModule();
                
                // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
                const container = document.getElementById('terminal-container');
                const context = { container };
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥—É–ª—å
                await terminalModule.init(context);
                
                console.log('‚úÖ Terminal module test completed successfully');
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    if (window.CabinetTerminal) {
                        console.log('üß™ Running terminal tests...');
                        
                        // –¢–µ—Å—Ç 1: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
                        window.CabinetTerminal.log('üß™ Test message: Module loaded successfully', 'success');
                        
                        // –¢–µ—Å—Ç 2: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
                        setTimeout(() => {
                            window.CabinetTerminal.executeCommand('status');
                        }, 1000);
                        
                        // –¢–µ—Å—Ç 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                        setTimeout(() => {
                            const stats = window.CabinetTerminal.stats;
                            console.log('üìä Terminal stats:', stats);
                            window.CabinetTerminal.log(`üìä Current stats: ${stats.messageCount} messages, ${stats.errorCount} errors`, 'info');
                        }, 2000);
                        
                    } else {
                        console.error('‚ùå CabinetTerminal not available');
                    }
                }, 2000);
                
            } catch (error) {
                console.error('‚ùå Terminal module test failed:', error);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
                const container = document.getElementById('terminal-container');
                container.innerHTML = `
                    <div style="color: #ff4757; text-align: center; padding: 2rem;">
                        <h3>‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª—è</h3>
                        <p>${error.message}</p>
                        <pre style="text-align: left; background: rgba(255, 71, 87, 0.1); padding: 1rem; border-radius: 4px; margin-top: 1rem;">${error.stack}</pre>
                    </div>
                `;
            }
        }
        
        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        initTerminal();
    </script>
</body>
</html>
