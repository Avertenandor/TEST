/**
 * GENESIS 1.1 - Crypto Site Responsive Fixes
 *
 * Исправления для crypto-processing.net:
 * - Фикс списков авторизации на мобиле
 * - Стековые кнопки на узких экранах
 * - Сокращение адресов/хэшей
 * - Max-width для читаемости на десктопе
 * - Многоколоночные технические списки
 *
 * Брейкпоинты: 360/390/414/480 → 768 → 1024 → 1280 → 1440 → 1920
 */

/* ========================================
   1. ФИКС СПИСКОВ АВТОРИЗАЦИИ НА МОБИЛЕ
   ======================================== */

/* Списки с инструкциями должны корректно отображаться */
.instructions-steps,
.genesis-step-list {
    list-style-type: decimal;
    list-style-position: outside;
    padding-left: 2rem !important;
    margin: 1.5rem 0;
}

.instructions-steps li,
.genesis-step-list li {
    display: list-item !important;
    margin-bottom: 1rem;
    padding-left: 0.5rem;
    line-height: 1.6;
    position: relative;
}

/* Убираем кастомные ::before если они конфликтуют */
.genesis-step-list li::before {
    display: none !important;
}

/* Текст внутри span должен отображаться */
.instructions-steps li .step-text,
.genesis-step-list li .word {
    display: inline !important;
    opacity: 1 !important;
    visibility: visible !important;
}

@media (max-width: 480px) {
    .instructions-steps,
    .genesis-step-list {
        padding-left: 1.5rem !important;
        font-size: 0.95rem;
    }

    .instructions-steps li,
    .genesis-step-list li {
        margin-bottom: 0.875rem;
    }
}

/* ========================================
   2. СТЕКОВЫЕ КНОПКИ НА МОБИЛЕ
   ======================================== */

/* Контейнер кнопок авторизации */
.genesis-buttons-container,
.qr-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    width: 100%;
}

@media (max-width: 479px) {
    .genesis-buttons-container,
    .qr-actions {
        flex-direction: column;
        gap: 0.75rem;
    }

    .genesis-buttons-container button,
    .qr-actions button,
    .genesis-btn,
    .action-btn {
        width: 100%;
        min-width: auto;
        margin: 0 !important;
    }
}

@media (min-width: 480px) and (max-width: 767px) {
    .genesis-buttons-container,
    .qr-actions {
        flex-direction: row;
        justify-content: center;
    }

    .genesis-buttons-container button,
    .qr-actions button {
        flex: 1 1 auto;
        min-width: 140px;
        max-width: 200px;
    }
}

/* ========================================
   3. СОКРАЩЕНИЕ АДРЕСОВ И ХЭШЕЙ
   ======================================== */

/* Адреса контрактов и кошельков */
.auth-address,
.contract-address,
.address-display-box code,
.detail-value[class*="0x"] {
    font-family: 'Monaco', 'Courier New', monospace;
    font-size: 0.875rem;
    word-break: break-all;
    overflow-wrap: anywhere;
    line-height: 1.4;
}

.address-display-box,
.address-container,
.contract-address-section {
    max-width: 100%;
    overflow: hidden;
}

@media (max-width: 767px) {
    .auth-address,
    .contract-address {
        font-size: 0.75rem;
    }

    /* Принудительное сокращение для адресов на мобиле */
    .auth-address::before,
    .contract-address::before {
        content: attr(data-short);
    }
}

/* Утилита для копирования */
.copy-icon,
.copy-btn {
    cursor: pointer;
    user-select: none;
    flex-shrink: 0;
    padding: 0.25rem 0.5rem;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.copy-icon:hover,
.copy-btn:hover {
    opacity: 1;
}

/* ========================================
   4. MAX-WIDTH ДЛЯ ДЕСКТОПА (читаемость)
   ======================================== */

/* Ограничение ширины текстовых блоков */
.genesis-income-overview,
.genesis-auth-container,
.section-header,
.auth-instructions-card,
.genesis-auth-instruction {
    max-width: 820px;
    margin-left: auto;
    margin-right: auto;
}

/* Формы и инпуты */
.genesis-auth-form,
.qr-main-card,
.unified-card {
    max-width: 640px;
    margin-left: auto;
    margin-right: auto;
}

/* Контент-секции */
.income-content,
.genesis-pwa-content {
    max-width: 1200px;
    margin-left: auto;
    margin-right: auto;
}

/* Padding для контейнеров */
@media (min-width: 1024px) {
    .genesis-container {
        padding-left: clamp(2rem, 5vw, 4rem);
        padding-right: clamp(2rem, 5vw, 4rem);
    }
}

@media (max-width: 480px) {
    .genesis-container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
}

/* ========================================
   5. ТЕХНИЧЕСКИЕ СПИСКИ В КОЛОНКИ
   ======================================== */

/* Карточки с технической информацией */
@media (min-width: 1024px) {
    .genesis-info-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 2rem;
        column-gap: 3rem;
    }

    /* Списки параметров устройства */
    .genesis-info-card .info-list,
    .contract-details {
        column-count: 2;
        column-gap: 2rem;
    }

    .info-item,
    .detail-row {
        break-inside: avoid;
        page-break-inside: avoid;
    }
}

@media (min-width: 1280px) {
    .genesis-info-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    /* 3 колонки для больших списков */
    .genesis-info-card .info-list.large-list {
        column-count: 3;
    }
}

@media (max-width: 767px) {
    .genesis-info-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }

    .info-item,
    .detail-row {
        padding: 0.75rem 0;
        font-size: 0.9rem;
    }
}

/* ========================================
   6. ФИКС ПЕРЕПОЛНЕНИЯ КОНТЕНТА
   ======================================== */

/* Предотвращаем горизонтальный скролл */
body {
    overflow-x: hidden;
}

.genesis-app,
.genesis-section {
    max-width: 100vw;
    overflow-x: hidden;
}

/* Все карточки должны помещаться */
.unified-card,
.income-card,
.quote-card,
.mev-card,
.cta-card {
    max-width: 100%;
    box-sizing: border-box;
}

/* ========================================
   7. TOUCH-FRIENDLY ИНТЕРФЕЙС
   ======================================== */

/* Увеличенные области касания */
@media (hover: none) and (pointer: coarse) {
    button,
    .genesis-btn,
    .action-btn,
    .genesis-btn-copy,
    a[role="button"] {
        min-height: 44px;
        min-width: 44px;
        padding: 0.875rem 1.25rem;
    }

    input,
    select,
    textarea {
        min-height: 44px;
        font-size: 16px !important; /* Предотвращает zoom на iOS */
    }
}

/* ========================================
   8. АДАПТИВНАЯ ТИПОГРАФИКА
   ======================================== */

.genesis-brand-title {
    font-size: clamp(2rem, 8vw, 4rem);
    line-height: 1.2;
}

.genesis-brand-subtitle,
.section-subtitle {
    font-size: clamp(0.95rem, 2.5vw, 1.25rem);
    line-height: 1.5;
}

.section-title,
h2 {
    font-size: clamp(1.5rem, 5vw, 2.5rem);
    line-height: 1.3;
}

.income-card h3,
h3 {
    font-size: clamp(1.25rem, 4vw, 1.75rem);
}

.income-list li,
.features-list li,
.instructions-list li {
    font-size: clamp(0.9rem, 2vw, 1.05rem);
    line-height: 1.6;
}

/* ========================================
   9. iOS SAFE AREA
   ======================================== */

@supports (padding-top: env(safe-area-inset-top)) {
    .genesis-header {
        padding-top: max(1rem, env(safe-area-inset-top));
    }

    .genesis-buttons-container,
    .qr-actions {
        padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
    }
}

/* ========================================
   10. УЛУЧШЕНИЕ ВИЗУАЛЬНОЙ ИЕРАРХИИ
   ======================================== */

@media (max-width: 767px) {
    /* Уменьшаем отступы на мобиле */
    .genesis-section {
        padding: 2.5rem 0;
    }

    .genesis-income-overview,
    .auth-instructions-card,
    .genesis-auth-instruction {
        padding: 1.5rem 1rem;
        margin: 1rem 0;
    }

    .unified-card,
    .income-card,
    .qr-main-card {
        padding: 1.25rem 1rem;
        margin: 1rem 0;
    }
}

@media (min-width: 768px) {
    .genesis-section {
        padding: 4rem 0;
    }

    .auth-instructions-card,
    .genesis-auth-instruction,
    .unified-card {
        padding: 2rem 2.5rem;
        margin: 2rem auto;
    }
}

/* ========================================
   11. СПЕЦИАЛЬНЫЕ БРЕЙКПОИНТЫ
   ======================================== */

/* Ultra small: 360px */
@media (max-width: 360px) {
    .genesis-brand-title {
        font-size: 1.75rem;
    }

    .genesis-btn,
    .action-btn {
        font-size: 0.875rem;
        padding: 0.75rem 1rem;
    }
}

/* Small: 390px - 414px (iPhone 12/13/14) */
@media (min-width: 390px) and (max-width: 414px) {
    .genesis-buttons-container {
        gap: 0.875rem;
    }
}

/* Medium: 768px - 1023px (Tablets) */
@media (min-width: 768px) and (max-width: 1023px) {
    .genesis-buttons-container {
        flex-direction: row;
        justify-content: center;
        gap: 1rem;
    }

    .genesis-buttons-container button {
        flex: 1 1 30%;
        min-width: 160px;
        max-width: 220px;
    }
}

/* Large Desktop: 1920px+ */
@media (min-width: 1920px) {
    .genesis-container {
        max-width: 1600px;
    }

    .genesis-info-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}

/* ========================================
   12. ЛАНДШАФТНАЯ ОРИЕНТАЦИЯ
   ======================================== */

@media (max-width: 768px) and (orientation: landscape) {
    .genesis-section {
        padding: 2rem 0;
    }

    .genesis-buttons-container {
        flex-direction: row;
        gap: 0.75rem;
    }

    .genesis-buttons-container button {
        flex: 1;
    }
}

/* ========================================
   13. ACCESSIBILITY & PERFORMANCE
   ======================================== */

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

/* Print styles */
@media print {
    .genesis-header,
    .genesis-buttons-container,
    .qr-actions,
    .cache-controls {
        display: none !important;
    }

    .genesis-section {
        page-break-inside: avoid;
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    /* Стили уже темные по умолчанию */
}

/* High contrast mode */
@media (prefers-contrast: high) {
    button,
    .genesis-btn,
    .action-btn {
        border: 2px solid currentColor;
    }
}
